#+STARTUP: overview
#+OPTIONS: d:nil
#+OPTIONS: toc:nil
#+TAGS: Presentation(p) noexport(n) taskjuggler_project(t) taskjuggler_resource(r) 
#+DRAWERS: PICTURE CLOSET 
#+PROPERTY: allocate_ALL dev doc test
#+STARTUP: hidestars hideblocks 
#+LaTeX_CLASS_OPTIONS: [12pt,twoside]
#+LATEX_HEADER: \usepackage{lscape} 
#+LATEX_HEADER: \usepackage{fancyhdr} 
#+LATEX_HEADER: \usepackage{multirow}
#+LATEX_HEADER: \usepackage{multicol}
#+BEGIN_LaTeX
\pagenumbering{}
#+END_LaTeX 
#+TITLE: Data Roaming Reconciliation
#+BEGIN_LaTeX
\newpage
\clearpage
% \addtolength{\oddsidemargin}{-.25in}
\addtolength{\oddsidemargin}{-.5in}
\addtolength{\evensidemargin}{-01.25in}
\addtolength{\textwidth}{1.4in}
\addtolength{\topmargin}{-1.25in}
\addtolength{\textheight}{2.45in}
\setcounter{tocdepth}{3}
\vspace*{1cm} 
\newpage
\pagenumbering{roman}
\setcounter{tocdepth}{2}
\pagestyle{fancy}
\fancyhf[ROF,LEF]{\bf\thepage}
\fancyhf[C]{}
#+END_LaTeX
#+TOC: headlines 2
#+BEGIN_LaTeX
\newpage
\pagenumbering{arabic}
#+END_LaTeX
:CLOSET:
  : Hours #+PROPERTY: Effort_ALL 1 2 3 4 5 6 7 8
  : Days  #+PROPERTY: Effort_ALL 1d 2d 3d 4d 5d 6d 7d 8d 9d
  : weeks #+PROPERTY: Effort_ALL 5d 10d 15d 20d 25d 30d 35d 40d 45d
  : #+PROPERTY: Effort_ALL 1d 2d 3d 4d 5d 6d 7d 8d 9d 10d 15d
  : #+COLUMNS: %30ITEM(Task) %6effort %13allocate %19blocker %9ordered

 : Add a Picture
 :   #+ATTR_LaTeX: width=13cm
 :   [[file:example_picture.png]]

 : New Page
 : \newpage
:END:
* Data Roaming Reconciliation Documentation [0%]
  SCHEDULED:
  - [ ] Documentation
  - [ ] Code
  - [ ] Test 
  - [ ] Deploy

** Project Scope
    Create a daily reconciliation report for all roaming data types to reconcile both usage and revenue.
** Assumptions
** User Requirements
   There will be a Daily and monthly report sent for each roaming type.
*** Daily Report
      [[file:docs/Settlement-416-515.xlsx][May CDMA Incollect Settlement Report]]
#+PROPERTY: Effort_ALL 1d 2d 3d 4d 5d 6d 7d 8d 9d 10d 15d
#+COLUMNS: %30ITEM(Task) %6effort %13allocate %19blocker %9ordered
** TODO Process Decomposition [75%] 
   - [X] OutCollects [100%]
     - [X] Read Craigs Doc
     - [X] Is there anything for voice or is it just data?
     - [X] I believe 
   - [ ] How do we plan to compare to Syniverse [0%]
     - [ ] Will there be a job that reads the file then adds the information to the database.
   - [X] Where does all the ARCM come in 
     Used for LTE and Volte
   - [X] Where does VOLTE and LTE in collects come into play.
** Analysis [%]
   :PROPERTIES:
   :blocker:  start
   :ordered:  t
   :END:
*** Usage Types (Incollects) [80%]
     :PROPERTIES:
     :effort:   1.5d
     :END:
    - [X] CDMA Voice
      - *Directory:* //pkgbl02/inf/aimsys/prdwrk2/var/usc/projs/up/physical/switch/DIRI/
      - *Machine:* kpr02batch
      - *Record Type:* CIBER
    - [X] CDMA Data
      - *Directory:* //pkgbl02/inf/aimsys/prdwrk2/var/usc/projs/up/physical/switch/DATACBR/
      - *Machine:* kpr02batch
      - *Record Type:* CIBER
    - [ ] Volte
      - *Directory:* //m01/switchb/tas/
      - *Machine:* kpr02batch
      - *Record Type:* TAP
    - [X] LTE
      - *Directory*: 
      - *Machine:* kp02batch
      - *Record Type:* TAP
    - [X] GSM
      - *Directory*: /pkgbl02/inf/aimsys/prdwrk2/var/usc/projs/up/physical/GSMI (data)
	- ../GSMI/gsmv/ (voice)
	- ../GSMI/gsms/ (SMS)
	- ../GSMI/gsmt/ (PMG)
      - *Machine:* kpr02batch
      - *Record Type:* TAP
*** System Flow
***** ARCM
     #+ATTR_LaTeX: width=13cm
      [[file:docs/ARCM_Incollect.png]]
      :PROPERTIES:
      :effort:   4d
      :END:
****** ARCM Tables

       - SMM1_COLLECT_FILES_HIST
|-------------------+---------------------+------------|
| *Columns*         | *Data Type*         | *Comments* |
|-------------------+---------------------+------------|
| SYS_UPDATE_DATE   | DATE                |            |
| SYS_CREATION_DATE | DATE                |            |
| SOURCE_TYPE       | VARCHAR2 (10 Byte)  |            |
| SOURCE_ID         | NUMBER (22)         |            |
| REJECT_REASON     | VARCHAR2 (512 Byte) |            |
| PHYSICAL_DATE     | DATE                |            |
| PERIOD_KEY        | NUMBER (4)          |            |
| OPERATOR_ID       | NUMBER (9)          |            |
| IS_INSTANCE_ID    | NUMBER (11)         |            |
| FILE_STATUS       | VARCHAR2 (2 Byte)   |            |
| FILE_SIZE         | NUMBER (15)         |            |
| FILE_PATH         | VARCHAR2 (512 Byte) |            |
| FILE_NAME         | VARCHAR2 (200 Byte) |            |
| FILE_IDENTIFIER   | NUMBER (22)         |            |
| FILE_FORMAT       | VARCHAR2 (10 Byte)  |            |
| DL_UPDATE_STAMP   | NUMBER (4)          |            |
| DL_SERVICE_CODE   | CHAR (5 Byte)       |            |
| APPLICATION_ID    | CHAR (6 Byte)       |            |
|-------------------+---------------------+------------|

      :PROPERTIES:
      :effort:   2d
      :END:
*** DONE Analyse Mediations Outcollect Process
      :PROPERTIES:
      :effort:   3d
      :END:
** Development
   :PROPERTIES:
   :ordered:  t
   :blocker:  previous-sibling
   :END:
*** Create table
    Create the table using the spreadsheet as a reference.
    [[file:docs/Settlement-416-515.xlsx][May CDMA Incollect Settlement Report]]

    : CREATE TABLE table_name
    : ( 
    :  column1 datatype [ NULL | NOT NULL ],
    :  column2 datatype [ NULL | NOT NULL ],
    :  column_n datatype [ NULL | NOT NULL ]
    : );

*** Executable
***** *runRecon.pl*
    - *Language:* Perl
    - *Source Code Location:*
    - *Parameters:* /none/
    - *Description:* \\
      Perl CRON script that fires off the reconciliation process at given given time. Once the process is complte it whats until the next scheduled run. Eventually this process will be modified to run within the EPS monitors.

***** *roamingReconciliation.pl*
    - *Language:* Perl
    - *Source Code Location:*
    - *Parameters:* List of reports to run and the date to run them on.
    - *Description:* \\
      The main process which tracks all the sub processes for each roaming type. Summerizes the output and creates a spreadsheet and populates the roaming reconciliation table (ROAMRECON) with the results.

***** *getFileInfo.pl*
    - *Language:* Perl
    - *Source Code Location:*
    - *Parameters:* 
      - *Input* The name of the file do perform the reconciliation.
      - *Output* The query results for the file as well as list of all the rejected and dropped records .
    - *Description:* \\
      Whenever *roamingReconciliation.pl* finds a *CDMA Voice Incollect* file that needs to be reconciled it will kick off this job. The job then will query the file and produce 3 reports:
      - Database summation from input file to APRM.
      - List of rejected records.
      - List of dropped records.

***** *getFileInfoData.pl*
    - *Language:* Perl
    - *Source Code Location:*
    - *Parameters:* 
      - *Input* The name of the file do perform the reconciliation.
      - *Output* The query results for the file as well as list of all the rejected and dropped records .
    - *Description:* \\
      Whenever *roamingReconciliation.pl* finds a *CDMA Data Incollect* file that needs to be reconciled it will kick off this job. The job then will query the file and produce 3 reports:
      - Database summation from input file to APRM.
      - List of rejected records.
      - List of dropped records.

***** *getFileInfoOutcollects.pl*
    - *Language:* Perl
    - *Source Code Location:*
    - *Parameters:*
      - *Input* The name of the file do perform the reconciliation.
      - *Output* The query results for the file.
    - *Description:* \\
      Whenever *roamingReconciliation.pl* finds a *CDMA Voice Outcollect* file that needs to be reconcilied it will kick off this job. The job then will produce a file with the results of the file query.

***** *getFileInfoOutcollectsData.pl*
    - *Language:* Perl
    - *Source Code Location:*
    - *Parameters:* Date of reconcliation.
    - *Description:* \\
      This jobs reconciles whole days for *Data Outcollects* and produces two reports one by clearinghose the other by business partner. 

***** *getFileInfoLTE.pl*
    - *Language:* Perl
    - *Source Code Location:*
    - *Parameters:* 
      - *Input* The name of the file, plus other information, to perform the reconciliation.
      - *Output* The query results for the file as well as list of all the rejected and dropped records .
    - *Description:* \\
      Whenever *roamingReconciliation.pl* finds a *LTE Incollect or GSM* file that needs to be reconciled it will kick off this job. The job then will query the file and produce 3 reports:
      - Database summation from input file to APRM.
      - List of rejected records.
      - List of dropped records.

***** *getFileInfoLTEOut.pl*
    - *Language:* Perl
    - *Source Code Location:*
    - *Parameters:*
      - *Input* The name of the file, plus other information, to perform the reconciliation.
      - *Output* The query results for the file.
    - *Description:* \\
      Whenever *roamingReconciliation.pl* finds a *LTE Outcollect* file that needs to be reconciled it will kick off this job.The job then will produce a file with the results of the file query.

***** *getFileInfoAprm.pl*
    - *Language:* Perl
    - *Source Code Location:*
    - *Parameters:*
      - *Input* Date of reconciliation
      - *Output* APRM dump by carrier code for a given day.
    - *Description:* \\
      Used to create a report for all CDMA data to show APRM data by carrier code for a given day.

***** *getFileInfoAprmLTE.pl*
    - *Language:* Perl
    - *Source Code Location:*
    - *Parameters:*
      - *Input* Date of reconciliation
      - *Output* APRM dump by carrier code for a given day.
    - *Description:* \\
      Used to create a report for all LTE data (LTE, GSM and VOLTE) to show APRM data by carrier code for a given day.

***** *listLTE.pl*
    - *Language:* Perl
    - *Source Code Location:*
    - *Parameters:*
      - *Input* Date of reconciliation
      - *Output* List of LTE files
    - *Description:* \\
      Used to list files for both GSM and LTE incollect.

***** *addMultiUp.pl*
    - *Language:* Perl
    - *Source Code Location:*
    - *Parameters:*
      - *Input* tab delimited record
      - *Output* Sum for each column
    - *Description:* \\
      Utility program to sum multiple tab delimited columns 


** Data Decomposition
   - *Table/Field Name:*
   - *Purpose of File/Table:*
   - *Type of Change:* /create new or modify existing/
   - *Description of Change:* /or reason for adding/
   - *Primary Keys and Indices:*
   - *Estimated Rows and Growth Rate:*
|-------------------+------+--------+-------------|
| Column/Field Name | Type | Values | Description |
|-------------------+------+--------+-------------|
|                   |      |        |             |
|-------------------+------+--------+-------------|

** Schedule/Time Management
  - Build Date
    DEADLINE: <2016-12-18 Sun>   
  - Planned Implimentation Date
    DEADLINE: <2017-02-12 Sun>
** Infrastructure Considerations
** Testing Approach
** Implementation Considerations
* Communications Management
   /[Insert the project's communication management plan or provide a reference to where it is stored.]/
** Communication Matrix
|-------------+----------+----------+-----------+---------------+---------------------|
| Stakeholder | Messages | Vehicles | Frequency | Communicators | Feedback Mechanisms |
|-------------+----------+----------+-----------+---------------+---------------------|
|             |          |          |           |               |                     |
|-------------+----------+----------+-----------+---------------+---------------------|

* Issue Management
   /[Insert the project's issue management plan or provide a reference to where it is stored.]/
** Issue Log
    /[The Issue Log is normally maintained as a separate document. Provide a reference to where it is stored.]/

* SOFTWARE CHANGES

#+BEGIN_LaTeX
\newpage
\begin{landscape} 
#+END_LaTeX
* TEST CONDITIONS
|--------------+---------------+------------------+-----------------------------------+------------------+----------------+-----------|
| Test Cond Id | Module Tested | Condition Tested | Test Data - Specify Modifications | Expected Results | Actual Results | Revw'd By |
|--------------+---------------+------------------+-----------------------------------+------------------+----------------+-----------|
|              |               |                  |                                   |                  |                |           |
|--------------+---------------+------------------+-----------------------------------+------------------+----------------+-----------|
#+BEGIN_LaTeX
\end{landscape} 
\newpage
#+END_LaTeX
* TEST EXECUTION RESULTS
