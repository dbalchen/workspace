#+STARTUP: overview
#+OPTIONS: d:nil
#+OPTIONS: toc:nil
#+TAGS: Presentation(p) noexport(n) taskjuggler_project(t) taskjuggler_resource(r) 
#+DRAWERS: PICTURE CLOSET 
#+PROPERTY: allocate_ALL dev doc test
#+STARTUP: hidestars hideblocks 
#+LaTeX_CLASS_OPTIONS: [12pt,twoside]
#+LATEX_HEADER: \usepackage{lscape} 
#+LATEX_HEADER: \usepackage{fancyhdr} 
#+LATEX_HEADER: \usepackage{multirow}
#+LATEX_HEADER: \usepackage{multicol}
#+BEGIN_LaTeX
\pagenumbering{}
#+END_LaTeX 
#+TITLE: Notes
#+BEGIN_LaTeX
\newpage
\clearpage
\addtolength{\oddsidemargin}{-.25in}
%\addtolength{\oddsidemargin}{-.5in}
\addtolength{\evensidemargin}{-01.25in}
\addtolength{\textwidth}{1.4in}
\addtolength{\topmargin}{-1.25in}
\addtolength{\textheight}{2.45in}
\setcounter{tocdepth}{3}
\vspace*{1cm} 
\newpage
\pagenumbering{roman}
\setcounter{tocdepth}{2}
\pagestyle{fancy}
\fancyhf[ROF,LEF]{\bf\thepage}
\fancyhf[C]{}
#+END_LaTeX
#+TOC: headlines 2
#+BEGIN_LaTeX
\newpage
\pagenumbering{arabic}
#+END_LaTeX
:CLOSET:
  : Hours #+PROPERTY: Effort_ALL 1 2 3 4 5 6 7 8
  : Days  #+PROPERTY: Effort_ALL 1d 2d 3d 4d 5d 6d 7d 8d 9d
  : weeks #+PROPERTY: Effort_ALL 5d 10d 15d 20d 25d 30d 35d 40d 45d
  : #+PROPERTY: Effort_ALL 1d 2d 3d 4d 5d 6d 7d 8d 9d 10d 15d
  : #+COLUMNS: %30ITEM(Task) %6effort %13allocate %19blocker %9ordered

 : Add a Picture
 :   #+ATTR_LaTeX: width=13cm
 :   [[file:example_picture.png]]

 : New Page
 : \newpage
:END:
* Statement of Principals						  
   - /Mathematics is a language with no ambiguity./
   - /A successful man made system will closely resembles some natural system./
   - /A Powerpoint presentation is like smoking a cigar, only the
     person doing it likes it./
   - /Probability from a point./
     -  $a(i) = 1-$ \Large $\frac{i}{n}$ \normalsize where $0 <= i < n$ and $n > 0$

* Usage Overview
   Usage is made up of events which are records of transactions made by our customers. We tend to think of usage
   in two ways, *Voice* and *Data*.\\

*Voice*
   1. *Alcatel Lucent (APLX)* - The *Alcatel Lucent APLX* switch record
      are found mostly in the Maine market. This switch produces both
      /Mobile Originating and Mobile Terminated/ records.
   2. *Nortel (NTI)* - The *NORTEL NTI* switch record is the most common
      voice record format and since an NTI record contains both the
      /originating and terminating features/ certain call types may
      result in a record being generated.
   3. *GSM Roaming* - Voice and data recotrds from our customers who are
      roaming in Europe and other *GSM* countries.
   4. *CIBER* - For /InCollect and OutCollect/ processing.\\

*Data*
   1. *SMSC Server* - Both *Motorola* and *Acatel-Lucent SMS* records
      that can be either a /Mobile Originating or Terminating/ record
      type.
   2. *AAA Server* - Produces one record for each complete data session.
      -  *PGW* - P-Gateway *LTE* data usage
      -  *ECS* - ECS *3G and lower* data usage.
      -  *AAA* - Raw AAA usage found on the CallDump only.
      -  *TAS* - /Volte/ Voice over *LTE*.
   3. *VALI* - /Premium SMS (Valista)/ pre-rated records one record per
      event.
   4. *MMSC* - Used for both pictures and picture messaging text only
      (treated as an *SMS* message in the system). Produces both /Mobile
      Originating and Terminating/ records with a possible one to many
      relationships (multiple recipients).\\
** Pre-Pay and Data Roaming

      In addition to *Post-Pay* we also handle *Pre-Pay* which follows a
      different flow using the diameter interface. The *Diameter
      interface* is described as follows:

      -  *Diameter* is a *AAA* protocol, a type of computer networking
         protocol for authentication, authorization and accounting, and
         is a successor to *RADIUS*. *Diameter* controls communication
         between the authenticator (Secure Ticket Authority, STA) and
         any network entity requesting authentication. *Diameter
         Applications* extend the base protocol by adding new commands
         and/or attributes, such as those for use of the Extensible
         Authentication Protocol (*EAP*).
** Usage Time Zones
|--------------+-----------------|
| *Usage Type* | *TimeZone*      |
|--------------+-----------------|
| AAA          | GMT             |
| PGW/LTE      | GMT             |
| PMG/PTX      | GMT             |
| TAS          | GMT             |
| MOT/ALU      | EST             |
| Voice        | Switch Location |
| CIBER        | Switch Location |
| GSMD/V/S     | GMT             |
|--------------+-----------------|

** Duplicate Record Keys
#+BEGIN_LaTeX
\small
#+END_LaTeX

| *MMS*                  | *SMS*             | *Content*             |
| 1. Event type ID       | 1. Event type ID  | 1. Event type ID      |
| 2. Start time          | 2. Start time     | 2. Start time         |
| 3. Resource value      | 3. Resource value | 3. Resource value     |
| 4. Call direction      | 4. Call direction | 4. Content session ID |
| 5. Called number       | 5. Called number  |                       |
| 6. Calling number      | 6. Calling number |                       |
|                        |                   |                       |
|                        |                   |                       |
| *Voice*                | *Data*            | *LTE*                 |
| 1. Event type ID       | 1. Event type ID  | 1. Event type ID      |
| 2. Start time          | 2. Start time     | 2. Start time         |
| 3. Resource value      | 3. Resource value | 3. Resource value     |
| 4. Call direction      | 4. Call direction | 4. Call direction     |
| 5. Surcharge indicator | 5. Call source    | 5. Call source        |
| 6. Air elapsed time    |                   |                       |
| 7. Calling number      |                   |                       |

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
** Guide By Criteria
|--------------+------------|
| *Data Types* | *Guide By* |
|--------------+------------|
| voice        | MSID       |
| GSM          | *IMSI*     |
| SMS          | MDN        |
| VOLTE/TAS    | IMSI       |
| PMG/PTX      | MSID       |
| AAA          | MSID       |
| *PGW/LTE*    | *MDN/IMSI* |
| Vali         | MDN        |
|--------------+------------|

** US Territories
      These calls are identified as international but are charged
      domestic rates.
|--------------+-----------+------------------+------------------------------|
| Country Code | Area Code | ISO Country Code | Description                  |
|--------------+-----------+------------------+------------------------------|
|            1 |       340 | VIR              | United States Virgin Islands |
|            1 |       670 | MNP              | Northern Mariana Islands     |
|            1 |       671 | GUM              | Guam                         |
|            1 |       684 | ASM              | American Samoa               |
|            1 |   787/939 | PRI              | Puerto Rico                  |
|--------------+-----------+------------------+------------------------------|


#+BEGIN_LaTeX
\newpage 
#+END_LaTeX
#+BEGIN_LaTeX
\begin{landscape}  
#+END_LaTeX
#+ATTR_LaTeX: width=20cm
:PICTURE:
digraph BI {

graph [splines=true nodesep=0.8 size=8.5,11 compress=true overlap=false style=bold];

node [shape=folder];"Database";"CallDump""APRM";
node [shape=house];"Syniverse";"Business";"EPC";"MFT";

node [shape=triangle];"Switch";
node [shape=circle];"A&F";

"Switch" -> "Intec" [label = "(a)"];
"Switch" -> "SCP" [label = "(i)"];
"Syniverse" -> "Intec" [label = "(b)"];
"Syniverse" -> "Intec" [label = "(j)"];
"Intec" -> "CallDump" [label = "(n)"];
"Intec" -> "A&F" [label = "(d)"];	     
"Intec" -> "Syniverse" [label = "(c)"];
"Database" -> "Intec" [label = "(f)"];	
"A&F" -> "F2E" [label = "(e)"];
"F2E" -> "Turbo Charging" [label = "(e)"];
"Turbo Charging" -> "Database" [label = "(d)"];
"Turbo Charging" -> "Intec" [label = "(c)"];
"Turbo Charging" -> "MFT" [label = "(j)"];
"Turbo Charging" -> "APRM" [label = "(+)"];
"Database" -> "Turbo Charging" [label = "(e)"];
"MFT" -> "Turbo Charging" [label = "(o)"];
"SCP" -> "Turbo Charging" [label = "(i)"];
"EPC" -> "Database" [label = "(e)"];
"Business" -> "Database" [label = "(i)"];

subgraph cluster_2 {
	
"Switch";
"MFT";
"SCP";
color="#FFFFFF";
label = " ";

}


subgraph cluster_3 {
	"F2E";
	"Turbo Charging";
	"A&F";
	"APRM";
	label = "TOPS";
	
	subgraph cluster_1 {
		"Database";
		"EPC";
		color="#FFFFFF";
		label = " ";		
	}
	
}



}
:END:
   [[file:Pictures/usage_flow.jpg]]
#+BEGIN_LaTeX
\end{landscape} 
\newpage
#+END_LaTeX

#+BEGIN_LaTeX
\begin{landscape}  
#+END_LaTeX
#+ATTR_LaTeX: width=23cm
    [[file:Pictures/roamingPrePay.png]]
#+BEGIN_LaTeX
\end{landscape} 
\newpage
#+END_LaTeX
** Voice Overview

      One major undertaking in the transition to *TOPS* is moving most
      of the voice mediation to the *INTEC* platform. To help facilitate
      this move, the current rules system *(RBMS)* was studied and
      documented. The following provides a brief overview of the
      processes used.
*** Call Types
    1. *M-M* - Mobile to Mobile
    2. *M-L* - Mobile to Land Line
    3. *L-M* - Land Line to Mobile
    4. *L-L* - Land Line to Land Line

The call records can come in four possible states.
    1. Mobile Terminating (Incoming)
    2. Mobile Originating (Outgoing)
    3. *NTI ONLY*
        -  *Both* \\ *(NTI Mobile to Mobile)* in which for every
            voice event, two records are created, a *Mobile
            Originated* and *Mobile Terminated* record. For *APLX*
            this is taken care of automatically. In the case of an
            *NTI* switch, depending on the call scenario, it is up to
             the mediation platform to create one if needed.
        -  *Neither* \\ (per example *L-L* )
#+BEGIN_LaTeX
\newpage 
#+END_LaTeX

#+BEGIN_LaTeX
\begin{landscape}  
#+END_LaTeX
*** Incoming - Mobile Terminated
         An *Incoming* call is a /mobile terminated/ call where one of
         our customers receives a call from some caller to a *USCC*
         switch.
\\
         *The diagram below shows the data flow for an incoming
         call:*
\\
\\
#+ATTR_LaTeX: width=20cm
   [[file:Pictures/incoming.png]]

#+BEGIN_LaTeX
\newpage 
#+END_LaTeX
*** Outgoing - Mobile Originated
         An *outgoing* call is a /mobile originating/ call from a *USCC*
         customer in which the following can occur.
\\
         *The diagram below shows the data flow for an outgoing call:*
\\
\\
#+ATTR_LaTeX: width=23cm
    [[file:Pictures/outgoing.png]]
#+BEGIN_LaTeX
\end{landscape} 
#+END_LaTeX
#+BEGIN_LaTeX
\newpage
#+END_LaTeX
* Unified File Format (UFF)
   In *TOPs* system all *CDRs*, excluding *InCollect/OutCollect CIBER*,
   will be reformatted into a /Unified File Format/ (*UFF*). This format
   will be a standard *Unix/ASCII* formatted *CSV* file using '|'
   *(pipe)* as the delimiter.
** UFF File Record Format
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align c|l|l
|---------+-------------------------+-------------------------------------------------------------------|
| *Field* | *Field Name*            | *Description*                                                     |
|---------+-------------------------+-------------------------------------------------------------------|
|       1 | Record Type             | HR - Header Record                                                |
|         |                         | DR - Data Record                                                  |
|         |                         | TR - Trailer Record                                               |
|       2 | Service Type            | Initial record type of Usage Record *MOT, PTX, ALU, QIS*,         |
|         |                         | *AAA, TPC, APLX, NTI, PMG, PGW*                                   |
|       3 | Record sequence Number  | A unique numeric identifier for the record.                       |
|       4 | File Number             | A unique identifier that shows the original file                  |
|         |                         | that the record came in from. /(ex. ID044803/)                    |
|       5 | Record Disposition      | The disposition shows the destination of the record               |
|         |                         | in the Mediation process.                                         |
|         |                         | 0 = Rated                                                         |
|         |                         | 1 = Dropped                                                       |
|         |                         | 2 = Error                                                         |
|       6 | Record Code             | The Drop or Error code. The drop and error codes will be defined  |
|         |                         | using present day *AMDOCS* codes as a template. (presently a 3    |
|         |                         | digit integer but will bump to 5 for extra growth)                |
|       7 | Source System           | Switch identifier (See Switch Name and type tab for a complete    |
|         |                         | listing) (Possible Voice values include:                          |
|         |                         | madi, scha etc.) (Data values can include aaa1, vali etc.         |
|       8 | Start Date              | Start date for this event {YYYYMMDD}                              |
|       9 | Start Time              | Start Time for this event {HHMMSSss}                              |
|      10 | Start TimeZone          | Offset in seconds from *GMT*                                      |
|      11 | Home Sid                | Home Switch ID                                                    |
|      12 | Serve SID               | Serving Switch ID                                                 |
|      13 | Originating Cell Trunk  | Initial cell trunk                                                |
|      14 | Terminating Cell Trunk  | Termination Cell trunk                                            |
|      15 | BSID                    | Broadcast Station ID                                              |
|      16 | Carrier ID              | The carrier that handled the events identification symbol.        |
|         |                         | Mostly USCC but may contain others especially in                  |
|         |                         | data roaming situations.                                          |
|      17 | Protocol                | *EVDO, LTE, CDMA*                                                 |
|      18 | Event Type              | *QIS* event type used for reporting and drop logic                |
|      19 | Call Direction          | One of two types:                                                 |
|         |                         | *Mobile Originating (MO)* or *Mobile Terminating (MT)*.           |
|      20 | Originating MSID        | 10-Digit Mobile Identification Number 16 digits for               |
|         |                         | possible future use/Blanks if mobile terminated                   |
|      21 | Identity                | MEID/ESN                                                          |
|      22 | Originating MDN         | In a Mobile Originating call It's the originating callers         |
|         |                         | phone number.                                                     |
|      23 | Originating Address     | IP or Email                                                       |
|      24 | Terminating MSID        | Called MSID this is on Mobile to Mobile records only.             |
|      25 | Terminating Number      | Normalized number /(example 6085551212 instead of 411/            |
|      26 | Dialed Digits           | The untranslated dialed number /(e.g. 441 instead of 555-1212)/   |
|      27 | Terminating Address     | IP Address/Email Name Client IP for *PMG*                         |
|      28 | Termination Code        | *SMS.CALL\_TERMINATION\_CODE*                                     |
|      29 | Service Feature         | MPS Service feature codes                                         |
|      30 | Call Forwarding Ind     | If the call has been forwarded than true, false otherwise.        |
|         |                         | 0 = False                                                         |
|         |                         | 1 = True                                                          |
|      31 | Call Delivery Ind       | If the call has been through call delivery than true,             |
|         |                         | false otherwise                                                   |
|         |                         | 0 = False                                                         |
|         |                         | 1 = True                                                          |
|         |                         | 2 = CDLX                                                          |
|      32 | Call Waiting Ind        | If the call has been through call waiting than true,              |
|         |                         | false otherwise                                                   |
|         |                         | 0 = False                                                         |
|         |                         | 1 = True                                                          |
|      33 | 3 way Calling Ind       | If the call has been through 3 way calling, false otherwise       |
|         |                         | 0 = False                                                         |
|         |                         | 1 = True                                                          |
|      34 | Call Answered Ind       | If the call has been answered than true, false otherwise.         |
|         |                         | 0 = False                                                         |
|         |                         | 1 = True                                                          |
|      35 | Ring Time               | Total ring time in seconds                                        |
|      36 | Call Duration           | Call duration minus ring-time in seconds.                         |
|         |                         | Includes the duration in seconds of the data session              |
|      37 | Roaming Ind             | Data roaming indicator 0 = False 1 = True                         |
|      38 | Session ID              | Primary Key for AAA, Transaction ID for                           |
|         |                         | PSMS AAA.SESSION\_ID <= 64 Chars                                  |
|         |                         | PSMS.TRANS\_ID <= 50 Chars                                        |
|         |                         | QIS.EVENT\_ID <= 50 chars Used to find the charge code            |
|      39 | Session Type            | For QIS 0 = Charge (only) For PSMS there are two possible values: |
|         |                         | 0 = Charge                                                        |
|         |                         | 1 = Adjustment                                                    |
|         |                         | For *PTX* and *SMS* we can have the following values:             |
|         |                         | *SMSTXT and SMSEMIL*                                              |
|      40 | Bytes In                | Total of incoming bytes associated                                |
|         |                         | this event can also be negative.                                  |
|         |                         | Using this field and the "Bytes Out" field                        |
|         |                         | we can derive the total bytes.                                    |
|      41 | Bytes Out               | Total of outgoing bytes associated with this event contains       |
|         |                         | a signed byte (+-) Using this field and the "Bytes In" field      |
|         |                         | we can derive the total bytes.                                    |
|      42 | Application ID          | QIS = Part ID AAA = AppID PSMS = Short Code                       |
|      43 | Application Type        | QIS = (Download or Subscription) PSMS = (One-Off or Subscription) |
|      44 | Application Name        |                                                                   |
|      45 | Purchase Category Code  | Used by PSMS                                                      |
|      46 | Application Description | Will be used for both QIS and PSMS for QIS it will come from the  |
|         |                         | AE field directly on the record for PSMS it will be a             |
|         |                         | combination of the <short code> <description> <content provider>  |
|         |                         | if it is a "Subscription", "Subscription -" is displayed.         |
|         |                         | If it is a one-off, it is not                                     |
|         |                         | presented in the invoice line item.                               |
|      47 | Content Amount          | Combines Pre-rated usage amount for QIS and PSMS                  |
|      48 | Orig\_trans\_ID         | Orig Trans ID PSMS.TRANS\_ID                                      |
|      49 | Network Flag            | Used by QIS to calculate the charge code.                         |
|         |                         | 0 = not a 1 = is a network application..                          |
|         |                         | Default is 0                                                      |
|      50 | Femto-cell-ringtime     | Will not be needed until after *TOPS* implementation              |
|      51 | Femto-cell-ringpluse    | Will not be needed until after *TOPS* implementation              |
|      52 | LTE Handoff             | This maybe needed after the move to LTE,                          |
|         |                         | so is just used as a placeholder                                  |
|      53 | Market/Sub-market       | The Market and Sub-market for a customer this can also be blank.  |
|         |                         | This field is populated by using a MSID against the MIN\_LR       |
|      54 | Originating IMSI        | The IMSI assigned to the SIM card originating a LTE or eHRPD      |
|         |                         | data session. This can be a routing parameter                     |
|         |                         | for LTE or eHRPD traffic.                                         |
|      55 | Adjustment Reason Code  | The Adjustment Reason Code for a PSMS adjustment                  |
|      56 | External Reference ID   | The External Reference ID for a PSMS record                       |
|      57 | Partner ID              | The Partner ID for PSMS record                                    |
|      58 | Campaign ID             | The Campaign ID for a PSMS record                                 |
|      59 | Initiator Type          | The Initiator Type for PSMS record                                |
|      60 | Initiator ID            | The Initiator ID for PSMS record                                  |
|---------+-------------------------+-------------------------------------------------------------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
** Header
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align c|l|l|l
|---------+---------------+-----------------------------------------+--------------------------------|
| *Field* | *Field Name*  | *Description*                           | *Data Type*                    |
|---------+---------------+-----------------------------------------+--------------------------------|
| 1       | Record Type   | The record type for Header is HR        | 4 character alpha-numeric      |
|         |               |                                         |                                |
| 2       | File Number   | file Identifier A unique identifier     | alpha-numeric <= 24 chars and  |
|         |               | that shows the original file that       | have the pattern IDxxxxxxx..   |
|         |               | the record name in from. (ex. ID044803) | Where xxxx is a number that's  |
|         |               |                                         | no greater then 16 char        |
|         |               |                                         |                                |
| 3       | Source System | Switch identifier (See Switch Name      | alpha-numeric <= 16 characters |
|         |               | and type tab for a complete listing)    |                                |
|         |               | (Possible Voice values include: madi,   |                                |
|         |               | scha etc.) (Data values can include     |                                |
|         |               | aaa1, vali etc.                         |                                |
|         |               |                                         |                                |
| 4       | Start Date    | Start date of file creation {YYYYMMDD}  | Event Date YYYYMMDD            |
|         |               |                                         | 1900 <= YYYY <=9999            |
|         |               |                                         | 01 <= MM <= 12                 |
|         |               |                                         | 01 <= DD <= 31                 |
|         |               |                                         |                                |
| 5       | Start Time    | Start Time for file creation {HHMMSSss} | Switch Time HHMMSSss           |
|         |               |                                         | 00 <= HH <= 23                 |
|         |               |                                         | 00 <= MM <= 59                 |
|         |               |                                         | 00 <= SS <= 59                 |
|         |               |                                         | 00 <= ss <= 59                 |
|---------+---------------+-----------------------------------------+--------------------------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
#+BEGIN_LaTeX
\newpage
#+END_LaTeX
** Trailer
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align c|l|l|l
|---------+---------------+------------------------------------------+-----------------------------------------|
| *Field* | *Field Name*  | *Description*                            | *Data Type*                             |
|---------+---------------+------------------------------------------+-----------------------------------------|
| 1       | Record Type   | The record type for Trailer is TR        | 4 character alpha-numeric               |
|         |               |                                          |                                         |
| 2       | File Number   | File Identifier A unique identifier      | alpha-numeric <= 24 chars and have the  |
|         |               | that shows the original file that        | pattern IDxxxxxxx.. Where xxxx is       |
|         |               | the record came in from. (ex. ID044803)  | a number that's no greater then 16 char |
|         |               |                                          |                                         |
| 3       | Source System | Switch identifier (See Switch Name       | alpha-numeric <= 16 chars               |
|         |               | and type tab for a complete listing)     |                                         |
|         |               | (Data values can include aaa1, vali etc. |                                         |
|         |               |                                          |                                         |
| 4       | End Date      | End date of file creation {YYYYMMDD}     | Event Date YYYYMMDD                     |
|         |               |                                          | 1900 <= YYYY <=9999                     |
|         |               |                                          | 01 <= MM <= 12                          |
|         |               |                                          | 01 <= DD <= 31                          |
|         |               |                                          |                                         |
| 5       | End Time      | End Time of file creation {HHMMSSss}     | Switch Time HHMMSSss                    |
|         |               |                                          | 00 <= HH <= 23                          |
|         |               |                                          | 00 <= MM <= 59                          |
|         |               |                                          | 00 <= SS <= 59                          |
|         |               |                                          | 00 <= ss <= 59                          |
|         |               |                                          |                                         |
| 6       | Total Records | Total number of records in this file     | numeric <= 100000000                    |
|         |               |                                          | (Including Header and trailers)         |
|---------+---------------+------------------------------------------+-----------------------------------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
** Service Feature Codes
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX
#+ATTR_LaTeX: :environment longtable
|------------------------------------+--------|
| *Description*                      | *Code* |
|------------------------------------+--------|
| (NTI Only) - Automatic Roaming     | ARM    |
| Call Delivery Interconnect         | CDLX   |
| Call Forward Immediate             | CFW    |
| Call Forward Busy                  | CFB    |
| Call Forward No Answer Transfer    | CFWTRN |
| (NTI Only) - Calls to/from hotline | HT     |
| (NTI Only) -Inter system hand-off  | ISH    |
| Operator assisted call             | OPA    |
| (NTI Only) - Vertical feature flag | VFF    |
| Voice-mail delivery                | VMD    |
| Voice-mail retrieval               | VMR    |
| Caller ID Restriction (ID block)   | CIR    |
|------------------------------------+--------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
** Drop Reason Codes

      /See the Drop Reasons Code spreadsheet/


#+BEGIN_LaTeX
\newpage
#+END_LaTeX
* CIBER File Format
** Ciber Record Types
   The *Ciber* standard defines the following record Types:
      -  *01* Header
      -  *22* Voice (main Record type)
      -  *32* Data
      -  *52* One time charge
      -  *98* Trailer

*** CIBER 01 Record
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|--------------------------------+------------+---------------|
| *Field*                        | *Position* | *Description* |
|--------------------------------+------------+---------------|
| Record Type                    |        1-2 |               |
| Batch Creation Date            |        3-8 |               |
| Batch Sequence Number          |       9-11 |               |
| Sending Carrier SID/BID        |      12-16 |               |
| Receiving Carrier SID/BID      |      17-21 |               |
| CIBER Record Release Number    |      22-23 |               |
| Original/Return Indicator      |      24-24 |               |
| Currency Type                  |      25-26 |               |
| Settlement Period              |      27-32 |               |
| Clearinghouse ID               |      33-33 |               |
| CIBER Batch Reject Reason Code |      34-35 |               |
| Batch Contents                 |      36-36 |               |
| Local Carrier Reserved         |      37-56 |               |
| System Reserved Filler         |     57-200 |               |
|--------------------------------+------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** CIBER 22 Record
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|------------------------------------------+------------+---------------|
| *FIELD NAME*                             | *POSITION* | *Description* |
|------------------------------------------+------------+---------------|
| Record Type                              |        1-2 |               |
| Return Code                              |        3-3 |               |
| CIBER Record Return Reason Code          |        4-5 |               |
| Invalid Field Identifier                 |        6-8 |               |
| Home Carrier SID/BID                     |       9-13 |               |
| MSID Indicator                           |      14-14 |               |
| *MSID*                                   |      15-29 |               |
| MSISDN/MDN Length                        |      30-31 |               |
| *MSISDN/MDN*                             |      32-46 |               |
| *ESN/UIMID/IMEI/MEID Indicator*          |      47-47 | 0 = NA        |
|                                          |            | 1 = ESN       |
|                                          |            | 2 = IMEI      |
|                                          |            | 3 = MEID      |
|                                          |            | 4 = pESN      |
| *ESN/UIMID/IMEI/MEID*                    |      48-66 |               |
| *Serving Carrier SID/BID*                |      67-71 |               |
| *Total Charges and Taxes*                |      72-81 |               |
| System Reserved Filler                   |      82-82 |               |
| *Total State/Province Taxes*             |      83-92 |               |
| System Reserved Filler                   |      93-93 |               |
| *Total Local/Other Taxes*                |     94-103 |               |
| System Reserved Filler                   |    104-104 |               |
| *Call Date*                              |    105-110 |               |
| *Call Direction*                         |    111-111 |               |
| Call Completion Indicator                |    112-112 |               |
| Call Termination Indicator               |    113-113 |               |
| Caller ID Length                         |    114-115 |               |
| Caller ID                                |    116-130 |               |
| Called Number Length                     |    131-132 |               |
| *Called Number Digits*                   |    133-147 |               |
| Location Routing Number Length Indicator |    148-149 |               |
| Location Routing Number                  |    150-164 |               |
| TLDN Length                              |    165-166 |               |
| TLDN                                     |    167-181 |               |
| Currency Type                            |    182-183 |               |
| System Reserved Filler                   |    184-185 |               |
| Original Batch Sequence Number           |    186-188 |               |
| Initial Cell Site                        |    189-199 |               |
| Time Zone Indicator                      |    200-201 |               |
| Daylight Savings Indicator               |    202-202 |               |
| Message Accounting Digits                |    203-212 |               |
| Air Connect Time                         |    213-218 |               |
| Air Chargeable Time                      |    219-224 |               |
| Air Elapsed Time                         |    225-230 |               |
| Air Rate Period                          |    231-232 |               |
| Air Multi-Rate Period                    |    233-233 |               |
| *Air Charge*                             |    234-243 |               |
| System Reserved Filler                   |    244-244 |               |
| Other Charge No. 1 Indicator             |    245-246 |               |
| *Other Charge No. 1*                     |    247-256 |               |
| System Reserved Filler                   |    257-257 |               |
| System Reserved Filler                   |    258-270 |               |
| Printed Call                             |    271-285 |               |
| Fraud Indicator                          |    286-287 |               |
| Fraud Sub-Indicator                      |    288-288 |               |
| *Special Features Used*                  |    289-293 |               |
| *Called Place*                           |    294-303 |               |
| *Called State/Province*                  |    304-305 |               |
| *Called Country*                         |    306-308 |               |
| *Serving Place*                          |    309-318 |               |
| *Serving State/Province*                 |    319-320 |               |
| *Serving Country*                        |    321-323 |               |
| Toll Connect Time                        |    324-329 |               |
| Toll Chargeable Time                     |    330-335 |               |
| Toll Elapsed Time                        |    336-341 |               |
| Toll Tariff Descriptor                   |    342-343 |               |
| Toll Rate Period                         |    344-345 |               |
| Toll Multi-Rate Period                   |    346-346 |               |
| Toll Rate Class                          |    347-347 |               |
| Toll Rating Point Length Indicator       |    348-349 |               |
| Toll Rating Point                        |    350-359 |               |
| *Toll Charge*                            |    360-369 |               |
| System Reserved Filler                   |    370-370 |               |
| *Toll State/Province Taxes*              |    371-380 |               |
| System Reserved Filler                   |    381-381 |               |
| *Toll Local Taxes*                       |    382-391 |               |
| System Reserved Filler                   |    392-392 |               |
| Toll Network Carrier ID                  |    393-397 |               |
| Local Carrier Reserved                   |    398-472 |               |
| System Reserved Filler                   |    473-547 |               |
|------------------------------------------+------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
*** CIBER 32 Record
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|------------------------------------------+------------+---------------|
| *Field*                                  | *Position* | *Description* |
|------------------------------------------+------------+---------------|
| Record Type                              |        1-2 |               |
| Return Code                              |        3-3 |               |
| CIBER Record Return Reason Code          |        4-5 |               |
| Invalid Field Identifier                 |        6-8 |               |
| Home Carrier SID/BID                     |       9-13 |               |
| MSID Indicator                           |      14-14 |               |
| MSID                                     |      15-29 |               |
| MSISDN/MDN Length                        |      30-31 |               |
| MSISDN/MDN                               |      32-46 |               |
| ESN/UIMID/IMEI/MEID Indicator            |      47-47 |               |
| ESN/UIMID/IMEI/MEID                      |      48-66 |               |
| Serving Carrier SID/BID                  |      67-71 |               |
| Total Charges and Taxes                  |      72-81 |               |
| System Reserved Filler                   |      82-82 |               |
| Total State/Province Taxes               |      83-92 |               |
| System Reserved Filler                   |      93-93 |               |
| Total Local Taxes                        |     94-103 |               |
| System Reserved Filler                   |    104-104 |               |
| Call Date                                |    105-110 |               |
| Call Direction                           |    111-111 |               |
| Call Completion Indicator                |    112-112 |               |
| Call Termination Indicator               |    113-113 |               |
| Caller ID Length                         |    114-115 |               |
| Caller ID                                |    116-130 |               |
| Called Number Length                     |    131-132 |               |
| Called Number Digits                     |    133-147 |               |
| Location Routing Number Length Indicator |    148-149 |               |
| Location Routing Number                  |    150-164 |               |
| TLDN Length                              |    165-166 |               |
| TLDN                                     |    167-181 |               |
| Currency Type                            |    182-183 |               |
| System Reserved Filler                   |    184-185 |               |
| Original Batch Sequence Number           |    186-188 |               |
| Initial Cell Site                        |    189-199 |               |
| Time Zone Indicator                      |    200-201 |               |
| Daylight Savings Indicator               |    202-202 |               |
| Message Accounting Digits                |    203-212 |               |
| Charge No. 1 Indicator                   |    213-214 |               |
| Charge No. 1 Connect Time                |    215-220 |               |
| Charge No. 1 Chargeable Time             |    221-226 |               |
| Charge No. 1 Elapsed Time                |    227-232 |               |
| Charge No. 1 Rate Period                 |    233-234 |               |
| Charge No. 1 Multi-Rate Period           |    235-235 |               |
| Charge No. 1 Tax/Surcharge Indicator     |    236-236 |               |
| Charge No. 1                             |    237-246 |               |
| System Reserved Filler                   |    247-247 |               |
| Charge No. 2 Indicator                   |    248-249 |               |
| Charge No. 2 Connect Time                |    250-255 |               |
| Charge No. 2 Chargeable Time             |    256-261 |               |
| Charge No. 2 Elapsed TIme                |    262-267 |               |
| Charge No. 2 Rate Period                 |    268-269 |               |
| Charge No. 2 Multi-Rate Period           |    270-270 |               |
| Charge No. 2 Tax/Surcharge Indicator     |    271-271 |               |
| Charge No. 2                             |    272-281 |               |
| System Reserved Filler                   |    282-282 |               |
| Charge No. 3 Indicator                   |    283-284 |               |
| Charge No. 3 Connect Time                |    285-290 |               |
| Charge No. 3 Chargeable Time             |    291-296 |               |
| Charge No. 3 Elapsed Time                |    297-302 |               |
| Charge No. 3 Rate Period                 |    303-304 |               |
| Charge No. 3 Multi-Rate Period           |    305-305 |               |
| Charge No. 3 Tax/Surcharge Indicator     |    306-306 |               |
| Charge No. 3                             |    307-316 |               |
| System Reserved Filler                   |    317-317 |               |
| Charge No. 4 Indicator                   |    318-319 |               |
| Charge No. 4 Connect Time                |    320-325 |               |
| Charge No. 4 Chargeable Time             |    326-331 |               |
| Charge No. 4 Elapsed Time                |    332-337 |               |
| Charge No. 4 Rate Period                 |    338-339 |               |
| Charge No. 4 Multi-Rate Period           |    340-340 |               |
| Charge No. 4 Tax/Surcharge Indicator     |    341-341 |               |
| Charge No. 4                             |    342-351 |               |
| System Reserved Filler                   |    352-352 |               |
| Blank Fill Serving Place                 |    353-362 |               |
| Serving State/Province                   |    363-364 |               |
| Serving Country                          |    365-367 |               |
| Special Features Used                    |    368-372 |               |
| Other Charge No. 1 Indicator             |    373-374 |               |
| Other Charge No. 1                       |    375-384 |               |
| System Reserved Filler                   |    385-385 |               |
| System Reserved Filler                   |    386-398 |               |
| Printed Call                             |    399-413 |               |
| Fraud Indicator                          |    414-415 |               |
| Fraud Sub-Indicator                      |    416-416 |               |
| Features Used After Handoff Indicator    |    417-417 |               |
| Local Carrier Reserved                   |    418-492 |               |
| System Reserved Filler                   |    493-567 |               |
|------------------------------------------+------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** CIBER 52 Record
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|---------------------------------+------------+---------------|
| *FIELD*                         | *POSITION* | *Description* |
|---------------------------------+------------+---------------|
| Return Code                     |        3-3 |               |
| CIBER Record Return Reason Code |        4-5 |               |
| Invalid Field Identifier        |        6-8 |               |
| Home Carrier SID/BID            |       9-13 |               |
| MSID Indicator                  |      14-14 |               |
| *MSID*                          |      15-29 |               |
| MSISDN/MDN Length               |      30-31 |               |
| MSISDN/MDN                      |      32-46 |               |
| ESN/UIMID/IMEI/MEID Indicator   |      47-47 |               |
| ESN/UIMID/IMEI/MEID             |      48-66 |               |
| Serving Carrier SID/BID         |      67-71 |               |
| *Total Charges and Taxes*       |      72-81 |               |
| System Reserved Filler          |      82-82 |               |
| *Total State/Province Taxes*    |      83-92 |               |
| System Reserved Filler          |      93-93 |               |
| *Total Local Taxes*             |     94-103 |               |
| System Reserved Filler          |    104-104 |               |
| *OCC Charge/Start Date*         |    105-110 |               |
| Connect Time                    |    111-116 |               |
| OCC End Date                    |    117-122 |               |
| OCC Interval Indicator          |    124-133 |               |
| *OCC Charge*                    |    134-134 |               |
| System Reserved Filler          |    135-159 |               |
| OCC Description Currency Type   |    160-161 |               |
| System Reserved Filler          |    123-123 |               |
| Original Batch Sequence Number  |    164-166 |               |
| Initial Cell Site               |    167-177 |               |
| Time Zone Indicator             |    178-179 |               |
| Daylight Savings Indicator      |    180-180 |               |
| Message Accounting Digits       |    181-190 |               |
| Record Use Indicator            |    191-191 |               |
| Serving Place                   |    192-201 |               |
| Serving State/Province          |    202-203 |               |
| Serving Country                 |    204-206 |               |
| Other Charge No. 1 Indicator    |    207-208 |               |
| Other Charge No. 1              |    209-218 |               |
| System Reserved Filler          |    219-219 |               |
| System Reserved Filler          |    220-232 |               |
| Fraud Indicator                 |    233-234 |               |
| Fraud Sub-Indicator             |    235-235 |               |
| Record Create Date              |    236-241 |               |
| System Reserved Filler          |    220-232 |               |
| Fraud Indicator                 |    233-234 |               |
| Fraud Sub-Indicator             |    235-235 |               |
| Record Create Date              |    236-241 |               |
|---------------------------------+------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** CIBER 98 Record
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|----------------------------------+------------+---------------|
| *FIELD*                          | *POSITION* | *Description* |
|----------------------------------+------------+---------------|
| Record Type                      |        1-2 |               |
| Batch Creation Date              |        3-8 |               |
| Batch Sequence Number            |       9-11 |               |
| Sending Carrier SID/BID          |      12-16 |               |
| Receiving Carrier SID/BID        |      17-21 |               |
| *Total Number Records in Batch*  |      22-25 |               |
| *Batch Total Charges & Taxes*    |      26-37 |               |
| Settlement Period                |      38-43 |               |
| Clearinghouse ID                 |      44-44 |               |
| System Reserved Filler           |      45-49 |               |
| Original Total Number of Records |      50-53 |               |
| *Original Total Charges & Taxes* |      54-65 |               |
| System Reserved Filler           |      66-73 |               |
| Currency Type                    |      74-75 |               |
| Local Carrier Reserved           |      76-95 |               |
| System Reserved Filler           |     96-200 |               |
|----------------------------------+------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

** Interfaces
*** Roamex/Fraudex
#+ATTR_LaTeX: width=20cm
   [[file:Pictures/NDC.png]]


    -  *Business Process -* Mediation
    -  *Type -* Batch
    -  *Category -* Batch Redesign
    -  *Service -* On all *Nortel* switches switch records are
            copied to *mad1rom1*. Then through out the day *Syniverse*
            comes in and finds all the roaming records and runs it
            against there *Fraudx* application to find evidence of
            fraud.
    -  *Thoughts and other random musings* \\ For the most part the
            process is a black box and everything is handled by
            *Syniverse*. The file that is sent is raw switch data and at
            this time only *NTI (Nortel)* is supported. For all NDC
            processes the source, compilation and processing occur on
            the NDC machines where the base language is C.
    -  *Questions*

       -  [ ] What are the names of the NDC machines.
       -  [ ] Where is the source code kept.

    -  *Contacts*
       -  Roberto Amezcua

*** OutCollects
     [[file:Pictures/outcoll.png]]
    -  *Business Process -* Mediation
       -  *Type -* Batch
       -  *Category -* Batch Redesign
       -  *Service -* Send OutCollect data to *Syniverse*.
       -  *Process Flow*
          1. Switch records are passed through the billing system and
               any record that does not belong to a customer gets placed
               into a file.
          2. Twice a day the /Ciber\_Create/ job is run which takes
               these files and converts them to CIBER records.
          3. Five times a day *NDC* starts a job which sends these
               files to *Syniverse*.
          4. It also when it looks for CIBER files coming back from
               *Syniverse* of our customers who are roaming on other
               networks.

       -  *Thoughts and other random musings* \\ A pretty simple batch
            interface it is here where we can use the new batch
            standards to make sure the transfer is complete.
       -  *Contacts*

          -  Kyle Matte
          -  Roberto Amezcua

    - CIBERNET - Specification/Reference
      [[https://www.one1clear.net/mxp/Login.asp]]
      -  Mobile-X Code: USA-MPS-0001
      -  Login: Skeup/SyFAGh

      #+BEGIN_EXAMPLE
          <\\chil-data1\Share\Common\TOPS\outcollects>
      #+END_EXAMPLE
