#+STARTUP: overview
#+OPTIONS: d:nil
#+OPTIONS: toc:nil
#+TAGS: Presentation(p)  noexport(n) Documentation(d) taskjuggler_project(t) taskjuggler_resource(r) 
#+DRAWERS: PICTURE CLOSET
#+PROPERTY: allocate_ALL dev doc test
#+STARTUP: hidestars hideblocks
#+LaTeX_CLASS_OPTIONS: [12pt,twoside]
#+LATEX_HEADER: \usepackage{lscape} 
#+LATEX_HEADER: \usepackage{fancyhdr} 
#+LATEX_HEADER: \usepackage{multirow}
#+LATEX_HEADER: \usepackage{multicol}
#+BEGIN_LaTeX
\pagenumbering{gobble}
#+END_LaTeX 
#+TITLE: The Usage Bible
#+ATTR_LaTeX: :width 16cm
file:Pictures/Andrejevi1.jpg
#+Author: David Balchen
\newpage 
#+ATTR_LaTeX: :width 13cm
[[file:Pictures/postal5.png]]
#+BEGIN_LaTeX
%\addtolength{\oddsidemargin}{-.25in}
\addtolength{\oddsidemargin}{0in}
\addtolength{\evensidemargin}{-01.25in}
\addtolength{\textwidth}{1.4in}
\addtolength{\topmargin}{-1.25in}
\addtolength{\textheight}{2.45in}
\setcounter{tocdepth}{3}
\vspace*{1cm} 
\newpage
\pagenumbering{roman}
\setcounter{tocdepth}{2}
\pagestyle{fancy}
\fancyhf[ROF,LEF]{\bf\thepage}
\fancyhf[C]{}

#+END_LaTeX
:CLOSET:
 : Hours #+PROPERTY: Effort_ALL 0.125 0.25 0.375 0.50 0.625 .75  0.875 1
 : Days  #+PROPERTY: Effort_ALL 1d 2d 3d 4d 5d 6d 7d 8d 9d
 : weeks #+PROPERTY: Effort_ALL 1w 2w 3w 4w 5w 6w 7w 8w 9w
 : Add a Picture
 :   #+ATTR_LaTeX: width=13cm
 :   [[file:example_picture.png]]
 : New Page
 : \newpage
:END:
#+TOC: headlines 2
#+BEGIN_LaTeX
 \newpage
\pagenumbering{arabic}
#+END_LaTeX 
* Usage Overview
   Usage is a broad term used to refer to network event records that are used for rating and charging our customers. In telephony we tend to think of usage
   in two ways, *Voice* or *Data*.\\
** Usage Record Formats
   Usage records come from the switch in a verity of formats depending on the equipment used.
#+BEGIN_LaTeX
\mbox{} \\
\mbox{} \\
#+END_LaTeX 
*Voice*\\
   Voice usage can come in one of two formats:
   1. *Alcatel Lucent (APLX)* - The *Alcatel Lucent APLX* switch record
      are found mostly in the Maine market. 
   2. *Nortel (NTI)* - The *NORTEL NTI* switch record is the most common
      voice record format. 
   3. *CIBER* - For /InCollect and OutCollect/ processing.
#+BEGIN_LaTeX
\mbox{} \\
#+END_LaTeX 
*Data*\\
   For data there is a format for each type:
   1. *SMSC* - The *SMS* record type comes in the *Motorola* format.
   2. *AAA Server* - 
      - *PGW* - P-Gateway *LTE* data usage
      - *ECS* - ECS *3G and lower* data usage.
      - *AAA* - Raw AAA usage found on the CallDump only.
      - *TAS* - /Volte/ Voice over *LTE*.
   3. *VALI* - /Premium SMS (Valista)/ pre-rated records.
   4. *GSM Roaming* - Voice and data records from our customers who are
      roaming in Europe and other *GSM* countries.
   5. *MMSC* - Used for both pictures and picture messaging text only
      (treated as an *SMS* message in the system). 
   6. *TAP* - Used for *Incollect/Outcollect 4G* processing.
#+BEGIN_LaTeX
\newpage
#+END_LaTeX
** Network Elements
   The list below is the name of *switches/network elements* that produce usage and where that usage is stored in *TOPS*.
   Except for the *TAP* files, all are readable as either *CIBER* of *UFF*.
#+BEGIN_LaTeX
\mbox{} \\
#+END_LaTeX 
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|-----------+------------+-----------------------------------------------------------------------|
| *Element* | *New Host* | *New Directory*                                                       |
|-----------+------------+-----------------------------------------------------------------------|
| APPL      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/APPL      |
| ASHE      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/ASHE      |
| CDP       | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/CONT/CDP       |
| CDR2      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/CDR2      |
| CIB_IC    | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/switch/DIRI    |
| CIB_OCR   | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/switch/SYNR    |
| CLIN      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/CLIN      |
| COLU      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/COLU      |
| CONG      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/CONG      |
| ECS       | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/AAA/AAA1       |
| EURE      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/EURE      |
| GRAN      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/GRAN      |
| GREE      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/GREE      |
| GSM_IR    | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/GSMI/GSMS      |
| GSM_IR    | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/GSMI/GSMV      |
| JOHN      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/JOHN      |
| JOPL      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/JOPL      |
| KNOX      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/KNOX      |
| LLYN      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/APLX/LLYN      |
| LROE      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/APLX/LROE      |
| LTE       | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/PGW/PGW1       |
| LTE       | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/GSMI/GSMD      |
| MADI      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/MADI      |
| MEDF      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI2/MEDF      |
| MMSC      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/SMS_MMS/PMG1   |
| MMSC      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/SMS_MMS/PTX1   |
| MORG      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/APLX/MORG      |
| NEWB      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI2/NEWB      |
| OKLA      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI2/OKLA      |
| OMAH      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI1/OMAH      |
| OWAS      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI2/OWAS      |
| PEO2      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI2/PEO2      |
| ROC2      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI2/ROC2      |
| SALI      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI2/SALI      |
| SMS_NSN   | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/SMS_MMS/MOT    |
| SMS_NSN   | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/GSMI/GSMT      |
| TAS       | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/TAS/TAS1       |
| VALISTA   | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/CONT/VALI      |
| YAKI      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/NTI2/YAKI      |
| TAP_IN    | kpr01bchl4 | /pkgbl04/inf/prdsys/prodwrk4/var/usc/projs/smm/DATA/TAPIN             |
| TAP_OUT   | kpr01bchl4 | /pkgbl04/inf/prdsys/prodwrk4/var/usc/projs/smm/DATA/TAPOUT            |
| APRM      | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/switch/DATAIN  |
| CIB_IC    | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/switch/DATACBR |
| CIB_IC    | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/up/physical/switch/DIRI    |
| CIB_ICR   | kpr01bchl2 | /pkgbl02/inf/prdsys/prodwrk2/var/usc/projs/apr/interfaces/output      |
| SGW/DISP  | kpr01bchl3 | /pkgbl03/inf/prdsys/operaprm/var/usc/LSN/input2                       |
| GSM_IR    | kpr01bchl4 | /pkgbl04/inf/prdsys/prodwrk4/var/usc/projs/smm/DATA/TAPIN             |
| RAP_IN    | kpr01bchl4 | /pkgbl04/inf/prdsys/prodwrk4/var/usc/projs/smm/DATA/RAPIN             |
| RAP_OUT   | kpr01bchl4 | /pkgbl04/inf/prdsys/prodwrk4/var/usc/projs/smm/DATA/RAPOUT            |
|-----------+------------+-----------------------------------------------------------------------|

#+BEGIN_LaTeX
\normalsize
\newpage
#+END_LaTeX
** Pre-Pay and Data Roaming

      In addition to *Post-Pay* we also handle *Pre-Pay* which follows a
      different flow using the diameter interface. The *Diameter
      interface* is described as follows:

      -  *Diameter* is a *AAA* protocol, a type of computer networking
         protocol for authentication, authorization and accounting *(AAA)*. 
         *Diameter* controls communication
         between the authenticator (Secure Ticket Authority, STA) and
         any network entity requesting authentication. *Diameter Applications* 
         extend the base protocol by adding new commands
         and/or attributes, such as those for use of the Extensible
         Authentication Protocol (*EAP*).
** Carrier Code and Names
   SQL Statement which produced this data:
   : select distinct carr_name, carr_cd from prm_app.PRM_REP_CARR_INFO
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l
|------------------------------+--------------|
| CARRIER_NAME                 | CARRIER_CODE |
|------------------------------+--------------|
| AT&T Mobility (USAAT)        | USAAT        |
| AT&T Mobility (USACG)        | USACG        |
| AT&T Mobility (USABS)        | USABS        |
| Pioneer Cellular (USAPI)     | USAPI        |
| T-Mobile (USATM)             | USATM        |
| Nex-Tech Wireless (USA6G)    | USA6G        |
| AT&T Mobility (USAPB)        | USAPB        |
| AT&T Mobility (USAMF)        | USAMF        |
| Sprint (USASG)               | USASG        |
| T-Mobile (USAW6)             | USAW6        |
| Sprint (USASP)               | USASP        |
| Verizon (USAVZ)              | USAVZ        |
| Vodafone Netherlands (NLDLT) | NLDLT        |
| AT&T Mobility (USACC)        | USACC        |
|------------------------------+--------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
** Usage Time Zones
|--------------+-----------------|
| *Usage Type* | *TimeZone*      |
|--------------+-----------------|
| AAA          | GMT             |
| PGW/LTE      | GMT             |
| PMG/PTX      | GMT             |
| TAS          | GMT             |
| MOT/ALU      | EST             |
| VoLTE        | Switch Location |
| Voice        | Switch Location |
| CIBER        | Switch Location |
| GSMD/V/S     | GMT             |
|--------------+-----------------|
#+BEGIN_LaTeX
\newpage
#+END_LaTeX
** Duplicate Record Keys
   Columns used to detect if a record is a duplicate.
#+BEGIN_LaTeX
\small
#+END_LaTeX
|------------------------+-------------------+-----------------------|
| *MMS*                  | *SMS*             | *Content*             |
|------------------------+-------------------+-----------------------|
| 1. Event type ID       | 1. Event type ID  | 1. Event type ID      |
| 2. Start time          | 2. Start time     | 2. Start time         |
| 3. Resource value      | 3. Resource value | 3. Resource value     |
| 4. Call direction      | 4. Call direction | 4. Content session ID |
| 5. Called number       | 5. Called number  |                       |
| 6. Calling number      | 6. Calling number |                       |
|                        |                   |                       |
|------------------------+-------------------+-----------------------|
| *Voice*                | *Data*            | *LTE*                 |
|------------------------+-------------------+-----------------------|
| 1. Event type ID       | 1. Event type ID  | 1. Event type ID      |
| 2. Start time          | 2. Start time     | 2. Start time         |
| 3. Resource value      | 3. Resource value | 3. Resource value     |
| 4. Call direction      | 4. Call direction | 4. Call direction     |
| 5. Surcharge indicator | 5. Call source    | 5. Call source        |
| 6. Air elapsed time    |                   |                       |
| 7. Calling number      |                   |                       |
|------------------------+-------------------+-----------------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX


** US Territories
      These calls are identified as international but are charged
      domestic rates.
|--------------+-----------+------------------+------------------------------|
| Country Code | Area Code | ISO Country Code | Description                  |
|--------------+-----------+------------------+------------------------------|
|            1 |       340 | VIR              | United States Virgin Islands |
|            1 |       670 | MNP              | Northern Mariana Islands     |
|            1 |       671 | GUM              | Guam                         |
|            1 |       684 | ASM              | American Samoa               |
|            1 |   787/939 | PRI              | Puerto Rico                  |
|--------------+-----------+------------------+------------------------------|

#+BEGIN_LaTeX
\newpage 
#+END_LaTeX
#+BEGIN_LaTeX
\begin{landscape}  
#+END_LaTeX
#+ATTR_LaTeX: width=20cm
:PICTURE:
digraph BI {

graph [splines=true nodesep=0.8 size=8.5,11 compress=true overlap=false style=bold];

node [shape=folder];"Database";"CallDump";"APRM";
node [shape=house];"Syniverse/TNS";"Business";"EPC";"MFT";

node [shape=triangle];"Switch";
node [shape=circle];"A&F";

"Switch" -> "Intec" [label = "(a)"];
"Switch" -> "SCP" [label = "(i)"];
"Syniverse/TNS" -> "Mediation" [label = "(b)"];
"Syniverse/TNS" -> "Mediation" [label = "(j)"];
"Intec" -> "CallDump" [label = "(n)"];
"Intec" -> "A&F" [label = "(d)"];	     
"Intec" -> "Syniverse" [label = "(c)"];
"Database" -> "Mediation" [label = "(f)"];	
"A&F" -> "F2E" [label = "(e)"];
"F2E" -> "Turbo Charging" [label = "(e)"];
"Turbo Charging" -> "Database" [label = "(d)"];
"Turbo Charging" -> "Mediation" [label = "(c)"];
"Turbo Charging" -> "MFT" [label = "(j)"];
"Turbo Charging" -> "APRM" [label = "(+)"];
"Database" -> "Turbo Charging" [label = "(e)"];
"MFT" -> "Turbo Charging" [label = "(o)"];
"SCP" -> "Turbo Charging" [label = "(i)"];
"EPC" -> "Database" [label = "(e)"];
"Business" -> "Database" [label = "(i)"];
"APRM" -> "ARCM"
"ARCM" -> "ARPM"
"ARCM" -> "Mediation"

subgraph cluster_2 {
	
"Switch";
"MFT";
"SCP";
color="#FFFFFF";
label = " ";

}

subgraph cluster_3 {
	"F2E";
	"Turbo Charging";
	"A&F";
	"APRM";
	"ARCM";
	label = "TOPS";
	
	subgraph cluster_1 {
		"Database";
		"EPC";
		color="#FFFFFF";
		label = " ";		
	}
	
}

}
:END:

   [[file:Pictures/uf.png]]

#+BEGIN_LaTeX
\end{landscape} 
\newpage
#+END_LaTeX

#+BEGIN_LaTeX
\begin{landscape}  
#+END_LaTeX

#+ATTR_LaTeX: width=23cm
    [[file:Pictures/roamingPrePay.png]]
#+BEGIN_LaTeX
\end{landscape} 
\newpage
#+END_LaTeX
* Voice Overview
   One major undertaking in the transition to *TOPS* is moving most of the voice mediation to the *INTEC* platform. To help facilitate this move, the current rules system *(RBMS)* was studied and documented. The following provides a brief overview of the processes used.
** Call Types
    1. *M-M* - Mobile to Mobile
    2. *M-L* - Mobile to Land Line
    3. *L-M* - Land Line to Mobile
    4. *L-L* - Land Line to Land Line
    The call records can come in four possible states.
    1. Mobile Terminating (Incoming)
    2. Mobile Originating (Outgoing)
    3. *NTI ONLY*
       - *Both*  \newline *(NTI Mobile to Mobile)* in which for every voice event, two records are created, a *Mobile Originated* and *Mobile Terminated* record. For *APLX* this is taken care of automatically. In the case of an *NTI* switch, depending on the call scenario, it is up to the mediation platform to create one if needed.
       - *Neither* \newline (per example *L-L* )
#+ATTR_LaTeX: :width 11cm
[[file:Pictures/white-charles-harvest_talk.jpg]]
#+BEGIN_LaTeX
\newpage 
\begin{landscape}  
#+END_LaTeX
** Incoming - Mobile Terminated
         An *Incoming* call is a /mobile terminated/ call where one of
         our customers receives a call from some caller to a *USCC*
         switch.\\
         *The diagram below shows the data flow for an incoming
         call:* \\
 #+ATTR_LaTeX: width=20cm
   [[file:Pictures/incoming.png]]

#+BEGIN_LaTeX
\newpage 
#+END_LaTeX
** Outgoing - Mobile Originated
    An *outgoing* call is a /mobile originating/ call from a *USCC* customer in which the following can occur.\\
    *The diagram below shows the data flow for an outgoing call:*
\\
#+ATTR_LaTeX: width=23cm
    [[file:Pictures/outgoing.png]]

#+BEGIN_LaTeX
\end{landscape} 
\newpage
#+END_LaTeX

* Unified File Format (UFF)
   In *TOPs* system all *CDRs*, excluding *InCollect/OutCollect TAP or CIBER*,
   will be reformatted into a /Unified File Format/ (*UFF*). This format
   is a standard *Unix/ASCII* formatted *CSV* file using '|'
   *(pipe)* as the delimiter.
** UFF File Record Format
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align c|l|l
|---------+-------------------------+-------------------------------------------------------------------|
| *Field* | *Field Name*            | *Description*                                                     |
|---------+-------------------------+-------------------------------------------------------------------|
|       1 | Record Type             | HR - Header Record                                                |
|         |                         | DR - Data Record                                                  |
|         |                         | TR - Trailer Record                                               |
|       2 | Service Type            | Initial record type of Usage Record *MOT, PTX, ALU, QIS*,         |
|         |                         | *AAA, TPC, APLX, NTI, PMG, PGW*                                   |
|       3 | Record sequence Number  | A unique numeric identifier for the record.                       |
|       4 | File Number             | A unique identifier that shows the original file                  |
|         |                         | that the record came in from. /(ex. ID044803/)                    |
|       5 | Record Disposition      | The disposition shows the destination of the record               |
|         |                         | in the Mediation process.                                         |
|         |                         | 0 = Rated                                                         |
|         |                         | 1 = Dropped                                                       |
|         |                         | 2 = Error                                                         |
|       6 | Record Code             | The Drop or Error code. The drop and error codes will be defined  |
|         |                         | using present day *AMDOCS* codes as a template. (presently a 3    |
|         |                         | digit integer but will bump to 5 for extra growth)                |
|       7 | Source System           | Switch identifier (See Switch Name and type tab for a complete    |
|         |                         | listing) (Possible Voice values include:                          |
|         |                         | madi, scha etc.) (Data values can include aaa1, vali etc.         |
|       8 | Start Date              | Start date for this event {YYYYMMDD}                              |
|       9 | Start Time              | Start Time for this event {HHMMSSss}                              |
|      10 | Start Time Zone         | Offset in seconds from *GMT*                                      |
|      11 | Home Sid                | Home Switch ID                                                    |
|      12 | Serve SID               | Serving Switch ID                                                 |
|      13 | Originating Cell Trunk  | Initial cell trunk                                                |
|      14 | Terminating Cell Trunk  | Termination Cell trunk                                            |
|      15 | BSID                    | Broadcast Station ID                                              |
|      16 | Carrier ID              | The carrier that handled the events identification symbol.        |
|         |                         | Mostly USCC but may contain others especially in                  |
|         |                         | data roaming situations.                                          |
|      17 | Protocol                | *EVDO, LTE, CDMA*                                                 |
|      18 | Event Type              | *QIS* event type used for reporting and drop logic                |
|      19 | Call Direction          | One of two types:                                                 |
|         |                         | *Mobile Originating (MO)* or *Mobile Terminating (MT)*.           |
|      20 | Originating MSID        | 10-Digit Mobile Identification Number 16 digits for               |
|         |                         | possible future use/Blanks if mobile terminated                   |
|      21 | Identity                | MEID/ESN                                                          |
|      22 | Originating MDN         | In a Mobile Originating call It's the originating callers         |
|         |                         | phone number.                                                     |
|      23 | Originating Address     | IP or Email                                                       |
|      24 | Terminating MSID        | Called MSID this is on Mobile to Mobile records only.             |
|      25 | Terminating Number      | Normalized number /(example 6085551212 instead of 411/            |
|      26 | Dialed Digits           | The untranslated dialed number /(e.g. 441 instead of 555-1212)/   |
|      27 | Terminating Address     | IP Address/Email Name Client IP for *PMG*                         |
|      28 | Termination Code        | *SMS.CALL_TERMINATION_CODE*                                       |
|      29 | Service Feature         | MPS Service feature codes (See the list below)                    |
|      30 | Call Forwarding Ind     | If the call has been forwarded than true, false otherwise.        |
|         |                         | 0 = False                                                         |
|         |                         | 1 = True                                                          |
|      31 | Call Delivery Ind       | If the call has been through call delivery than true,             |
|         |                         | false otherwise                                                   |
|         |                         | 0 = False                                                         |
|         |                         | 1 = True                                                          |
|         |                         | 2 = CDLX                                                          |
|      32 | Call Waiting Ind        | If the call has been through call waiting than true,              |
|         |                         | false otherwise                                                   |
|         |                         | 0 = False                                                         |
|         |                         | 1 = True                                                          |
|      33 | 3 way Calling Ind       | If the call has been through 3 way calling, false otherwise       |
|         |                         | 0 = False                                                         |
|         |                         | 1 = True                                                          |
|      34 | Call Answered Ind       | If the call has been answered than true, false otherwise.         |
|         |                         | 0 = False                                                         |
|         |                         | 1 = True                                                          |
|      35 | Ring Time               | Total ring time in seconds                                        |
|      36 | Call Duration           | Call duration minus ring-time in seconds.                         |
|         |                         | Includes the duration in seconds of the data session              |
|      37 | Roaming Ind             | Data roaming indicator 0 = False 1 = True                         |
|      38 | Session ID              | Primary Key for AAA, Transaction ID for                           |
|         |                         | PSMS AAA.SESSION_ID <= 64 Chars                                   |
|         |                         | PSMS.TRANS_ID <= 50 Chars                                         |
|         |                         | QIS.EVENT_ID <= 50 chars Used to find the charge code             |
|      39 | Session Type            | For QIS 0 = Charge (only) For PSMS there are two possible values: |
|         |                         | 0 = Charge                                                        |
|         |                         | 1 = Adjustment                                                    |
|         |                         | For *PTX* and *SMS* we can have the following values:             |
|         |                         | *SMSTXT and SMSEMIL*                                              |
|      40 | Bytes In                | Total of incoming bytes associated                                |
|         |                         | this event can also be negative.                                  |
|         |                         | Using this field and the "Bytes Out" field                        |
|         |                         | we can derive the total bytes.                                    |
|      41 | Bytes Out               | Total of outgoing bytes associated with this event contains       |
|         |                         | a signed byte (+-) Using this field and the "Bytes In" field      |
|         |                         | we can derive the total bytes.                                    |
|      42 | Application ID          | QIS = Part ID AAA = AppID PSMS = Short Code                       |
|      43 | Application Type        | QIS = (Download or Subscription) PSMS = (One-Off or Subscription) |
|      44 | Application Name        |                                                                   |
|      45 | Purchase Category Code  | Used by PSMS                                                      |
|      46 | Application Description | Will be used for both QIS and PSMS for QIS it will come from the  |
|         |                         | AE field directly on the record for PSMS it will be a             |
|         |                         | combination of the <short code> <description> <content provider>  |
|         |                         | if it is a "Subscription", "Subscription -" is displayed.         |
|         |                         | If it is a one-off, it is not                                     |
|         |                         | presented in the invoice line item.                               |
|      47 | Content Amount          | Combines Pre-rated usage amount for QIS and PSMS                  |
|      48 | Orig_trans_ID           | Orig Trans ID PSMS.TRANS_ID                                       |
|      49 | Network Flag            | Used by QIS to calculate the charge code.                         |
|         |                         | 0 = not a 1 = is a network application..                          |
|         |                         | Default is 0                                                      |
|      50 | Femto-cell-ringtime     | Will not be needed until after *TOPS* implementation              |
|      51 | Femto-cell-ringpluse    | Will not be needed until after *TOPS* implementation              |
|      52 | LTE Handoff             | This maybe needed after the move to LTE,                          |
|         |                         | so is just used as a placeholder                                  |
|      53 | Market/Sub-market       | The Market and Sub-market for a customer this can also be blank.  |
|         |                         | This field is populated by using a MSID against the MIN_LR        |
|      54 | Originating IMSI        | The IMSI assigned to the SIM card originating a LTE or eHRPD      |
|         |                         | data session. This can be a routing parameter                     |
|         |                         | for LTE or eHRPD traffic.                                         |
|      55 | Adjustment Reason Code  | The Adjustment Reason Code for a PSMS adjustment                  |
|      56 | External Reference ID   | The External Reference ID for a PSMS record                       |
|      57 | Partner ID              | The Partner ID for PSMS record                                    |
|      58 | Campaign ID             | The Campaign ID for a PSMS record                                 |
|      59 | Initiator Type          | The Initiator Type for PSMS record                                |
|      60 | Initiator ID            | The Initiator ID for PSMS record                                  |
|---------+-------------------------+-------------------------------------------------------------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
** Header
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align c|l|l|l
|---------+---------------+-----------------------------------------+--------------------------------|
| *Field* | *Field Name*  | *Description*                           | *Data Type*                    |
|---------+---------------+-----------------------------------------+--------------------------------|
| 1       | Record Type   | The record type for Header is HR        | 4 character alpha-numeric      |
|         |               |                                         |                                |
| 2       | File Number   | file Identifier A unique identifier     | alpha-numeric <= 24 chars and  |
|         |               | that shows the original file that       | have the pattern IDxxxxxxx..   |
|         |               | the record name in from. (ex. ID044803) | Where xxxx is a number that's  |
|         |               |                                         | no greater then 16 char        |
|         |               |                                         |                                |
| 3       | Source System | Switch identifier (See Switch Name      | alpha-numeric <= 16 characters |
|         |               | and type tab for a complete listing)    |                                |
|         |               | (Possible Voice values include: madi,   |                                |
|         |               | scha etc.) (Data values can include     |                                |
|         |               | aaa1, vali etc.                         |                                |
|         |               |                                         |                                |
| 4       | Start Date    | Start date of file creation {YYYYMMDD}  | Event Date YYYYMMDD            |
|         |               |                                         | 1900 <= YYYY <=9999            |
|         |               |                                         | 01 <= MM <= 12                 |
|         |               |                                         | 01 <= DD <= 31                 |
|         |               |                                         |                                |
| 5       | Start Time    | Start Time for file creation {HHMMSSss} | Switch Time HHMMSSss           |
|         |               |                                         | 00 <= HH <= 23                 |
|         |               |                                         | 00 <= MM <= 59                 |
|         |               |                                         | 00 <= SS <= 59                 |
|         |               |                                         | 00 <= ss <= 59                 |
|---------+---------------+-----------------------------------------+--------------------------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
#+BEGIN_LaTeX
\newpage
#+END_LaTeX
** Trailer
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align c|l|l|l
|---------+---------------+------------------------------------------+-----------------------------------------|
| *Field* | *Field Name*  | *Description*                            | *Data Type*                             |
|---------+---------------+------------------------------------------+-----------------------------------------|
| 1       | Record Type   | The record type for Trailer is TR        | 4 character alpha-numeric               |
|         |               |                                          |                                         |
| 2       | File Number   | File Identifier A unique identifier      | alpha-numeric <= 24 chars and have the  |
|         |               | that shows the original file that        | pattern IDxxxxxxx.. Where xxxx is       |
|         |               | the record came in from. (ex. ID044803)  | a number that's no greater then 16 char |
|         |               |                                          |                                         |
| 3       | Source System | Switch identifier (See Switch Name       | alpha-numeric <= 16 chars               |
|         |               | and type tab for a complete listing)     |                                         |
|         |               | (Data values can include aaa1, vali etc. |                                         |
|         |               |                                          |                                         |
| 4       | End Date      | End date of file creation {YYYYMMDD}     | Event Date YYYYMMDD                     |
|         |               |                                          | 1900 <= YYYY <=9999                     |
|         |               |                                          | 01 <= MM <= 12                          |
|         |               |                                          | 01 <= DD <= 31                          |
|         |               |                                          |                                         |
| 5       | End Time      | End Time of file creation {HHMMSSss}     | Switch Time HHMMSSss                    |
|         |               |                                          | 00 <= HH <= 23                          |
|         |               |                                          | 00 <= MM <= 59                          |
|         |               |                                          | 00 <= SS <= 59                          |
|         |               |                                          | 00 <= ss <= 59                          |
|         |               |                                          |                                         |
| 6       | Total Records | Total number of records in this file     | numeric <= 100000000                    |
|         |               |                                          | (Including Header and trailers)         |
|---------+---------------+------------------------------------------+-----------------------------------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
** Service Feature Codes
   Description of the service feature codes found in field 29 of the *UFF*
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX
#+ATTR_LaTeX: :environment longtable :align l|l
|------------------------------------+--------|
| *Description*                      | *Code* |
|------------------------------------+--------|
| (NTI Only) - Automatic Roaming     | ARM    |
| Call Delivery Interconnect         | CDLX   |
| Call Forward Immediate             | CFW    |
| Call Forward Busy                  | CFB    |
| Call Forward No Answer Transfer    | CFWTRN |
| (NTI Only) - Calls to/from hotline | HT     |
| (NTI Only) -Inter system hand-off  | ISH    |
| Operator assisted call             | OPA    |
| (NTI Only) - Vertical feature flag | VFF    |
| Voice-mail delivery                | VMD    |
| Voice-mail retrieval               | VMR    |
| Caller ID Restriction (ID block)   | CIR    |
|------------------------------------+--------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
** [[file:docs/Drop%20Reason%20Codes.pdf][Drop Reason Codes]]
   There many many reasons why a record can be dropped and are to numerous to list. The complete list can forwarded upon request.

#+BEGIN_LaTeX
\newpage
#+END_LaTeX
* CIBER File Format
  Incollect and Outcollect *CDMA* files are come in the *CIBER* File format which is a fixed length record format described below.
** Ciber Record Types
   The *Ciber* standard defines the following record Types:
      -  *01* Header
      -  *22* Voice (main Record type)
      -  *32* Data
      -  *52* One time charge
      -  *98* Trailer

*** CIBER 01 Record
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|--------------------------------+------------+---------------|
| *Field*                        | *Position* | *Description* |
|--------------------------------+------------+---------------|
| Record Type                    |        1-2 |               |
| Batch Creation Date            |        3-8 |               |
| Batch Sequence Number          |       9-11 |               |
| Sending Carrier SID/BID        |      12-16 |               |
| Receiving Carrier SID/BID      |      17-21 |               |
| CIBER Record Release Number    |      22-23 |               |
| Original/Return Indicator      |      24-24 |               |
| Currency Type                  |      25-26 |               |
| Settlement Period              |      27-32 |               |
| Clearinghouse ID               |      33-33 |               |
| CIBER Batch Reject Reason Code |      34-35 |               |
| Batch Contents                 |      36-36 |               |
| Local Carrier Reserved         |      37-56 |               |
| System Reserved Filler         |     57-200 |               |
|--------------------------------+------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
#+BEGIN_LaTeX
\newpage 
#+END_LaTeX
*** CIBER 22 Record
    Voice roaming record.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|------------------------------------------+------------+---------------|
| *FIELD NAME*                             | *POSITION* | *Description* |
|------------------------------------------+------------+---------------|
| Record Type                              |        1-2 |               |
| Return Code                              |        3-3 |               |
| CIBER Record Return Reason Code          |        4-5 |               |
| Invalid Field Identifier                 |        6-8 |               |
| Home Carrier SID/BID                     |       9-13 |               |
| MSID Indicator                           |      14-14 |               |
| *MSID*                                   |      15-29 |               |
| MSISDN/MDN Length                        |      30-31 |               |
| *MSISDN/MDN*                             |      32-46 |               |
| *ESN/UIMID/IMEI/MEID Indicator*          |      47-47 | 0 = NA        |
|                                          |            | 1 = ESN       |
|                                          |            | 2 = IMEI      |
|                                          |            | 3 = MEID      |
|                                          |            | 4 = pESN      |
| *ESN/UIMID/IMEI/MEID*                    |      48-66 |               |
| *Serving Carrier SID/BID*                |      67-71 |               |
| *Total Charges and Taxes*                |      72-81 |               |
| System Reserved Filler                   |      82-82 |               |
| *Total State/Province Taxes*             |      83-92 |               |
| System Reserved Filler                   |      93-93 |               |
| *Total Local/Other Taxes*                |     94-103 |               |
| System Reserved Filler                   |    104-104 |               |
| *Call Date*                              |    105-110 |               |
| *Call Direction*                         |    111-111 |               |
| Call Completion Indicator                |    112-112 |               |
| Call Termination Indicator               |    113-113 |               |
| Caller ID Length                         |    114-115 |               |
| Caller ID                                |    116-130 |               |
| Called Number Length                     |    131-132 |               |
| *Called Number Digits*                   |    133-147 |               |
| Location Routing Number Length Indicator |    148-149 |               |
| Location Routing Number                  |    150-164 |               |
| TLDN Length                              |    165-166 |               |
| TLDN                                     |    167-181 |               |
| Currency Type                            |    182-183 |               |
| System Reserved Filler                   |    184-185 |               |
| Original Batch Sequence Number           |    186-188 |               |
| Initial Cell Site                        |    189-199 |               |
| Time Zone Indicator                      |    200-201 |               |
| Daylight Savings Indicator               |    202-202 |               |
| Message Accounting Digits                |    203-212 |               |
| Air Connect Time                         |    213-218 |               |
| Air Chargeable Time                      |    219-224 |               |
| Air Elapsed Time                         |    225-230 |               |
| Air Rate Period                          |    231-232 |               |
| Air Multi-Rate Period                    |    233-233 |               |
| *Air Charge*                             |    234-243 |               |
| System Reserved Filler                   |    244-244 |               |
| Other Charge No. 1 Indicator             |    245-246 |               |
| *Other Charge No. 1*                     |    247-256 |               |
| System Reserved Filler                   |    257-257 |               |
| System Reserved Filler                   |    258-270 |               |
| Printed Call                             |    271-285 |               |
| Fraud Indicator                          |    286-287 |               |
| Fraud Sub-Indicator                      |    288-288 |               |
| *Special Features Used*                  |    289-293 |               |
| *Called Place*                           |    294-303 |               |
| *Called State/Province*                  |    304-305 |               |
| *Called Country*                         |    306-308 |               |
| *Serving Place*                          |    309-318 |               |
| *Serving State/Province*                 |    319-320 |               |
| *Serving Country*                        |    321-323 |               |
| Toll Connect Time                        |    324-329 |               |
| Toll Chargeable Time                     |    330-335 |               |
| Toll Elapsed Time                        |    336-341 |               |
| Toll Tariff Descriptor                   |    342-343 |               |
| Toll Rate Period                         |    344-345 |               |
| Toll Multi-Rate Period                   |    346-346 |               |
| Toll Rate Class                          |    347-347 |               |
| Toll Rating Point Length Indicator       |    348-349 |               |
| Toll Rating Point                        |    350-359 |               |
| *Toll Charge*                            |    360-369 |               |
| System Reserved Filler                   |    370-370 |               |
| *Toll State/Province Taxes*              |    371-380 |               |
| System Reserved Filler                   |    381-381 |               |
| *Toll Local Taxes*                       |    382-391 |               |
| System Reserved Filler                   |    392-392 |               |
| Toll Network Carrier ID                  |    393-397 |               |
| Local Carrier Reserved                   |    398-472 |               |
| System Reserved Filler                   |    473-547 |               |
|------------------------------------------+------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
*** CIBER 32 Record
    Data roaming record.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|------------------------------------------+------------+---------------|
| *Field*                                  | *Position* | *Description* |
|------------------------------------------+------------+---------------|
| Record Type                              |        1-2 |               |
| Return Code                              |        3-3 |               |
| CIBER Record Return Reason Code          |        4-5 |               |
| Invalid Field Identifier                 |        6-8 |               |
| Home Carrier SID/BID                     |       9-13 |               |
| MSID Indicator                           |      14-14 |               |
| MSID                                     |      15-29 |               |
| MSISDN/MDN Length                        |      30-31 |               |
| MSISDN/MDN                               |      32-46 |               |
| ESN/UIMID/IMEI/MEID Indicator            |      47-47 |               |
| ESN/UIMID/IMEI/MEID                      |      48-66 |               |
| Serving Carrier SID/BID                  |      67-71 |               |
| Total Charges and Taxes                  |      72-81 |               |
| System Reserved Filler                   |      82-82 |               |
| Total State/Province Taxes               |      83-92 |               |
| System Reserved Filler                   |      93-93 |               |
| Total Local Taxes                        |     94-103 |               |
| System Reserved Filler                   |    104-104 |               |
| Call Date                                |    105-110 |               |
| Call Direction                           |    111-111 |               |
| Call Completion Indicator                |    112-112 |               |
| Call Termination Indicator               |    113-113 |               |
| Caller ID Length                         |    114-115 |               |
| Caller ID                                |    116-130 |               |
| Called Number Length                     |    131-132 |               |
| Called Number Digits                     |    133-147 |               |
| Location Routing Number Length Indicator |    148-149 |               |
| Location Routing Number                  |    150-164 |               |
| TLDN Length                              |    165-166 |               |
| TLDN                                     |    167-181 |               |
| Currency Type                            |    182-183 |               |
| System Reserved Filler                   |    184-185 |               |
| Original Batch Sequence Number           |    186-188 |               |
| Initial Cell Site                        |    189-199 |               |
| Time Zone Indicator                      |    200-201 |               |
| Daylight Savings Indicator               |    202-202 |               |
| Message Accounting Digits                |    203-212 |               |
| Charge No. 1 Indicator                   |    213-214 |               |
| Charge No. 1 Connect Time                |    215-220 |               |
| Charge No. 1 Chargeable Time             |    221-226 |               |
| Charge No. 1 Elapsed Time                |    227-232 |               |
| Charge No. 1 Rate Period                 |    233-234 |               |
| Charge No. 1 Multi-Rate Period           |    235-235 |               |
| Charge No. 1 Tax/Surcharge Indicator     |    236-236 |               |
| Charge No. 1                             |    237-246 |               |
| System Reserved Filler                   |    247-247 |               |
| Charge No. 2 Indicator                   |    248-249 |               |
| Charge No. 2 Connect Time                |    250-255 |               |
| Charge No. 2 Chargeable Time             |    256-261 |               |
| Charge No. 2 Elapsed TIme                |    262-267 |               |
| Charge No. 2 Rate Period                 |    268-269 |               |
| Charge No. 2 Multi-Rate Period           |    270-270 |               |
| Charge No. 2 Tax/Surcharge Indicator     |    271-271 |               |
| Charge No. 2                             |    272-281 |               |
| System Reserved Filler                   |    282-282 |               |
| Charge No. 3 Indicator                   |    283-284 |               |
| Charge No. 3 Connect Time                |    285-290 |               |
| Charge No. 3 Chargeable Time             |    291-296 |               |
| Charge No. 3 Elapsed Time                |    297-302 |               |
| Charge No. 3 Rate Period                 |    303-304 |               |
| Charge No. 3 Multi-Rate Period           |    305-305 |               |
| Charge No. 3 Tax/Surcharge Indicator     |    306-306 |               |
| Charge No. 3                             |    307-316 |               |
| System Reserved Filler                   |    317-317 |               |
| Charge No. 4 Indicator                   |    318-319 |               |
| Charge No. 4 Connect Time                |    320-325 |               |
| Charge No. 4 Chargeable Time             |    326-331 |               |
| Charge No. 4 Elapsed Time                |    332-337 |               |
| Charge No. 4 Rate Period                 |    338-339 |               |
| Charge No. 4 Multi-Rate Period           |    340-340 |               |
| Charge No. 4 Tax/Surcharge Indicator     |    341-341 |               |
| Charge No. 4                             |    342-351 |               |
| System Reserved Filler                   |    352-352 |               |
| Blank Fill Serving Place                 |    353-362 |               |
| Serving State/Province                   |    363-364 |               |
| Serving Country                          |    365-367 |               |
| Special Features Used                    |    368-372 |               |
| Other Charge No. 1 Indicator             |    373-374 |               |
| Other Charge No. 1                       |    375-384 |               |
| System Reserved Filler                   |    385-385 |               |
| System Reserved Filler                   |    386-398 |               |
| Printed Call                             |    399-413 |               |
| Fraud Indicator                          |    414-415 |               |
| Fraud Sub-Indicator                      |    416-416 |               |
| Features Used After Handoff Indicator    |    417-417 |               |
| Local Carrier Reserved                   |    418-492 |               |
| System Reserved Filler                   |    493-567 |               |
|------------------------------------------+------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** CIBER 52 Record
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|---------------------------------+------------+---------------|
| *FIELD*                         | *POSITION* | *Description* |
|---------------------------------+------------+---------------|
| Return Code                     |        3-3 |               |
| CIBER Record Return Reason Code |        4-5 |               |
| Invalid Field Identifier        |        6-8 |               |
| Home Carrier SID/BID            |       9-13 |               |
| MSID Indicator                  |      14-14 |               |
| *MSID*                          |      15-29 |               |
| MSISDN/MDN Length               |      30-31 |               |
| MSISDN/MDN                      |      32-46 |               |
| ESN/UIMID/IMEI/MEID Indicator   |      47-47 |               |
| ESN/UIMID/IMEI/MEID             |      48-66 |               |
| Serving Carrier SID/BID         |      67-71 |               |
| *Total Charges and Taxes*       |      72-81 |               |
| System Reserved Filler          |      82-82 |               |
| *Total State/Province Taxes*    |      83-92 |               |
| System Reserved Filler          |      93-93 |               |
| *Total Local Taxes*             |     94-103 |               |
| System Reserved Filler          |    104-104 |               |
| *OCC Charge/Start Date*         |    105-110 |               |
| Connect Time                    |    111-116 |               |
| OCC End Date                    |    117-122 |               |
| OCC Interval Indicator          |    124-133 |               |
| *OCC Charge*                    |    134-134 |               |
| System Reserved Filler          |    135-159 |               |
| OCC Description Currency Type   |    160-161 |               |
| System Reserved Filler          |    123-123 |               |
| Original Batch Sequence Number  |    164-166 |               |
| Initial Cell Site               |    167-177 |               |
| Time Zone Indicator             |    178-179 |               |
| Daylight Savings Indicator      |    180-180 |               |
| Message Accounting Digits       |    181-190 |               |
| Record Use Indicator            |    191-191 |               |
| Serving Place                   |    192-201 |               |
| Serving State/Province          |    202-203 |               |
| Serving Country                 |    204-206 |               |
| Other Charge No. 1 Indicator    |    207-208 |               |
| Other Charge No. 1              |    209-218 |               |
| System Reserved Filler          |    219-219 |               |
| System Reserved Filler          |    220-232 |               |
| Fraud Indicator                 |    233-234 |               |
| Fraud Sub-Indicator             |    235-235 |               |
| Record Create Date              |    236-241 |               |
| System Reserved Filler          |    220-232 |               |
| Fraud Indicator                 |    233-234 |               |
| Fraud Sub-Indicator             |    235-235 |               |
| Record Create Date              |    236-241 |               |
|---------------------------------+------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
#+BEGIN_LaTeX
\newpage
#+END_LaTeX
*** CIBER 98 Record
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|----------------------------------+------------+---------------|
| *FIELD*                          | *POSITION* | *Description* |
|----------------------------------+------------+---------------|
| Record Type                      |        1-2 |               |
| Batch Creation Date              |        3-8 |               |
| Batch Sequence Number            |       9-11 |               |
| Sending Carrier SID/BID          |      12-16 |               |
| Receiving Carrier SID/BID        |      17-21 |               |
| *Total Number Records in Batch*  |      22-25 |               |
| *Batch Total Charges & Taxes*    |      26-37 |               |
| Settlement Period                |      38-43 |               |
| Clearinghouse ID                 |      44-44 |               |
| System Reserved Filler           |      45-49 |               |
| Original Total Number of Records |      50-53 |               |
| *Original Total Charges & Taxes* |      54-65 |               |
| System Reserved Filler           |      66-73 |               |
| Currency Type                    |      74-75 |               |
| Local Carrier Reserved           |      76-95 |               |
| System Reserved Filler           |     96-200 |               |
|----------------------------------+------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
** MF1_CIBER_BATCH_SEQ
         The table used to keep the CIBER Outcollect sequences in sync
         with Syniverse. Every once a while we need to update it to keep
         in sync.

        [[file:///home/dbalchen/workspace/Outcollects/updateSeq.pl][Sequence Creation Job]]

#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX
#+ATTR_LaTeX: :environment longtable :align l|l|l
|-------------------+---------------+---------------|
| *Column Name*     | *Data Type*   | *Description* |
|-------------------+---------------+---------------|
| Application_Id    | Char (6 Byte) |               |
| Dl_Service_Code   | Char (5 Byte) |               |
| Dl_Update_Stamp   | Number (4)    |               |
| *Home_Sid*        | Char (5 Byte) |               |
| Locked_Sid        | Number (10)   |               |
| Operator_Id       | Number (9)    |               |
| Seq_No            | Number (3)    |               |
| *Serve_Sid*       | Char (5 Byte) |               |
| Status_Ind        | Char (2 Byte) |               |
| Sys_Creation_Date | Date          |               |
| Sys_Update_Date   | Date          |               |
|-------------------+---------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
** CIBERNET - Specification/Reference	
   https://www.one1clear.net/mxp/Login.asp 

#+BEGIN_LaTeX
\newpage 
#+END_LaTeX

* Acquisition and Formating (A&F)
   *A&F* is the first stage of the *TOPS* mediation process where the *UFF* or *CIBER* record is examined, enriched 
   and transfered to an intermediary /usage/ format. For *CIBER* records an extra rules step is 
   added to further mediate the records.
** AC_PHYSICAL_FILES
   Provides information for the physical files that were processed.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|---------------------+--------------------+-----------------|
| *Column Name*       | *Data Type*        | *Description*   |
|---------------------+--------------------+-----------------|
| *Identifier*        | Number(15,0)       | file Identifier |
| *Sys_Creation_Date* | Date               |                 |
| Sys_Update_Date     | Date               |                 |
| Operator_Id         | Number(9,0)        |                 |
| Application_Id      | Char(6 Byte)       |                 |
| Dl_Service_Code     | Char(5 Byte)       |                 |
| Dl_Update_Stamp     | Number(4,0)        |                 |
| *File_Name*         | Varchar2(200 Byte) |                 |
| Host_Name           | Varchar2(50 Byte)  |                 |
| *File_Path*         | Varchar2(512 Byte) |                 |
| Serial_Number       | Varchar2(8 Byte)   |                 |
| System_Rcv_Date     | Date               |                 |
| Fsrc_Src_Type       | Char(10 Byte)      |                 |
| Fsrc_Type_Id        | Char(10 Byte)      |                 |
| Rcrdng_Start_Date   | Date               |                 |
| Rcrdng_End_Date     | Date               |                 |
| *Trlr_Record_Count* | Number(9,0)        |                 |
| Trlr_Block_Count    | Number(9,0)        |                 |
| Trlr_L_File_Count   | Number(9,0)        |                 |
| Pgm_L_File_Count    | Number(9,0)        |                 |
| Pgm_Tracer_Ind      | Char(1 Byte)       |                 |
| Dupl_Entry_Ind      | Char(1 Byte)       |                 |
| Entry_Status        | Char(2 Byte)       |                 |
| Old_Age_Ind         | Char(1 Byte)       |                 |
| End_Of_Tree_Seq     | Number(9,0)        |                 |
| *Balance_Date*      | Date               |                 |
|---------------------+--------------------+-----------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
** AC_SOURCE
   This table lists the *network elements* and the file type processed. When a new network element is created, an entry describing it must be created.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|-------------------+-------------------+-----------------|
| *Column Name*     | *Data Type*       | *Description*   |
|-------------------+-------------------+-----------------|
| Source_Type       | Char(10 Byte)     |                 |
| *File_Type*       | Char(10 Byte)     | UFF/CIBER etc.  |
| *Switch_Id*       | Varchar2(32 Byte) | Network Element |
| Sys_Creation_Date | Date              |                 |
| Sys_Update_Date   | Date              |                 |
| Operator_Id       | Number(9,0)       |                 |
| Application_Id    | Char(6 Byte)      |                 |
| Dl_Service_Code   | Char(5 Byte)      |                 |
| Dl_Update_Stamp   | Number(4,0)       |                 |
| File_Seq_No       | Number(6,0)       |                 |
| Max_File_Seq_No   | Number(6,0)       |                 |
| Max_Time          | Number(10,0)      |                 |
| Min_Time          | Number(10,0)      |                 |
| Last_Cycle_Procd  | Date              |                 |
| Next_Cycle_Expect | Date              |                 |
| Status_Ind        | Char(2 Byte)      |                 |
| Dupl_Entry_Ind    | Char(1 Byte)      |                 |
| Ho_From_Time      | Date              |                 |
| Ho_From_Seq       | Number(6,0)       |                 |
| Days_Bfr_Phy_Cln  | Number(4,0)       |                 |
| Gap_Permitted     | Number(6,0)       |                 |
|-------------------+-------------------+-----------------|

** AC1_CONTROL (-HIST)
   When it comes to investigating usage issues *AC1_CONTROL_HIST* in both *PRDAF* (Usage) *PRDCUST* (AR) is usually the first stop for any file issues.


#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|------------------------+--------------------+--------------------|
| *Column Name*          | *Data Type*        | Description        |
|------------------------+--------------------+--------------------|
| *Identifier*           | Number(15,0)       |                    |
| Sys_Creation_Date      | Date               |                    |
| Sys_Update_Date        | Date               |                    |
| Operator_Id            | Number(9,0)        |                    |
| Application_Id         | Char(6 Byte)       |                    |
| Dl_Service_Code        | Char(5 Byte)       |                    |
| Dl_Update_Stamp        | Number(4,0)        |                    |
| *File_Name*            | Varchar2(200 Byte) |                    |
| *File_Path*            | Varchar2(512 Byte) |                    |
| File_Seq_No            | Number(6,0)        |                    |
| Host_Name              | Varchar2(50 Byte)  |                    |
| Data_Group             | Varchar2(64 Byte)  |                    |
| File_Create_Date       | Date               |                    |
| *File_Status*          | Varchar2(2 Byte)   |                    |
| *Origin_File_Ident*    | Number(15,0)       | The Identifier of  |
|                        |                    | the original file. |
| *Phy_File_Ident*       | Number(15,0)       |                    |
| Cur_Pgm_Name           | Varchar2(32 Byte)  |                    |
| Cur_File_Alias         | Varchar2(10 Byte)  |                    |
| Nxt_Pgm_Name           | Varchar2(32 Byte)  |                    |
| Nxt_File_Alias         | Varchar2(10 Byte)  |                    |
| File_Format            | Varchar2(10 Byte)  |                    |
| File_Group             | Char(1 Byte)       |                    |
| File_Type              | Char(2 Byte)       |                    |
| Repro_Ind              | Char(1 Byte)       |                    |
| Source_Type            | Char(10 Byte)      |                    |
| Source_File_Type       | Char(10 Byte)      |                    |
| File_Deleted_Ind       | Char(1 Byte)       |                    |
| System_Id              | Char(5 Byte)       |                    |
| Abp_Var                | Varchar2(512 Byte) |                    |
| Priority               | Char(1 Byte)       |                    |
| Wr_Rec_Quantity        | Number(9,0)        |                    |
| Wr_Time_Quantity       | Number(13,2)       |                    |
| Wr_Money_Quantity      | Number(13,2)       |                    |
| Wr_Euro_Quantity       | Number(13,2)       |                    |
| In_Rec_Quantity        | Number(9,0)        |                    |
| In_Time_Quantity       | Number(13,2)       |                    |
| In_Money_Quantity      | Number(13,2)       |                    |
| In_Euro_Quantity       | Number(13,2)       |                    |
| Gn_Rec_Quantity        | Number(9,0)        |                    |
| Gn_Time_Quantity       | Number(13,2)       |                    |
| Gn_Money_Quantity      | Number(13,2)       |                    |
| Gn_Euro_Quantity       | Number(13,2)       |                    |
| Dr_Rec_Quantity        | Number(9,0)        |                    |
| Dr_Time_Quantity       | Number(13,2)       |                    |
| Dr_Money_Quantity      | Number(13,2)       |                    |
| Dr_Euro_Quantity       | Number(13,2)       |                    |
| Processed_Rec_No       | Number(9,0)        |                    |
| Rejected_Reason_Cd     | Char(3 Byte)       |                    |
| Owner_Name             | Varchar2(50 Byte)  |                    |
| Table_Alias            | Number(5,0)        |                    |
| Nxt_Process_Id         | Number(9,0)        |                    |
| Nxt_Process_Start_Time | Date               |                    |
| Cur_Process_Id         | Number(9,0)        |                    |
| Max_Event_Time         | Date               |                    |
| Logical_File_Ident     | Number(15,0)       |                    |
| Table_Issue_Code       | Number(9,0)        |                    |
| External_Id            | Varchar2(32 Byte)  |                    |
| Dest_Rout_Crtria       | Varchar2(24 Byte)  |                    |
| Status_Category        | Varchar2(20 Byte)  |                    |
| Status_Code            | Varchar2(200 Byte) |                    |
| Application_Code       | Varchar2(50 Byte)  |                    |
| File_Size              | Number(15,0)       |                    |
| Recycle_Counter        | Number(15,0)       |                    |
| Group_Sequence         | Number(15,0)       |                    |
| Out_Req_Quantity       | Number(9,0)        |                    |
| Bulk_Id                | Number(9,0)        |                    |
| Store_Mode             | Char(2 Byte)       |                    |
| Session_Id             | Number(15,0)       |                    |
| Target_File_Path       | Varchar2(512 Byte) |                    |
| Target_Host            | Varchar2(50 Byte)  |                    |
| Ext_Identifier         | Number(9,0)        |                    |
| Ext_Orig_Ident         | Number(9,0)        |                    |
| Additional_Attr        | Varchar2(300 Byte) |                    |
| Group_Size             | Number(4,0)        |                    |
| Monitor_Data           | Varchar2(50 Byte)  |                    |
| Wr_Volume_Quantity     | Number(15,2)       |                    |
| In_Volume_Quantity     | Number(15,2)       |                    |
| Gn_Volume_Quantity     | Number(15,2)       |                    |
| Dr_Volume_Quantity     | Number(15,2)       |                    |
| End_Process_Time       | Date               |                    |
| Fr_Time                | Date               |                    |
| Eng_Priority           | Number(1,0)        |                    |
|------------------------+--------------------+--------------------|
#+BEGIN_LaTeX
\newpage 
#+END_LaTeX
* TurboCharging
   The most important /sub-system/ in *TOPS*. It is here that all usage is guided and rated.
\\
\\
#+ATTR_LaTeX: :width 16cm
 [[file:Pictures/TC.png]]
 -  *Event flow:*
     1. An event comes in to via a network element
     2. Transforms data into a conical form which also includes the
         network element.
     3. Gets Rated
      -  For *Pre-Pay* the *HLR[fn:4]*. is handled by the *SCP[fn:2]*
      -  We convert everything to the customers *Home SID timezone* for bill
         presentment.
      -  Limiting or "/choking/" usage can be handled by *Diameter[fn:3]* for
         *Pre-Pay* and *Turbo-Charging* for *Post-Pay*
** Guide By Criteria
   The value used for each usage type to find the customer information. 
|--------------+------------|
| *Data Types* | *Guide By* |
|--------------+------------|
| voice        | MSID       |
| GSM          | *IMSI*     |
| SMS          | MDN        |
| VOLTE/TAS    | IMSI       |
| PMG/PTX      | MSID       |
| AAA          | MSID       |
| *PGW/LTE*    | *MDN/IMSI* |
| Vali         | MDN        |
|--------------+------------|
** Event Servers
    *Turbo-Charging* is not one application but multiple instances of *Event Servers*. Each event server corresponds to a bill cycle. Their status can be viewed using
         the following query on the *PRDAF* database.
    :  SELECT DISTINCT
    :          A.PROCESS_GROUP_ID,
    :          PROCESS_CODE,
    :          DECODE (HOST_ID,
    :                  2001, 'EVESRV1',
    :                  2022, 'EVESRV2',
    :                  2023, 'EVESRV3',
    :                  2024, 'EVESRV4',
    :                  2025, 'EVESRV5',
    :                  2026, 'EVESRV6')
    :              AS "MACHINE",
    :          DESCRIPTION,
    :          DECODE (PROCESS_GROUP_ROLE,  0, 'ACTIVE',  1, 'STANDBY') ES_STATUS
    :     FROM AVM1_SEGMENT_TOPOLOGY A, GN1_SYS_PROC_INSTANCE_CFG B
    :    WHERE     A.PROCESS_GROUP_ID = B.PROCESS_GROUP_ID
    :          AND A.ACTIVE_PROCESS_ID = B.PROCESS_INSTANCE_ID
    :          AND PROCESS_CODE LIKE '%ES1%'
    : ORDER BY MACHINE ASC
** Rerate Servers
    In addition we have five *Rerate Servers* they are:
        | 1. *RRP_EOC1056* | 4. *RRP_EOC1257* |
        | 2. *RRP_EOC1068* | 5. *RRP_EOC1259* |
        | 3. *RRP_EOC1192* |                  |


:CLOSET:
 *** AGREEMENT_RESOURCE
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|-------------------+---------------------+---------------|
| *Column Name*     | *Data Type*         | *Description* |
|-------------------+---------------------+---------------|
| Trx_Id            | Number (10)         |               |
| To_Resource_Val   | Varchar2 (200 Byte) |               |
| Sys_Update_Date   | Date                |               |
| Sys_Creation_Date | Date                |               |
| Resrc_Seq_No      | Number (10)         |               |
| Resource_Value    | Varchar2 (200 Byte) |               |
| Resource_Type     | Varchar2 (4 Byte)   |               |
| Resource_State    | Char (1 Byte)       |               |
| Resource_Scope_Id | Varchar2 (15 Byte)  |               |
| Resource_Prm_Cd   | Varchar2 (255 Byte) |               |
| Resource_Category | Char (1 Byte)       |               |
| Range_Ind         | Char (1 Byte)       |               |
| Operator_Id       | Number (9)          |               |
| Offer_Instance_Id | Number (10)         |               |
| Ins_Trx_Id        | Number (10)         |               |
| From_Resource_Val | Varchar2 (200 Byte) |               |
| Expiration_Date   | Date                |               |
| Exp_Issue_Date    | Date                |               |
| Effective_Date    | Date                |               |
| Eff_Issue_Date    | Date                |               |
| Dl_Update_Stamp   | Number (4)          |               |
| Dl_Service_Code   | Char (5 Byte)       |               |
| Conv_Run_No       | Number (3)          |               |
| Base_Param_Name   | Varchar2 (255 Byte) |               |
| Application_Id    | Char (6 Byte)       |               |
| Agreement_No      | Number (10)         |               |
| Agreement_Key     | Number (9)          |               |
|-------------------+---------------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

 *** CM1_AGREEMENT_PARAM
    In the PRDCUST database. 
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|-------------------+----------------------+-------------------|
| *Name*            | *Data Type*          | *Description*     |
|-------------------+----------------------+-------------------|
| Agreement_Key     | Number (9)           |                   |
| Agreement_No      | Number (10)          | Is Equal To The   |
|                   |                      | Subscriber Number |
| Param_Seq_No      | Number (10)          |                   |
| Sys_Creation_Date | Date                 |                   |
| Sys_Update_Date   | Date                 |                   |
| Operator_Id       | Number (9)           |                   |
| Application_Id    | Char (6 Byte)        |                   |
| Dl_Service_Code   | Char (5 Byte)        |                   |
| Dl_Update_Stamp   | Number (4)           |                   |
| Param_Name        | Varchar2 (255 Byte)  |                   |
| Param_Values      | Varchar2 (4000 Byte) |                   |
| *Effective_Date*  | Date                 |                   |
| *Expiration_Date* | Date                 |                   |
| Agr_Level         | Char (1 Byte)        |                   |
| Source_Agr_No     | Number (10)          |                   |
| Trx_Id            | Number (10)          |                   |
| Ins_Trx_Id        | Number (10)          |                   |
| Eff_Issue_Date    | Date                 |                   |
| Exp_Issue_Date    | Date                 |                   |
| Conv_Run_No       | Number (10)          |                   |
| Offer_Instance_Id | Number (10)          |                   |
|-------------------+----------------------+-------------------|
:END:
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
#+BEGIN_LaTeX
\newpage 
#+END_LaTeX
** AGD1_RESOURCES
   Given a customer attribute, use this table to find the rest of the customer information.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|-----------------------+-------------------+------------------|
| *Column Name*         | *Data Type*       | *Description*    |
|-----------------------+-------------------+------------------|
| Resource_Segment      | Number(4,0)       |                  |
| Resource_Value        | Varchar2(63 Byte) | Contains         |
| *Resource_Type*       | Number(4,0)       | 0 - Mdn          |
|                       |                   | 19 - Min         |
|                       |                   | 21 - Outcollects |
|                       |                   | 23 - Timsi       |
| *Effective_Date*      | Date              |                  |
| Sys_Creation_Date     | Date              |                  |
| Sys_Update_Date       | Date              |                  |
| Operator_Id           | Number(9,0)       |                  |
| Application_Id        | Char(6 Byte)      |                  |
| Dl_Service_Code       | Char(5 Byte)      |                  |
| Dl_Update_Stamp       | Number(4,0)       |                  |
| Update_Id             | Number(18,0)      |                  |
| *Expiration_Date*     | Date              |                  |
| *Subscriber_Id*       | Number(10,0)      | The Subscriber   |
| Sub_Status            | Char(1 Byte)      |                  |
| Routing_Policy_Id     | Number(9,0)       |                  |
| Payment_Category      | Char(4 Byte)      |                  |
| *Customer_Id*         | Number(10,0)      | Customer ID      |
| *Bill_Cycle*          | Number(4,0)       |                  |
| New_Bill_Cycle        | Number(4,0)       |                  |
| Chg_Cyc_Req_Date      | Date              |                  |
| Large_Cust_Ind        | Char(1 Byte)      |                  |
| Resource_Hash_Value   | Number(10,0)      |                  |
| Subscriber_Hash_Value | Number(10,0)      |                  |
| Load_Ind              | Char(1 Byte)      |                  |
|-----------------------+-------------------+------------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
         -  Subscriber Table Status
            -  A = Active
            -  C = Canceled
            -  S = Suspended
            -  U = Collection Suspend
            -  L = Collection Canceled
            -  D = Collection Suspend

#+BEGIN_LaTeX
\newpage 
#+END_LaTeX
** APE1_RATED_EVENT
   Where all the rateable non-roaming events are contained. For roaming events look at *APRM*.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|------------------------------+---------------------+-----------------------|
| *Column Name*                | *Data Type*         | *Description*         |
|------------------------------+---------------------+-----------------------|
| *Cycle_Code*                 | Number (4)          | See Usage Db By Cycle |
|                              |                     | For Complete List.    |
| *Cycle_Instance*             | Number (2)          | Cycle Month           |
| Customer_Segment             | Number (4)          |                       |
| *Customer_Id*                | Number (10)         |                       |
| Event_Id                     | Number (18)         |                       |
| *Subscriber_Id*              | Number (10)         |                       |
| Start_Time                   | Date                |                       |
| *Event_Type_Id*              | Number (9)          | [[https://usc.intranet.teldta.com/sites/is/operations/IS_Billing_Ops/_layouts/15/start.aspx#/oneNoteTest/Turbo%2520Charge%2520-%2520Event%2520Types.aspx][The Event Type]]        |
|                              |                     | Voice - 62            |
|                              |                     | Data - 51             |
|                              |                     | Lte - 69              |
|                              |                     | Sms - 54              |
|                              |                     | Mms - 60              |
|                              |                     | Volte - 69            |
|                              |                     | /Click above link/    |
|                              |                     | /For Complete List/   |
| Target_Cycle_Code            | Number (4)          |                       |
| Cycle_Year                   | Number (4)          |                       |
| Billing_Arrangement          | Number (18)         |                       |
| Source_Id                    | Number (15)         |                       |
| Event_State                  | Char (1 Byte)       | X = Stripped          |
| Event_State_Reason_Code      | Char (5 Byte)       |                       |
| Rerate_Type                  | Char (1 Byte)       |                       |
| Original_Event_Id            | Number (18)         |                       |
| Resource_Value               | Varchar2 (63 Byte)  |                       |
| *Resource_Type*              | Varchar2 (16 Byte)  | 0 - Mdn               |
|                              |                     | 19 - Min              |
|                              |                     | 21 - Outcollects      |
|                              |                     | 23 - Imsi             |
| Sys_Creation_Date            | Date                |                       |
| Sys_Update_Date              | Date                |                       |
| Operator_Id                  | Number (9)          |                       |
| Application_Id               | Char (6 Byte)       |                       |
| Dl_Service_Code              | Char (5 Byte)       |                       |
| Dl_Update_Stamp              | Number (4)          |                       |
| Update_Id                    | Number (9)          |                       |
| Version_Id                   | Number (9)          |                       |
| Network_Start_Time           | Date                |                       |
| Event_Status                 | Char (1 Byte)       |                       |
| Event_Counters               | Number (20)         |                       |
| Token_Id                     | Number (20)         |                       |
| L3_Account                   | Number              |                       |
| L3_Additional_Chg_Amt        | Number              |                       |
| L3_Airtime_Chg_Amt           | Number              |                       |
| L3_Basic_Service_Code        | Varchar2 (2 Byte)   |                       |
| *L3_Calling_Country_Code*    | Varchar2 (3 Byte)   |                       |
| *L3_Call_Category*           | Varchar2 (1 Byte)   | Volte = 'V'           |
| *L3_Call_Direction*          | Varchar2 (1 Byte)   | 1 = Incoming          |
|                              |                     | 2 = Outgoing          |
| L3_Call_Source               | Varchar2 (4 Byte)   |                       |
| *L3_Charge_Amount*           | Number              | The Amount Charged    |
| L3_Charge_Code               | Varchar2 (15 Byte)  |                       |
| L3_Chg_Amt_Inc_Free_Allow    | Number              |                       |
| L3_Customer_Offer_Currency   | Varchar2 (3 Byte)   |                       |
| L3_Discount_Amount           | Number              |                       |
| *L3_Duration*                | Number              |                       |
| *L3_Imsi*                    | Varchar2 (15 Byte)  |                       |
| *L3_Offer_Id*                | Number              | The Price Plan        |
|                              |                     | The Event Was         |
|                              |                     | Rated Against.        |
| L3_Original_Charge_Amount    | Number              |                       |
| L3_Payment_Category          | Varchar2 (4 Byte)   |                       |
| L3_Pay_Channel               | Number              |                       |
| *L3_Physical_File_Id*        | Number              |                       |
| L3_Pricing_Item_Id           | Number              |                       |
| L3_Rounded_Unit              | Number              |                       |
| L3_Special_Number_Group      | Varchar2 (10 Byte)  |                       |
| L3_Starting_Period           | Varchar2 (10 Byte)  |                       |
| L3_Target_Customer_Id        | Number              |                       |
| L3_Unapplied_Amount          | Number              |                       |
| L3_Uom                       | Varchar2 (1 Byte)   |                       |
| L3_Volume                    | Number              |                       |
| *Service_Filter*             | Varchar2 (15 Byte)  |                       |
| L9_Call_Tax_Indicator        | Varchar2 (2 Byte)   |                       |
| L9_Originating_Cell_Id       | Varchar2 (16 Byte)  |                       |
| L9_Number_Of_Recipients      | Number              |                       |
| L9_Cross_Toll_Period_Ind     | Varchar2 (1 Byte)   |                       |
| L9_Charge_Type               | Varchar2 (4 Byte)   |                       |
| L9_File_Number               | Varchar2 (24 Byte)  |                       |
| L9_Air_Tax                   | Number              |                       |
| L9_Surcharge_Indicator       | Varchar2 (1 Byte)   |                       |
| L9_Special_Features_Used     | Varchar2 (2 Byte)   |                       |
| L9_Original_Toll_Charge      | Number              |                       |
| *L9_Called_Number*           | Varchar2 (256 Byte) |                       |
| L9_Originating_Category      | Varchar2 (6 Byte)   |                       |
| L9_Volume_Type               | Varchar2 (2 Byte)   |                       |
| L9_Toll_Type_Indicator       | Varchar2 (2 Byte)   |                       |
| L9_Original_Add_Chrg_Amt     | Number              |                       |
| L9_Termination_Reason        | Varchar2 (8 Byte)   |                       |
| L9_Toll_Chrg_Amt_Inc_Alwnce  | Number              |                       |
| L9_Air_Rerate_Ind            | Varchar2 (1 Byte)   |                       |
| L9_Network_Flag              | Varchar2 (1 Byte)   |                       |
| *L9_Called_Place*            | Varchar2 (10 Byte)  |                       |
| L9_Surcharge_Type            | Varchar2 (1 Byte)   |                       |
| L9_Special_Number_Type       | Varchar2 (32 Byte)  |                       |
| L9_Period_Name               | Varchar2 (10 Byte)  |                       |
| L9_Correlation_Id            | Varchar2 (14 Byte)  |                       |
| L9_Additional_Rate_Offer_Id  | Number              |                       |
| L9_Cross_Period_Ind          | Varchar2 (1 Byte)   |                       |
| L9_Price_Plan_Offer_Id       | Number              |                       |
| L9_Toll_Rerate_Ind           | Varchar2 (1 Byte)   |                       |
| L9_Serving_Place             | Varchar2 (26 Byte)  |                       |
| L9_Original_Tax              | Number              |                       |
| L9_Toll_Offer_Instance       | Number              |                       |
| L9_Terminating_Cell_Id       | Varchar2 (16 Byte)  |                       |
| L9_Visitor_Indicator         | Varchar2 (1 Byte)   |                       |
| *L9_Band_Code*               | Varchar2 (1 Byte)   |                       |
| L9_Validity_Time             | Number              |                       |
| L9_Toll_Offer_Id             | Number              |                       |
| L9_Rounded_Toll_Duration     | Number              |                       |
| *L9_Carrier_Id*              | Varchar2 (16 Byte)  |                       |
| L9_Special_Number            | Varchar2 (32 Byte)  |                       |
| L9_Toll_Charge_Amount        | Number              |                       |
| L9_Toll_Duration             | Number              |                       |
| L9_Air_Time_Ind              | Varchar2 (1 Byte)   |                       |
| L9_Event_Type_Name           | Varchar2 (50 Byte)  |                       |
| L9_Record_Sequence_Number    | Number              |                       |
| *L9_Serve_Sid*               | Varchar2 (5 Byte)   |                       |
| *L9_Downlink_Volume*         | Number              |                       |
| *L9_Calling_Number*          | Varchar2 (256 Byte) |                       |
| L9_Call_Completion_Code      | Number              |                       |
| *L9_Uplink_Volume*           | Number              |                       |
| *L9_Dialed_Digits*           | Varchar2 (32 Byte)  |                       |
| L9_Toll_Rate_Class           | Varchar2 (1 Byte)   |                       |
| L9_Eha_Indicator             | Varchar2 (1 Byte)   |                       |
| *L9_Ring_Time*               | Number              |                       |
| L9_Toll_Tax                  | Number              |                       |
| L9_Currency_Type             | Varchar2 (2 Byte)   |                       |
| L9_Calling_State             | Varchar2 (2 Byte)   |                       |
| L9_Toll_Item_Id              | Number              |                       |
| L9_Customer_Sub_Type         | Varchar2 (15 Byte)  |                       |
| *L9_Application_Id*          | Varchar2 (64 Byte)  | Used For Brew         |
| L9_Orig_Trans_Id             | Varchar2 (64 Byte)  |                       |
| *L9_Call_Answered_Indicator* | Varchar2 (1 Byte)   |                       |
| L9_Destination_Category      | Varchar2 (6 Byte)   | INTNL = International |
| L9_Surcharge_Amount          | Number              |                       |
| L9_Destination_State_Code    | Varchar2 (2 Byte)   |                       |
| L9_Redirect_Number           | Varchar2 (32 Byte)  |                       |
| L9_Toll_Charge_Code          | Varchar2 (15 Byte)  |                       |
| L9_Customer_Type             | Varchar2 (1 Byte)   |                       |
| *L9_Home_Sid*                | Varchar2 (5 Byte)   |                       |
| L9_Starting_Call_Toll_Period | Varchar2 (10 Byte)  |                       |
| L9_Called_Country            | Varchar2 (3 Byte)   |                       |
| L9_Air_Elapsed_Time          | Number              |                       |
| *L9_Originating_Address*     | Varchar2 (26 Byte)  | Orig Address From Uff |
| L9_Additional_Charge_Tax     | Number              |                       |
| L9_Destination_City_Name     | Varchar2 (30 Byte)  |                       |
| L9_Media_Type                | Varchar2 (1 Byte)   |                       |
| L9_Toll_Period_Name          | Varchar2 (10 Byte)  |                       |
| *L9_Call_Type*               | Varchar2 (1 Byte)   | 1 = International     |
|                              |                     | L= Local (Sms Only)   |
| L9_Rerate_Indicator          | Varchar2 (1 Byte)   |                       |
| L9_Nt_Roaming_Ind            | Varchar2 (1 Byte)   |                       |
| L9_Offer_Instance            | Number              |                       |
| L9_Daily_Surcharge_Ind       | Varchar2 (1 Byte)   |                       |
| *L9_Incollect_Indicator*     | Varchar2 (1 Byte)   | If True Then Its      |
|                              |                     | An Incollect.         |
| L9_Session_Identifier        | Varchar2 (128 Byte) |                       |
| L9_Free_Unit                 | Number              |                       |
| L9_Ext_Trx_Id                | Varchar2 (18 Byte)  |                       |
| *L9_Roaming_Ind*             | Varchar2 (1 Byte)   | Used For Data         |
|                              |                     | 2 = Roaming           |
| L9_Balance_Exp_Date          | Date                |                       |
| L9_Orig_Additional_Chg_Tax   | Number              |                       |
| L9_Method                    | Varchar2 (50 Byte)  |                       |
| L9_Recharge_Id               | Number              |                       |
| L9_Announcement_Param        | Varchar2 (50 Byte)  |                       |
| L9_Reason                    | Varchar2 (10 Byte)  |                       |
| L9_Activity_Amount           | Number              |                       |
| L9_Channel                   | Varchar2 (100 Byte) |                       |
| L9_Blocked_Number_Ind        | Varchar2 (1 Byte)   |                       |
| L9_Remaining_Balance_Amt     | Number              |                       |
| *L9_Min*                     | Varchar2 (10 Byte)  | Msid                  |
| *L9_Equipment_Id*            | Varchar2 (32 Byte)  | Postpaid = Esn        |
|                              |                     | Prepaid = 0           |
| L9_Threshold_Amount          | Number              |                       |
| *L9_Service_Feature*         | Varchar2 (128 Byte) |                       |
| L9_Original_Air_Time_Chg_Amt | Number              |                       |
| L9_Be                        | Number              |                       |
| L9_Charg_Beyond_Cap          | Number              |                       |
| *L9_Is_Online*               | Varchar2 (1 Byte)   | Y = *Pre-Pay*         |
| L9_Volume_Per_Type           | Varchar2 (512 Byte) |                       |
| L9_Units_Beyond_Cap          | Number              |                       |
| L9_Volume_Complex            | Varchar2 (512 Byte) |                       |
| *L9_M2m_Ind*                 | Varchar2 (2 Byte)   | Mobile To Mobile      |
| L9_Balance_Amount            | Number              |                       |
| L9_Calling_Area_Name         | Varchar2 (50 Byte)  |                       |
| *L9_Toll_Free_Ind*           | Varchar2 (1 Byte)   | Y = Toll Free         |
| *L9_Partner_Id*              | Varchar2 (64 Byte)  |                       |
| L9_Ext_Ref_Id                | Varchar2 (64 Byte)  |                       |
| L9_Campaign_Id               | Varchar2 (64 Byte)  |                       |
| L9_Application_Type          | Varchar2 (64 Byte)  |                       |
| L9_Application_Description   | Varchar2 (193 Byte) |                       |
| L9_Charge_Code_Description   | Varchar2 (193 Byte) |                       |
| L9_System_Service            | Varchar2 (4 Byte)   |                       |
| L9_Initiator_Id              | Varchar2 (64 Byte)  |                       |
| L9_Adj_Reason_Cd             | Varchar2 (64 Byte)  |                       |
| L9_Initiator_Type            | Varchar2 (19 Byte)  |                       |
|------------------------------+---------------------+-----------------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
#+BEGIN_LaTeX
\newpage 
#+END_LaTeX
** APE1_ACCUMULATORS
   The accumulation tables sums by event type by customer.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|--------------------------------+---------------------+------------------------|
| *Column Name*                  | *Data Type*         | *Description*          |
|--------------------------------+---------------------+------------------------|
| *Cycle_Code*                   | Number(4,0)         |                        |
| *Cycle_Instance*               | Number(2,0)         | /Cycle Instance = 0/   |
|                                |                     | /Pre-Paid Subscriber/  |
| Customer_Segment               | Number(4,0)         |                        |
| *Customer_Id*                  | Number(10,0)        |                        |
| *Accum_Type_Id*                | Number(9,0)         |                        |
| *Owner_Id*                     | Number(10,0)        | /Same as Subsciber_id/ |
| Owner_Type                     | Char(1 Byte)        |                        |
| Item_Id                        | Number(9,0)         |                        |
| Offer_Instance                 | Number(10,0)        |                        |
| Dimension_Id                   | Number(5,0)         |                        |
| *Cycle_Year*                   | Number(4,0)         |                        |
| Sys_Creation_Date              | Date                |                        |
| Sys_Update_Date                | Date                |                        |
| Operator_Id                    | Number(9,0)         |                        |
| Application_Id                 | Char(6 Byte)        |                        |
| Dl_Service_Code                | Char(5 Byte)        |                        |
| Dl_Update_Stamp                | Number(4,0)         |                        |
| Update_Id                      | Number(9,0)         |                        |
| Version_Id                     | Number(9,0)         |                        |
| Global_Accum_Ind               | Char(1 Byte)        |                        |
| Cross_Cycle_Ind                | Char(1 Byte)        |                        |
| *Accum_Id*                     | Number(9,0)         |                        |
| Rerate_Type                    | Char(1 Byte)        |                        |
| Account                        | Number              |                        |
| *Accum_Charge*                 | Number              |                        |
| *Accum_Chg_Incl_Free_Allw*     | Number              |                        |
| *Accum_Free_Unit*              | Number              |                        |
| *Accum_Unit*                   | Number              |                        |
| Billing_Arrangement            | Number              |                        |
| *Currency_Code*                | Varchar2(3 Byte)    |                        |
| First_Event_Date               | Date                |                        |
| L3_Balance_Amount              | Number              |                        |
| L3_Balance_Status              | Varchar2(1 Byte)    |                        |
| Last_Event_Date                | Date                |                        |
| *Number_Of_Events*             | Number              |                        |
| *Number_Of_Free_Events*        | Number              |                        |
| *Number_Of_Rolled_Cycles*      | Number              |                        |
| Offer_Id                       | Number              |                        |
| Pi_Role                        | Number              |                        |
| Pi_Status                      | Number              |                        |
| Quota                          | Number              |                        |
| Quota_Per_Period               | Varchar2(512 Byte)  |                        |
| Remaining_Quota_Per_Period     | Varchar2(512 Byte)  |                        |
| Remain_Quota_Per_Month_Period  | Varchar2(512 Byte)  |                        |
| Rolled_Previous_Cyc_Per_Period | Varchar2(512 Byte)  |                        |
| Rolled_Quota_From_Previous_Cyc | Number              |                        |
| Uom                            | Varchar2(1 Byte)    |                        |
| Utilized_Quota_Per_Period      | Varchar2(512 Byte)  |                        |
| Utilize_Quota_Per_Month_Period | Varchar2(512 Byte)  |                        |
| Billing_Resource_Type          | Varchar2(16 Byte)   |                        |
| Billing_Resource_Id            | Varchar2(63 Byte)   |                        |
| Toll_Tax                       | Number              |                        |
| L9_Accum_Chg_Incl_Allw_Cmplx   | Varchar2(512 Byte)  |                        |
| L9_Accum_Credit                | Number              |                        |
| L9_Accumulated_Chg_Cmplx       | Varchar2(512 Byte)  |                        |
| L9_Overage_Cap                 | Number              |                        |
| L9_Accum_Free_Unit_Cmplx       | Varchar2(512 Byte)  |                        |
| L9_Number_Of_Events_Cmplx      | Varchar2(512 Byte)  |                        |
| L9_Number_Free_Events_Cmplx    | Varchar2(512 Byte)  |                        |
| L9_Accum_Unit_Cmplx            | Varchar2(512 Byte)  |                        |
| L9_Cap_Exceed                  | Varchar2(1 Byte)    |                        |
| L9_Number_Of_Credit_Events     | Number              |                        |
| Air_Tax                        | Number              |                        |
| L9_Tot_Units_Above_Cap         | Varchar2(512 Byte)  |                        |
| Accum_Duration                 | Number              |                        |
| L9_Call_Direction              | Varchar2(1 Byte)    |                        |
| L9_Roaming_Ind                 | Varchar2(1 Byte)    |                        |
| L9_Tax_Change_Date             | Varchar2(25 Byte)   |                        |
| L9_Serve_Sid                   | Varchar2(5 Byte)    |                        |
| L9_Eha_Indicator               | Varchar2(1 Byte)    |                        |
| L9_Pay_Channel                 | Number              |                        |
| L9_Customer_Sub_Type           | Varchar2(15 Byte)   |                        |
| L9_Be                          | Number              |                        |
| L9_Customer_Type               | Varchar2(1 Byte)    |                        |
| L9_Called_Country              | Varchar2(3 Byte)    |                        |
| *L9_Payment_Category*          | Varchar2(4 Byte)    | /Post Or Pre/          |
| L9_Billing_Arrangement         | Number              |                        |
| L9_Volume_Accumulation         | Number              |                        |
| L9_Offer_Level                 | Varchar2(1 Byte)    |                        |
| L9_Full_Cap                    | Number              |                        |
| L9_Charge_Type                 | Varchar2(3 Byte)    |                        |
| L9_Prev_Add_Chg_Cmplx2         | Varchar2(512 Byte)  |                        |
| L9_Prev_Add_Chg_Cmplx1         | Varchar2(512 Byte)  |                        |
| L9_Prev_Add_Chg_Cmplx3         | Varchar2(512 Byte)  |                        |
| L9_Prev_Add_Chg_Cmplx          | Varchar2(4000 Byte) |                        |
| L9_Acc_Usage_Before_Eom        | Number              |                        |
| L9_Acc_Usage_After_Eom         | Number              |                        |
| L9_Msisdn                      | Varchar2(256 Byte)  |                        |
| L9_Cap_To_Be_Used              | Number              |                        |
| L9_Charge_Code                 | Varchar2(15 Byte)   |                        |
| L9_Offer_Type                  | Varchar2(255 Byte)  |                        |
| L9_Accum_Chg_Beyo_Cap_Cmplx    | Varchar2(512 Byte)  |                        |
| *L9_Ctn*                       | Varchar2(10 Byte)   |                        |
| L9_Media_Type                  | Varchar2(1 Byte)    |                        |
| L9_Utilized_Quota_Cmplx        | Varchar2(512 Byte)  |                        |
| L9_First_Threshold_Sent_Ind    | Varchar2(1 Byte)    |                        |
| L9_Remain_Quota_Cmplx          | Varchar2(512 Byte)  |                        |
| L9_Used_Quota                  | Number              |                        |
| L9_Last_Threshold_Sent         | Number              |                        |
| L9_Charge_Rev_Code             | Varchar2(2 Byte)    |                        |
| L9_Is_New_Scale                | Varchar2(1 Byte)    |                        |
| L9_Is_First_Notif              | Varchar2(1 Byte)    |                        |
| L9_Notified_Ctn                | Varchar2(32 Byte)   |                        |
| L9_Unlimited_Ind               | Varchar2(1 Byte)    |                        |
| Proration_Factor               | Number              |                        |
| L9_Curr_Leg                    | Number              |                        |
| L9_Num_Of_Period               | Number              |                        |
| L9_Is_Notif_Sent               | Varchar2(1 Byte)    |                        |
| L9_Period_Name                 | Varchar2(255 Byte)  |                        |
| L9_Volume_Per_Leg              | Varchar2(4000 Byte) |                        |
| L9_Cycle_Start_Date_Cmplx      | Varchar2(512 Byte)  |                        |
| Disable_Notif_Ind              | Varchar2(1 Byte)    |                        |
| L9_Notif_Elig                  | Varchar2(1 Byte)    |                        |
| L9_Is_Second_Notif             | Varchar2(1 Byte)    |                        |
| L9_Limit_Quota_Change_Cmplx    | Varchar2(512 Byte)  |                        |
| Agr_Level_Offer_Inst           | Varchar2(512 Byte)  |                        |
| L9_Last_Notif_Index            | Number              |                        |
| L9_Second_Notif_Thresh         | Number              |                        |
| Offer_Exp_Date                 | Date                |                        |
| L9_Second_Threshold            | Number              |                        |
| L9_Accum_Free_Unts_Beyo_Cap    | Number              |                        |
| Offer_Eff_Date                 | Date                |                        |
| L9_First_Threshold             | Number              |                        |
| L9_Second_Threshold_Sent_Ind   | Varchar2(1 Byte)    |                        |
| L9_Limit_Quota_Cmplx           | Varchar2(512 Byte)  |                        |
| L9_First_Notif_Thresh          | Number              |                        |
| L9_Remaining_Bucket            | Number              |                        |
| L9_Class_Code                  | Varchar2(12 Byte)   |                        |
| L9_Ivr_Ann_Code                | Varchar2(50 Byte)   |                        |
| L9_Accum_Add_Tax_Amt           | Number              |                        |
| L9_Accum_Tax_Amt               | Number              |                        |
| L9_Days_Of_Daily_Data          | Number              |                        |
| L9_Calling_Area_Name           | Varchar2(50 Byte)   |                        |
| Expiration_Date                | Date                |                        |
| L9_Disclaimer_Sent             | Varchar2(1 Byte)    |                        |
| L9_Is_Roam_Data_Speed_Notif    | Varchar2(1 Byte)    |                        |
| L9_Geocode                     | Varchar2(10 Byte)   |                        |
| L9_Is_Total_Data_Speed_Notif   | Varchar2(1 Byte)    |                        |
| L9_Roam_Volume_Accumulation    | Number              |                        |
| L9_Roam_Speed_Limit            | Number              |                        |
| L9_Indicator                   | Varchar2(1 Byte)    |                        |
| L9_Charge_Accumulation         | Number              |                        |
| L9_Pp_Changed_Ind              | Varchar2(1 Byte)    |                        |
| L9_First_Level                 | Varchar2(512 Byte)  |                        |
| L9_Grp_Level_Offer_Inst        | Number              |                        |
| L9_Group_Offer_Id              | Number              |                        |
|--------------------------------+---------------------+------------------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
#+BEGIN_LaTeX
\newpage 
#+END_LaTeX
** BPT Tables
      The *Business Process Tables* are the Tops equivalent to the
      reference tables in *CARES*. The following is the list of all
      *BPT* tables that we are responsible for:
*** ADJ1_OUTCOL_PROVIDER
    A list of all vendors we have an agreement with for out-collects.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l

|-------------------+--------------------+---------------|
| *Column Name*     | *Data Type*        | *Description* |
|-------------------+--------------------+---------------|
| Provider_Id       | Number(18,0)       |               |
| Customer_Id       | Number(10,0)       |               |
| Sys_Creation_Date | Date               |               |
| Sys_Update_Date   | Date               |               |
| Operator_Id       | Number(9,0)        |               |
| Application_Id    | Char(6 Byte)       |               |
| Dl_Service_Code   | Char(5 Byte)       |               |
| Dl_Update_Stamp   | Number(4,0)        |               |
| Cycle_Code        | Number(4,0)        |               |
| Group_Id          | Number(9,0)        |               |
| Min_Time_To_Send  | Number(4,0)        |               |
| Max_Recs_In_File  | Number(9,0)        |               |
| Send_Empty_Notif  | Char(1 Byte)       |               |
| Expiration_Date   | Date               |               |
| Effective_Date    | Date               |               |
| Provider_Desc     | Varchar2(256 Byte) |               |
| Resource_Type     | Number(4,0)        |               |
|-------------------+--------------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** ADJ9_TIME_ZONE_REF
    Time zone parameters.

*** AGD1_RESOURCES_REF
    Lists *TOPS* resources used by Turbo charging very important to map *SIDS* to there offers.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX
#+ATTR_LaTeX: :environment longtable :align l|l|l
|-----------------------+-------------------+---------------|
| *Column Name*         | *Data Type*       | *Description* |
|-----------------------+-------------------+---------------|
| Resource_Segment      | Number(4,0)       |               |
| Resource_Value        | Varchar2(63 Byte) |               |
| Resource_Type         | Number(4,0)       |               |
| Effective_Date        | Date              |               |
| Sys_Creation_Date     | Date              |               |
| Sys_Update_Date       | Date              |               |
| Operator_Id           | Number(9,0)       |               |
| Application_Id        | Char(6 Byte)      |               |
| Dl_Service_Code       | Char(5 Byte)      |               |
| Dl_Update_Stamp       | Number(4,0)       |               |
| Update_Id             | Number(18,0)      |               |
| Expiration_Date       | Date              |               |
| Subscriber_Id         | Number(10,0)      |               |
| Sub_Status            | Char(1 Byte)      |               |
| Routing_Policy_Id     | Number(9,0)       |               |
| Payment_Category      | Char(4 Byte)      |               |
| Customer_Id           | Number(10,0)      |               |
| Bill_Cycle            | Number(4,0)       |               |
| New_Bill_Cycle        | Number(4,0)       |               |
| Chg_Cyc_Req_Date      | Date              |               |
| Large_Cust_Ind        | Char(1 Byte)      |               |
| Resource_Hash_Value   | Number(10,0)      |               |
| Subscriber_Hash_Value | Number(10,0)      |               |
|-----------------------+-------------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** APE1_SUBSCR_DATA_REF
    List subscriber reference data. (Customer data)
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|-----------------------+--------------+---------------|
| *Column Name*         | *Data Type*  | *Description* |
|-----------------------+--------------+---------------|
| Cycle_Code            | Number(4,0)  |               |
| Customer_Segment      | Number(4,0)  |               |
| Subscriber_Id         | Number(10,0) |               |
| Sys_Creation_Date     | Date         |               |
| Sys_Update_Date       | Date         |               |
| Operator_Id           | Number(9,0)  |               |
| Application_Id        | Char(6 Byte) |               |
| Dl_Service_Code       | Char(5 Byte) |               |
| Dl_Update_Stamp       | Number(4,0)  |               |
| Update_Id             | Number(18,0) |               |
| Customer_Id           | Number(10,0) |               |
| Be                    | Number(9,0)  |               |
| Currency_Id           | Char(3 Byte) |               |
| Subscriber_Hash_Value | Number(10,0) |               |
|-----------------------+--------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** APE1_SUBSCR_OFFERS_REF
         List subscriber offers. (Customer data)
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|-----------------------+-------------------+---------------|
| *Column Name*         | *Data Type*       | *Description* |
|-----------------------+-------------------+---------------|
| Cycle_Code            | Number(4,0)       |               |
| Customer_Segment      | Number(4,0)       |               |
| Subscriber_Id         | Number(10,0)      |               |
| Offer_Id              | Number(9,0)       |               |
| Offer_Instance        | Number(10,0)      |               |
| Offer_Eff_Date        | Date              |               |
| Sys_Creation_Date     | Date              |               |
| Sys_Update_Date       | Date              |               |
| Operator_Id           | Number(9,0)       |               |
| Application_Id        | Char(6 Byte)      |               |
| Dl_Service_Code       | Char(5 Byte)      |               |
| Dl_Update_Stamp       | Number(4,0)       |               |
| Update_Id             | Number(18,0)      |               |
| Offer_Exp_Date        | Date              |               |
| Source_Offer_Agr_Id   | Number(10,0)      |               |
| Source_Offer_Instance | Number(10,0)      |               |
| Eff_Act_Code_Pror     | Varchar2(25 Byte) |               |
| Exp_Act_Code_Pror     | Varchar2(25 Byte) |               |
|-----------------------+-------------------+---------------|
#+BEGIN_LaTeX
\normalsize
\newpage
#+END_LaTeX
*** PRM_REP_CARR_INFO
    Defines the Carrier (TADIG[fn:1]) Code used in IN and OUTCOLLECTS.
    The below query shows the company name and carrier code.

   :  SELECT DISTINCT carr_name, carr_cd
   :    FROM prm_app.PRM_REP_CARR_INFO
   :  ORDER BY carr_name;

*** M19_MIN_LR
         Contains the *USCC* MIN (MSID) block ranges and their *SID*
         code. The Block Ranges are listed in the *Technical Data Sheet*
         from *Syniverse*. This only contains *USCC* MINS only. For
         foreign carriers see the *VISITOR_MIN_LR*.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|-------------------+------------------+---------------|
| *Column Name*     | *Data Type*      | *Description* |
|-------------------+------------------+---------------|
| *Min_Blk*         | Number(6,0)      |               |
| *From_Line_Range* | Number(4,0)      |               |
| *To_Line_Range*   | Number(4,0)      |               |
| Effective_Date    | Date             |               |
| Sys_Creation_Date | Date             |               |
| Sys_Update_Date   | Date             |               |
| Operator_Id       | Number(9,0)      |               |
| Application_Id    | Char(6 Byte)     |               |
| Dl_Service_Code   | Char(5 Byte)     |               |
| Dl_Update_Stamp   | Number(4,0)      |               |
| *Npa_Type*        | Char(1 Byte)     | C = Postpaid  |
|                   |                  | T = Prepaid   |
| *Sids*            | Varchar2(5 Byte) |               |
| Expiration_Date   | Date             |               |
|-------------------+------------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** VISITOR_MIN_LR
         This table is created via a program and contains all of our
         roaming partners MIN/SID block ranges. It is located on the
         *BRMPRD* database.

*** MI1_STLMNT_CONTRACT
         The Settlement Contracts table contains one record for each
         contract. A contract is defined as the entity to which a group
         of *SIDS* belongs, whose common attribute is the
         clearinghouse-related Net Settlement bank account. This usually
         means that all the *SIDS* that belong to a settlement contract
         are part of one operating company.

*** MF1_OUTCOL_DESTINATION
         This table includes detailed information on every destination.
         A destination represents a target of Out-collect calls (such as
         a clearinghouse). The destination of every roamer call is
         determined according to the Home *SID* value of that call.

*** MF1_OUTCOL_SID_PAIR
         Defines out-collect roaming agreement between *SID* pair.
         Originating category is retrieve from the table that is used
         later on for service filter determination. *INCOL_SID_PAIR*
         and *SID* tables are also used by Acquisition & Formatting.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|-----------------------+-------------------+---------------|
| *Column Name*         | *Data Type*       | *Description* |
|-----------------------+-------------------+---------------|
| Serve_Sid             | Char(5 Byte)      |               |
| Home_Sid              | Char(5 Byte)      |               |
| Effective_Date        | Date              |               |
| Sys_Creation_Date     | Date              |               |
| Sys_Update_Date       | Date              |               |
| Operator_Id           | Number(9,0)       |               |
| Application_Id        | Char(6 Byte)      |               |
| Dl_Service_Code       | Char(5 Byte)      |               |
| Dl_Update_Stamp       | Number(4,0)       |               |
| Expiration_Date       | Date              |               |
| Outcol_Dest_Cd        | Char(6 Byte)      |               |
| Cre_Daily_Surcg_Ind   | Char(1 Byte)      |               |
| Daily_Surcharge_Amt   | Number(18,3)      |               |
| Misc_Schg_Ind         | Char(1 Byte)      |               |
| Misc_Schg_Rate        | Number(18,3)      |               |
| Misc_Schg_Measure_Ind | Char(1 Byte)      |               |
| Misc_Descriptor       | Char(2 Byte)      |               |
| Misc_Schg_Desc        | Varchar2(50 Byte) |               |
| Cycle_Code            | Number(4,0)       |               |
| Priority              | Number(5,0)       |               |
| Num_Of_Rec_To_Commit  | Number(9,0)       |               |
| Partition_Id          | Number(4,0)       |               |
| Group_Id              | Number(4,0)       |               |
| Agreement_Id          | Number(9,0)       |               |
|-----------------------+-------------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** MI1_RETURN_RRC
         Used for *InCollect* *CIBER* processing. Contains the various
         reasons why an *InCollect* file can be returned.

*** MI1_REJECT_RRC
         Used for *InCollect* *CIBER* processing. Contains the various
         reasons why an *InCollect* file can be rejected.
:CLOSET:
 *** MI9_NA_CONV
         This maybe another version of the *ADJ9_TIME_ZONE_REF*
         table, very similar.
:END:
#+BEGIN_LaTeX
\newpage
#+END_LaTeX
** (BPT) EPC Tables
         These tables are included in the *EPC* dump which happens once
         or twice a month, no hot-fix is needed unless it 
         needs to be in
         production right away.
*** PC9_SID
            One of the most important reference tables used, contains
            all the information for all the *SIDS* for
            all the companies we have a contract with.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|----------------------+-------------------+---------------|
| *Column Name*        | *Data Type*       | *Description* |
|----------------------+-------------------+---------------|
| Cindex               | Number(9,0)       |               |
| *Sids*               | Varchar2(5 Byte)  |               |
| Effective_Date       | Date              |               |
| Sid_Desc             | Varchar2(50 Byte) |               |
| Sid_Commercial_Name  | Varchar2(50 Byte) |               |
| Time_Zone_Code       | Varchar2(2 Byte)  |               |
| Setlmnt_Contract_Cd  | Varchar2(3 Byte)  |               |
| Intracomp_Ind        | Varchar2(3 Byte)  |               |
| Sid_State            | Varchar2(2 Byte)  |               |
| Sid_Country          | Varchar2(3 Byte)  |               |
| Sid_City             | Varchar2(30 Byte) |               |
| Sid_Location_Cd      | Char(1 Byte)      |               |
| Outcol_Dest_Cd       | Varchar2(6 Byte)  |               |
| Currency_Code        | Varchar2(2 Byte)  |               |
| Band_Code            | Char(1 Byte)      |               |
| Geo_Code             | Varchar2(9 Byte)  |               |
| Originating_Category | Varchar2(6 Byte)  |               |
| Expiration_Date      | Date              |               |
| Incorporate_Ind      | Char(1 Byte)      |               |
|----------------------+-------------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
*** PC9_SID_LIST
            A description of each *SID* found in the *PC9_SID* table.
            When the *SID* table is updated this table needs to be
            updated as well.

*** PC9_SPECIAL_NUMBER
            Contains a list of all the special numbers, numbers that can
            be dropped (no charge), toll or air time free.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|---------------------------+--------------------+-----------------|
| *Column Name*             | *Data Type*        | *Description*   |
|---------------------------+--------------------+-----------------|
| Special_Number            | Varchar2(10 Byte)  |                 |
| Call_Direction            | Char(1 Byte)       | 1 = Incoming    |
|                           |                    | 2 = Outgoing    |
|                           |                    | 5 = Both        |
| Home_Roam_Ind             | Char(1 Byte)       | 1 = Home        |
|                           |                    | 2 = Roam        |
|                           |                    | 3 = Both        |
| Call_Source               | Varchar2(4 Byte)   | V = Voice       |
| Effective_Date            | Date               |                 |
| *Air_Time_Ind*            | Char(1 Byte)       | N = Air Time    |
|                           |                    | Is Free         |
| Toll_Special_Number_Group | Varchar2(255 Byte) |                 |
| *Drop_Call_Ind*           | Char(1 Byte)       | Y = This Record |
|                           |                    | Will Be Dropped |
| Special_Number_Type       | Char(1 Byte)       |                 |
| Service_Filter            | Varchar2(15 Byte)  |                 |
| *Toll_Free_Ind*           | Char(1 Byte)       | Y = No Toll     |
|                           |                    | Will Be Charged |
| Bl_Call_Dest_State        | Varchar2(2 Byte)   |                 |
| Bl_Call_Dest_City         | Varchar2(30 Byte)  |                 |
| Automatically_Authorized  | Char(1 Byte)       |                 |
| Description               | Varchar2(50 Byte)  |                 |
| Expiration_Date           | Date               |                 |
|---------------------------+--------------------+-----------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** PC9_SERVE_AREA_TO_SID
            Maps the service area to (/all maybe to strong a term/)
            supported *SIDS*.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|-----------------+-------------------+---------------|
| *Column Name*   | *Data Type*       | *Description* |
|-----------------+-------------------+---------------|
| Serve_Area      | Varchar2(50 Byte) |               |
| *Sids*          | Varchar2(5 Byte)  |               |
| Effective_Date  | Date              |               |
| Expiration_Date | Date              |               |
|-----------------+-------------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** PC9_COUNTRY_CODE
            List of country code, country description, NANP indicator.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|---------------+-------------------+---------------|
| *Column Name* | *Data Type*       | *Description* |
|---------------+-------------------+---------------|
| Cindex        | Number(9,0)       |               |
| Country_Code  | Varchar2(3 Byte)  |               |
| Description   | Varchar2(30 Byte) |               |
| Nanp_Ind      | Char(1 Byte)      |               |
|---------------+-------------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
*** PC9_INCOL_SID_PAIR
            Defines *InCollect* roaming agreement between *SID* pair.
            Originating category is retrieved from the table and that is used
            later on for service filter determination. INCOL_SID_PAIR
            and *SID* tables are also used by Acquisition & Formatting.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|----------------------------+------------------+---------------|
| *Column Name*              | *Data Type*      | *Description* |
|----------------------------+------------------+---------------|
| Serve_Sid                  | Varchar2(5 Byte) |               |
| Home_Sid                   | Varchar2(5 Byte) |               |
| Effective_Date             | Date             |               |
| Originating_Category       | Varchar2(6 Byte) |               |
| Incol_Not_Valid_Act        | Char(1 Byte)     |               |
| Agr_Peak_Rate              | Number(18,3)     |               |
| Agr_Off_Peak_Rate          | Number(18,3)     |               |
| Agr_Schg_Amt               | Number(18,3)     |               |
| Toll_Agr_Type              | Char(1 Byte)     |               |
| Agr_Toll_Rate              | Number(18,3)     |               |
| Incol_Tl_Nvalid_Ac         | Char(1 Byte)     |               |
| Daily_Surcharge_Indication | Char(1 Byte)     |               |
| Expiration_Date            | Date             |               |
|----------------------------+------------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** PC9_CELL_SITE_TO_CELL_ID
    Cell site name to number ID.

*** PC9_SERVICE_FILTER
    This table as well and *PC3_SERVICE_FILTER_LIST* are used by the *RLC*, to define the service filter 
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|----------------------+-------------------+---------------|
| *Column Name*        | *Data Type*       | *Description* |
|----------------------+-------------------+---------------|
| Be                   | Number(2,0)       |               |
| Call_Source          | Varchar2(4 Byte)  |               |
| Service_Type         | Char(1 Byte)      |               |
| Originating_Category | Varchar2(5 Byte)  |               |
| Destination_Category | Varchar2(5 Byte)  |               |
| Call_Direction       | Char(1 Byte)      |               |
| Effective_Date       | Date              |               |
| Service_Filter       | Varchar2(15 Byte) |               |
| Description          | Varchar2(30 Byte) |               |
| Expiration_Date      | Date              |               |
|----------------------+-------------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** PC3_SERVICE_FILTER_LIST
    This table as well as *PC3_SERVICE_FILTER* are used by
    the *RLC* to rate the event.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX
#+ATTR_LaTeX: :environment longtable :align l|l|l
|----------------+-------------------+---------------|
| *Column Name*  | *Data Type*       | *Description* |
|----------------+-------------------+---------------|
| Service_Index  | Number(9,0)       |               |
| Service_Filter | Varchar2(15 Byte) |               |
| Description    | Varchar2(50 Byte) |               |
|----------------+-------------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
:CLOSET:            
 *** PC9_DEST_CATEGORY
            Lists all the possible destination categories.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|----------------------+--------------------+---------------|
| *Column Name*        | *Data Type*        | *Description* |
|----------------------+--------------------+---------------|
| Cindex               | Number(9,0)        |               |
| Destination_Category | Varchar2(6 Byte)   |               |
| Description          | Varchar2(101 Byte) |               |
|----------------------+--------------------+---------------|
:END:

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
           
*** PC9_NUMBER_ANALYSIS
            Used to analyze telephone prefix's. Mostly used to determine
            International calls.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|--------------------------+-------------------+---------------|
| *Column Name*            | *Data Type*       | *Description* |
|--------------------------+-------------------+---------------|
| Prefix                   | Varchar2(30 Byte) |               |
| Station_Type             | Varchar2(30 Byte) |               |
| Effective_Date           | Date              |               |
| Destination_Category     | Varchar2(6 Byte)  |               |
| Automatically_Authorized | Char(1 Byte)      |               |
| Roaming_Dest_Category    | Varchar2(6 Byte)  |               |
| Drop_Ind                 | Char(1 Byte)      |               |
| Country_Code             | Varchar2(3 Byte)  |               |
| Description              | Varchar2(30 Byte) |               |
| Network_Call_Type        | Char(1 Byte)      |               |
| Expiration_Date          | Date              |               |
|--------------------------+-------------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
:CLOSET:
 *** PC9_ORIG_CATEGORY
    List all possible originating categories.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|----------------------+--------------------+---------------|
| *Column Name*        | *Data Type*        | *Description* |
|----------------------+--------------------+---------------|
| Cindex               | Number(9,0)        |               |
| Originating_Category | Varchar2(6 Byte)   |               |
| Description          | Varchar2(101 Byte) |               |
|----------------------+--------------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

 *** PC9_ROAMING_DEST_CATEGORY
     List all roaming destination categories.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|-----------------------+--------------------+---------------|
| *Column Name*         | *Data Type*        | *Description* |
|-----------------------+--------------------+---------------|
| Cindex                | Number(9,0)        |               |
| Roaming_Dest_Category | Varchar2(6 Byte)   |               |
| Description           | Varchar2(101 Byte) |               |
|-----------------------+--------------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
:END:
*** PC1_CHARGE_CODE
    Lists and describes the supported charge codes.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|-----------------+---------------------+---------------|
| *Column Name*   | *Data Type*         | *Description* |
|-----------------+---------------------+---------------|
| Charge_Code_Seq | Number(5,0)         |               |
| Charge_Code     | Varchar2(15 Byte)   |               |
| Description     | Varchar2(4000 Byte) |               |
| Charge_Entity   | Varchar2(60 Byte)   |               |
| Revenue_Type    | Char(2 Byte)        |               |
|-----------------+---------------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
*** PC9_NANP_NPA_LIST
    The NPA (Area Code) and the country description.
*** PC9_LOCAL_TOLL_FREE_AREA
    Lists the relationship between *SIDS* and NPA ranges where the toll is free.
*** PC9_IP_ADDR_LIST
    This contains the list of all of the pre-paid IP's. When a new IP is going to be used for pre-pay, it needs to be added to this table. Otherwise it will show up as roaming.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|---------------+--------------------+---------------|
| *Column Name* | *Data Type*        | *Description* |
|---------------+--------------------+---------------|
| cindex        | number(9,0)        |               |
| address       | varchar2(256 byte) | i.p address   |
| description   | varchar2(101 byte) |               |
|---------------+--------------------+---------------|
#+BEGIN_LaTeX
\normalsize
\newpage
#+END_LaTeX 

#+BEGIN_LaTeX
\newpage 
\begin{landscape}  
#+END_LaTeX
* AEM
   *AEM* gets the Turbo-Charging errors from the
   *APE1_REJECTED_EVENTS* table. For *A&F* they are in the
   *EM1_RECORD* table. Since there are so many columns in the
   *EM1_RECORD* table we must limit our query's to the following
   columns:

 [[file:docs/EM1%20Query's][EM1 Queries]]

** AEM Error Summary
    List of error codes.
 
#+BEGIN_LaTeX
\scriptsize
#+END_LaTeX
#+ATTR_LaTeX: :environment longtable :align l|l|l|l|l|l|l|l|l
|--------------+------------+-----------+-----------+-----------+---------+------------------------------------------------------------------------------------|
| *ERROR CODE* | *POSTPAID* | *PREPAID* | *RECYCLE* | *REGUIDE* | *PURGE* | *COMMENTS*                                                                         |
|--------------+------------+-----------+-----------+-----------+---------+------------------------------------------------------------------------------------|
|        30728 | X          |           | X         |           | X       | Cannot be fixed WA in place.                                                       |
|        30724 | X          |           |           |           | X       | Technical non-usage events.                                                        |
|        30712 | X          | X         |           | X         | X       | Guiding error.                                                                     |
|        30263 | X          | X         |           |           | X       | Open Remedy against Amdocs to handle error as NON-BAU or against                   |
|              |            |           |           |           |         | IS Ops - Bill Cycle Management when handled by Incident Management.                |
|              |            |           |           |           |         | Large charge issue where TC is not down during EPC dump.                           |
|        30257 | X          | X         |           |           | X       | Open Remedy against Amdocs for NON-BAU postpaid errors.  BAU prepaid               |
|              |            |           |           |           |         | events with junk in l9_called_number can be purged, because that is                |
|              |            |           |           |           |         | what the user dialed, ref  textjunk in the called number field.msg                 |
|        30249 |            | X         |           |           | X       | Can be caused by recycling non-recyclable errors.  See error analysis.             |
|        30232 |            | X         |           |           | X       | Valid reject that cannot be fixed by a WA.                                         |
|        30219 | X          | X         | X         |           | X       | Postpaid are recycled until purged.  Prepaid are purged.                           |
|        30218 | X          | X         | X         |           | X       | Postpaid are recycled until purged.  Prepaid are purged.                           |
|        30209 | X          | X         |           | X         | X       | Open Remedy against Amdocs to handle error as NON-BAU or against                   |
|              |            |           |           |           |         | IS Ops - Bill Cycle Management when handled by Incident Management.                |
|              |            |           |           |           |         | Large charge issue where TC is not down during EPC dump.                           |
|        30206 | X          | X         | X         |           | X       | Open Remedy against Amdocs to handle error as NON-BAU or against                   |
|              |            |           |           |           |         | IS Ops - Bill Cycle Management when handled by Incident Management.                |
|              |            |           |           |           |         | Large charge issue where TC is not down during EPC dump.                           |
|        30203 |            | X         |           |           | X       | Zero byte LTE events.  None since 03/2015                                          |
|        30109 | X          |           |           |           | X       | IF offer is missing from CSM_OFFER open RT for EPC,                                |
|              |            |           |           |           |         | if not open Remedy against Amdocs.                                                 |
|              |            |           |           |           |         |                                                                                    |
|        10060 |            | X         |           |           | X       | First received on 20170116:  Open Remedy against Amdocs.                           |
|              |            |           |           |           |         | Prepaid online event rejected due to the EOD maintenance.                          |
|              |            |           |           |           |         | Remedy 03416730                                                                    |
|        10040 | X          | X         |           | X         | X       | Guiding error                                                                      |
|        10037 | X          | X         |           | X         | X       | Guiding error                                                                      |
|        10036 | X          | X         |           | X         | X       | NON-BAU are re-guided and BAU are purged.                                          |
|              |            |           |           |           |         | See AEM Error Analysis History - TC Errors.docx  for rejected 'vali' events.       |
|        10035 | X          | X         |           | X         | X       | Guiding error                                                                      |
|        10025 |            | X         |           |           | X       | Events are rejected, because of failed prepaid replenishments                      |
|              |            |           |           |           |         | and cannot be recycled.                                                            |
|         6001 |            | X         | X         |           | X       | Follow AEM Error Analysis History steps.  Recycle when carrier id is added by EPC. |
|         6000 | X          | X         | X         |           | X       | Open Remedy against NDCII-DCS - Switch Data Coll (Mediation) for postpaid.         |
|              |            |           |           |           |         | Prepaid can be purged.  Recycle when fix is deployed.                              |
|              |            |           |           |           |         |                                                                                    |
|         3000 | X          | X         | X         |           | X       | NON-BAU: Open Remedy against TOPS Configuration for "Event is rejected due to not  |
|              |            |           |           |           |         | found value 175 in table Incol SID pair".  BAU:  There is also a known special     |
|              |            |           |           |           |         | number issue that can be purged.                                                   |
|         1083 | X          |           | X         |           | X       | Open Remedy against Inter-carrier Services and recycle once added.                 |
|         1081 | X          | X         |           |           | X       | These are valid rejects and can be purged                                          |
|         1032 |            | X         |           |           | X       | Never investigated                                                                 |
|         1031 | X          | X         |           |           | X       | Check with Nidal Elhrisse then if needed Open Remedy against EPC.                  |
|              |            |           |           |           |         | See AEM Error Analysis History - TC Errors.docx  Events with google-content etc.   |
|              |            |           |           |           |         | can be ignored, because the project ended on 11/20/2015.                           |
|              |            |           |           |           |         | See   EOL spreadsheet 102915.xlsx                                                  |
|         1030 |            | X         |           |           | X       | Insufficient balance                                                               |
|         1019 |            | X         |           |           | X       | Technical non-usage events                                                         |
|         1013 |            | X         |           |           | X       | Balance is already opened                                                          |
|         1012 | X          | X         |           | X         | X       | Open Remedy against Amdocs for postpaid usage charge event types for active        |
|              |            |           |           |           |         | subscribers and purged the rest.                                                   |
|              |            |           |           |           |         |                                                                                    |
|         1007 |            | X         |           |           | X       | Balance is not yet open                                                            |
|         1003 |            | X         |           |           | X       | Insufficient balance                                                               |
|         1002 |            | X         |           |           | X       | Insufficient balance                                                               |
|         1001 |            | X         |           |           | X       | Balance is expired                                                                 |
|         1000 |            | X         |           |           | X       | Balance is closed                                                                  |
|          103 | X          |           |           | X         | X       | System errors. Re-guided every day.                                                |
|          102 | X          |           |           | X         | X       | System errors. Re-guided every day.                                                |
|          101 | X          | X         |           | X         | X       | System errors. Postpaid re-guided every day.  Prepaid purged every day.            |
|              |            |           |           |           |         |                                                                                    |
|--------------+------------+-----------+-----------+-----------+---------+------------------------------------------------------------------------------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

** EM1_RECORD
    The EM1 record database is the database used by *AEM*, To see the columns within the EM1_RECORD look at the *EM1_STREAM_STREAM_MAP@PTE2AEM* table.
    Click on the link provided below to see an example on how to query this table.
	 [[file:///home/dbalchen/workspace/CommonPlace/docs/em1_example.sql][EM1_RECORD Example]]

#+BEGIN_LaTeX
\end{landscape} 
\newpage
#+END_LaTeX
* APRM
   *Amdocs Partner Relationship Module* is a *TC* submodule that handles all /Incollect/ and /Outcollect/ wholesale rating. See *APRM* tables for further information.
** APRM Tables
*** CDMA USC_ROAM_EVNTS
    Used for CDMA Incollect/Outcollect Voice and data files.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|--------------------+--------------------+----------------|
| *Name*             | *Data Type*        | *Description*  |
|--------------------+--------------------+----------------|
| Air_Chrg_Amt       | Number (18,5)      |                |
| Application_Id     | Char (6 Byte)      |                |
| Au_Id              | Number (9)         |                |
| Bp_Start_Date      | Date               |                |
| Carrier_Cd         | Varchar2 (20 Byte) |                |
| Ciber_File_Name_1  | Varchar2 (50 Byte) |                |
| Ciber_File_Name_2  | Varchar2 (50 Byte) |                |
| Dl_Service_Code    | Char (5 Byte)      |                |
| Dl_Update_Stamp    | Number (4)         |                |
| Edr_Id             | Number (11)        |                |
| Event_Date         | Date               |                |
| Event_Id           | Number (4)         |                |
| Event_Type         | Varchar2 (20 Byte) |                |
| File_Report_Period | Date               |                |
| Generated_Rec      | Number (4)         |                |
| Geo_Code           | Varchar2 (10 Byte) |                |
| Home_Company       | Varchar2 (20 Byte) |                |
| Home_Sid           | Char (5 Byte)      |                |
| Ntwrk_Roam_Ind     | Char (1 Byte)      |                |
| Operator_Id        | Number (9)         |                |
| Orig_Bp            | Date               |                |
| Originating_Id     | Char (20 Byte)     |                |
| Other_Company      | Varchar2 (20 Byte) |                |
| Prod_Id            | Number (4)         |                |
| Serve_Company      | Varchar2 (20 Byte) |                |
| Serve_Sid          | Char (5 Byte)      |                |
| Subscriber_Id      | Char (10 Byte)     |                |
| Surcharge_Amount   | Number (18,5)      |                |
| Surcharge_Ind      | Char (1 Byte)      |                |
| Sys_Creation_Date  | Date               |                |
| Sys_Update_Date    | Date               |                |
| Terminating_Id     | Char (20 Byte)     |                |
| Toll_Chrg          | Number (18,5)      |                |
| Toll_Duration      | Number (11)        |                |
| Toll_Tp_Ind        | Varchar2 (20 Byte) |                |
| Total_Chrg_Amount  | Number (18,5)      |                |
| Total_Tax          | Number (18,5)      |                |
| Usage              | Number (18,5)      |                |
| Usc_Uom            | Char (1 Byte)      |                |
| Visit_Ind          | Char (1 Byte)      |                |
| Volume_Type        | Char (2 Byte)      |                |
|--------------------+--------------------+----------------|
#+BEGIN_LaTeX
\normalsize
\newpage
#+END_LaTeX
*** DATA_OUTCOLLECT
    Event table used for CDMA data Outcollects which run totally outside *TOPS*.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX
#+ATTR_LaTeX: :environment longtable :align l|l|l
    |---------------------------+--------------------+---------------|
    | *Name*                    | *Data Type*        | *Description* |
    |---------------------------+--------------------+---------------|
    | Actual_Data_Volume        | Number             |               |
    | Actual_Usage_Volume       | Number             |               |
    | Amount                    | Number (9,2)       |               |
    | Bsid                      | Char (12 Byte)     |               |
    | Home_Carrier              | Varchar2 (40 Byte) |               |
    | Home_Sid                  | Char (5 Byte)      |               |
    | Message_Accounting_Digits | Number             |               |
    | Partner                   | Varchar2 (40 Byte) |               |
    | Process_Date              | Date               |               |
    | Settlement_Date           | Date               |               |
    |---------------------------+--------------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX  
*** ROAMING_PARTNER 
    A table that contains all the CDMA Data Outcollect roaming partners. This table
    works in tandom with the *DATA_OUTCOLLECT* table.

#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX
#+ATTR_LaTeX: :environment longtable :align l|l|l
    |---------------+--------------------+---------------|
    | *Name*        | *Data Type*        | *Description* |
    |---------------+--------------------+---------------|
    | Bsid_Type     | Char (5 Byte)      |               |
    | Clearinghouse | Varchar2 (40 Byte) |               |
    | Partner       | Varchar2 (40 Byte) |               |
    | Roaming_Type  | Char (1 Byte)      |               |
    |---------------+--------------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX   
*** 4G IC_ACCUMULATED_USAGE
    This is the equivalent to the *APE1_ACCUMULATORS* for wholesale 4G roaming usage and
   is a view of the *PRM_EVENT_DTL_PARAM* and *IC_ACCUMULATED_CHRG* tables.
    One of the tables that is part of *USC_SAP_EXTRACT_V* useful for usage totals and
    file names. 
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|----------------------+--------------------+--------------------------|
| *Column Name*        | *Data Type*        | *Description*            |
|----------------------+--------------------+--------------------------|
| Carrier_Cd           | Varchar2 (20 Byte) |                          |
| Prod_Bdl_Id          | Number (6)         |                          |
| Prod_Id              | Number (4)         |                          |
| Event_Id             | Number (4)         |                          |
| Content_Grp_Cd       | Varchar2 (20 Byte) |                          |
| Service_Id           | Number (20)        |                          |
| Elmnt_Cd             | Char (8 Byte)      |                          |
| Rate_Plan_Cd         | Varchar2 (20 Byte) |                          |
| Chrg_Direction       | Char (1 Byte)      |                          |
| Orig_Bp              | Date               |                          |
| Bp_Start_Date        | Date               |                          |
| Event_Date           | Date               |                          |
| Rate_Eff_Datetime    | Date               |                          |
| Destination_Cd       | Char (5 Byte)      |                          |
| Chrg_Param_Id        | Number (4)         |                          |
| Qual_Param_1_Id      | Number (4)         |                          |
| Qual_Param_1_Set_Cd  | Char (4 Byte)      |                          |
| Qual_Param_1_Val     | Varchar2 (20 Byte) |                          |
| Qual_Param_2_Id      | Number (4)         |                          |
| Qual_Param_2_Set_Cd  | Char (4 Byte)      |                          |
| Qual_Param_2_Val     | Varchar2 (20 Byte) |                          |
| Qual_Param_3_Id      | Number (4)         |                          |
| Qual_Param_3_Set_Cd  | Char (4 Byte)      |                          |
| Qual_Param_3_Val     | Varchar2 (20 Byte) |                          |
| Qual_Param_4_Id      | Number (4)         |                          |
| Qual_Param_4_Set_Cd  | Char (4 Byte)      |                          |
| Qual_Param_4_Val     | Varchar2 (20 Byte) |                          |
| Nr_Param_1_Val       | Char (20 Byte)     |                          |
| Nr_Param_2_Val       | Char (20 Byte)     |                          |
| Nr_Param_3_Val       | Char (20 Byte)     |                          |
| Future_1             | Varchar2 (20 Byte) |                          |
| Future_2             | Varchar2 (20 Byte) |                          |
| Future_3             | Varchar2 (20 Byte) |                          |
| Future_4             | Varchar2 (20 Byte) |                          |
| Future_5             | Varchar2 (20 Byte) |                          |
| Future_6             | Varchar2 (20 Byte) |                          |
| Future_7             | Varchar2 (20 Byte) |                          |
| Future_8             | Varchar2 (20 Byte) |                          |
| Future_9             | Varchar2 (20 Byte) |                          |
| Future_10            | Varchar2 (20 Byte) |                          |
| Future_11            | Varchar2 (50 Byte) |                          |
| Future_12            | Varchar2 (50 Byte) |                          |
| Future_13            | Varchar2 (50 Byte) |                          |
| Future_14            | Varchar2 (50 Byte) |                          |
| Future_15            | Varchar2 (50 Byte) |                          |
| Au_Id                | Number (9)         |                          |
| Sys_Creation_Date    | Date               |                          |
| Sys_Update_Date      | Date               |                          |
| Operator_Id          | Number (9)         |                          |
| Application_Id       | Char (6 Byte)      |                          |
| Dl_Service_Code      | Char (5 Byte)      |                          |
| Dl_Update_Stamp      | Number (4)         |                          |
| Jurisdiction         | Char (1 Byte)      |                          |
| Prod_Cat_Id          | Char (2 Byte)      | /Same as Au_Prod_Cat_Id/ |
| Agreement_Id         | Number (6)         |                          |
| Elmnt_Cat_Id         | Number (2)         |                          |
| Rate_Class_Set_Cd    | Char (4 Byte)      |                          |
| Rate_Per_Unit_Seq    | Number (9)         |                          |
| One_Time_Rate_Seq    | Number (9)         |                          |
| Nr_Param_4_Val       | Char (20 Byte)     |                          |
| Qual_Param_5_Id      | Number (4)         |                          |
| Qual_Param_5_Set_Cd  | Char (4 Byte)      |                          |
| Qual_Param_5_Val     | Varchar2 (20 Byte) |                          |
| Qual_Param_6_Id      | Number (4)         |                          |
| Qual_Param_6_Set_Cd  | Char (4 Byte)      |                          |
| Qual_Param_6_Val     | Varchar2 (20 Byte) |                          |
| Qual_Param_7_Id      | Number (4)         |                          |
| Qual_Param_7_Set_Cd  | Char (4 Byte)      |                          |
| Qual_Param_7_Val     | Varchar2 (20 Byte) |                          |
| Qual_Param_8_Id      | Number (4)         |                          |
| Qual_Param_8_Set_Cd  | Char (4 Byte)      |                          |
| Qual_Param_8_Val     | Varchar2 (20 Byte) |                          |
| Qual_Param_9_Id      | Number (4)         |                          |
| Qual_Param_9_Set_Cd  | Char (4 Byte)      |                          |
| Qual_Param_9_Val     | Varchar2 (20 Byte) |                          |
| Qual_Param_10_Id     | Number (4)         |                          |
| Qual_Param_10_Set_Cd | Char (4 Byte)      |                          |
| Qual_Param_10_Val    | Varchar2 (20 Byte) |                          |
| Nr_Param_1_Id        | Number (4)         |                          |
| Nr_Param_2_Id        | Number (4)         |                          |
| Nr_Param_3_Id        | Number (4)         |                          |
| Nr_Param_4_Id        | Number (4)         |                          |
| Tax_Set_Cd           | Char (2 Byte)      |                          |
BooGoo9000#
| Uom                  | Char (2 Byte)      |                          |
| Num_Of_Events        | Number (9)         |                          |
| Event_Chrg_Tp        | Char (1 Byte)      |                          |
| Tot_Org_Chrg_Prm_V   | Number (18,5)      |                          |
| Tot_Chrg_Param_Val   | Number (18,5)      |                          |
| Tot_Net_Acces_Chrg   | Number (18,5)      |                          |
| Tot_Net_Onetm_Chrg   | Number (18,5)      |                          |
| Tot_Net_Usage_Chrg   | Number (18,5)      |                          |
| Acces_Chrg_Seq       | Number (9)         |                          |
| Content_Rate         | Number (13,8)      |                          |
| Cp_Access_Chrg       | Number (18,5)      |                          |
| Cp_Usage_Chrg        | Number (18,5)      |                          |
| Tenant_Cd            | Varchar2 (20 Byte) |                          |
| Core_Reserved_1      | Char (1 Byte)      |                          |
| Core_Reserved_2      | Varchar2 (20 Byte) |                          |
| Core_Reserved_3      | Varchar2 (20 Byte) |                          |
| Event_Direction      | Char (1 Byte)      |                          |
|----------------------+--------------------+--------------------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** 4G PRM_ROM_INCOL_EVENTS_AP
    APRM table that contains the events for wholesale 4G Incollects.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|---------------------------+---------------------+---------------|
| *Column Name*             | *Data Type*         | *Description* |
|---------------------------+---------------------+---------------|
| Validation_Sts            | Char (1 Byte)       |               |
| Uom                       | Char (2 Byte)       |               |
| Transcut_Ts_Offst         | Char (5 Byte)       |               |
| Transcut_Ts               | Char (14 Byte)      |               |
| Tenant_Cd                 | Varchar2 (20 Byte)  |               |
| Teleservicecode           | Char (2 Byte)       |               |
| Tax_Type                  | Char (2 Byte)       |               |
| Tap_In_File_Seq_Number    | Number (5)          |               |
| Tap_In_File_Name          | Varchar2 (20 Byte)  |               |
| Tadig_File_Type           | Char (2 Byte)       |               |
| Sys_Update_Date           | Date                |               |
| Sys_Creation_Date         | Date                |               |
| Supp_Serv_Cd              | Char (2 Byte)       |               |
| Sim_Toolkit_Ind           | Char (1 Byte)       |               |
| Serving_Bid               | Char (5 Byte)       |               |
| Service_Type              | Char (1 Byte)       |               |
| Rerate_Cnt                | Number (3)          |               |
| Record_Type               | Char (1 Byte)       |               |
| Record_Position           | Varchar2 (6 Byte)   |               |
| Rating_Curr               | Char (3 Byte)       |               |
| Rap_File_Sequence         | Varchar2 (20 Byte)  |               |
| Process_Date              | Date                |               |
| Orig_Brok_Filename        | Varchar2 (24 Byte)  |               |
| Operator_Id               | Number (9)          |               |
| Ods_Last_Update_Date      | Date                |               |
| Ods_Insert_Date           | Date                |               |
| Normalized_Calling_Number | Char (20 Byte)      |               |
| Normalized_Called_Number  | Char (20 Byte)      |               |
| Non_Chrg_Party_Num        | Char (17 Byte)      |               |
| Non_Chr_Prt_Pub_User_Id   | Char (64 Byte)      |               |
| Network_Element_Type      | Char (1 Byte)       |               |
| Network_Element_Id        | Char (50 Byte)      |               |
| Mobile_Session_Service    | Char (17 Byte)      |               |
| Message_Event_Service     | Char (17 Byte)      |               |
| Local_Currency            | Char (3 Byte)       |               |
| Generated_Rec             | Number (4)          |               |
| Future_Buff               | Varchar2 (443 Byte) |               |
| File_Avail_Ts_Offst       | Char (5 Byte)       |               |
| File_Avail_Ts             | Char (14 Byte)      |               |
| Exchange_Rate             | Number (18,5)       |               |
| Event_Start_Date_Time     | Date                |               |
| Event_Reference           | Char (64 Byte)      |               |
| Edr_Id                    | Number (11)         |               |
| Dl_Update_Stamp           | Number (4)          |               |
| Dl_Service_Code           | Char (5 Byte)       |               |
| Currency_Code             | Char (3 Byte)       |               |
| Country_Code              | Char (3 Byte)       |               |
| Chr_Prt_Pub_User_Id       | Char (64 Byte)      |               |
| Charge_Type               | Char (1 Byte)       |               |
| Charge_Parameter          | Number (18,5)       |               |
| Charge_Amount_Sdr         | Number (18,5)       |               |
| Charge_Amount_Rc          | Number (18,5)       |               |
| Charge_Amount             | Number (18,5)       |               |
| Carrier_Cd                | Varchar2 (20 Byte)  |               |
| Call_Type_Level_3         | Varchar2 (11 Byte)  |               |
| Call_Type_Level_2         | Char (2 Byte)       |               |
| Call_Type_Level_1         | Char (3 Byte)       |               |
| Call_Direction            | Char (1 Byte)       |               |
| Bp_Start_Date             | Date                |               |
| Bp_End_Date               | Date                |               |
| Au_Id                     | Number (9)          |               |
| Aprm_Edr_Id               | Number (20)         |               |
| Application_Id            | Char (6 Byte)       |               |
|---------------------------+---------------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX

*** 4G PRM_ROM_OUTCOL_EVENTS_AP
    APRM table that contains the events for wholesale 4G Outcollects.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|-------------------------+---------------------+---------------|
| *Column Name*           | *Data Type*         | *Description* |
|-------------------------+---------------------+---------------|
| Utc_Offset              | Char (5 Byte)       |               |
| Usg_Net_Charge_Sdr      | Number (18,5)       |               |
| Usg_Net_Charge_Rc       | Number (18,5)       |               |
| Usg_Net_Charge_Lc       | Number (18,5)       |               |
| Uom                     | Char (2 Byte)       |               |
| Tot_Tax_Amount_Sdr      | Number (18,5)       |               |
| Tot_Tax_Amount_Rc       | Number (18,5)       |               |
| Tot_Tax_Amount_Lc1      | Number (18,5)       |               |
| Tot_Tax_Amount_Lc       | Number (18,5)       |               |
| Tot_Net_Charge_Sdr      | Number (18,5)       |               |
| Tot_Net_Charge_Rc       | Number (18,5)       |               |
| Tot_Net_Charge_Lc1      | Number (18,5)       |               |
| Tot_Net_Charge_Lc       | Number (18,5)       |               |
| Tot_Gross_Amt_Sdr       | Number (18,5)       |               |
| Tot_Gross_Amt_Rc        | Number (18,5)       |               |
| Tot_Gross_Amt_Lc1       | Number (18,5)       |               |
| Tot_Gross_Amt_Lc        | Number (18,5)       |               |
| Termination_Cause       | Varchar2 (8 Byte)   |               |
| Term_Province           | Char (2 Byte)       |               |
| Tenant_Cd               | Varchar2 (20 Byte)  |               |
| Tele_Serv_Code          | Char (2 Byte)       |               |
| Taxable_Amount4         | Number (18,5)       |               |
| Taxable_Amount3         | Number (18,5)       |               |
| Taxable_Amount2         | Number (18,5)       |               |
| Taxable_Amount1         | Number (18,5)       |               |
| Tax_Tp_4                | Char (2 Byte)       |               |
| Tax_Tp_3                | Char (2 Byte)       |               |
| Tax_Tp_2                | Char (2 Byte)       |               |
| Tax_Tp_1                | Char (2 Byte)       |               |
| Tax_Set_Cd              | Char (2 Byte)       |               |
| Tax_Rate_4              | Number (6,3)        |               |
| Tax_Rate_3              | Number (6,3)        |               |
| Tax_Rate_2              | Number (6,3)        |               |
| Tax_Rate_1              | Number (6,3)        |               |
| Tax_Jurisdiction        | Char (2 Byte)       |               |
| Tax_Code_4              | Char (2 Byte)       |               |
| Tax_Code_3              | Char (2 Byte)       |               |
| Tax_Code_2              | Char (2 Byte)       |               |
| Tax_Code_1              | Char (2 Byte)       |               |
| Tax_Amount_4_Rc         | Number (18,5)       |               |
| Tax_Amount_4            | Number (18,5)       |               |
| Tax_Amount_3_Rc         | Number (18,5)       |               |
| Tax_Amount_3            | Number (18,5)       |               |
| Tax_Amount_2_Rc         | Number (18,5)       |               |
| Tax_Amount_2            | Number (18,5)       |               |
| Tax_Amount_1_Rc         | Number (18,5)       |               |
| Tax_Amount_1            | Number (18,5)       |               |
| Tap_Trx_Curr            | Char (3 Byte)       |               |
| Tap_Out_File_Name       | Varchar2 (20 Byte)  |               |
| Tap_File_Seq            | Number (5)          |               |
| Sys_Update_Date         | Date                |               |
| Sys_Creation_Date       | Date                |               |
| Supp_Service            | Char (2 Byte)       |               |
| Src_Number              | Char (20 Byte)      |               |
| Sim_Toolkit_Ind         | Char (1 Byte)       |               |
| Service_Type            | Char (1 Byte)       |               |
| Rec_Entity_Tp           | Char (1 Byte)       |               |
| Rating_Curr             | Char (3 Byte)       |               |
| Rap_File_Seq            | Number (5)          |               |
| Processed_Ind           | Char (1 Byte)       |               |
| Process_Date            | Date                |               |
| Pdp_Address             | Varchar2 (50 Byte)  |               |
| Partial_Type_Ind        | Char (1 Byte)       |               |
| Orig_Province           | Char (2 Byte)       |               |
| Operator_Id             | Number (9)          |               |
| Ods_Last_Update_Date    | Date                |               |
| Ods_Insert_Date         | Date                |               |
| Norm_Src_Number         | Char (20 Byte)      |               |
| Norm_Dest_Number        | Char (20 Byte)      |               |
| Non_Chr_Prt_Pub_User_Id | Char (64 Byte)      |               |
| Network_Element_Type    | Char (1 Byte)       |               |
| Network_Element_Id      | Char (50 Byte)      |               |
| Net_Sgsnid              | Varchar2 (50 Byte)  |               |
| Net_Rec_Entity_Id       | Varchar2 (50 Byte)  |               |
| Net_Loc_Area_Code       | Varchar2 (20 Byte)  |               |
| Msisdn                  | Varchar2 (20 Byte)  |               |
| Message_Event_Service   | Char (17 Byte)      |               |
| Imsi                    | Varchar2 (15 Byte)  |               |
| Home_Province           | Char (2 Byte)       |               |
| Home_Bid                | Char (5 Byte)       |               |
| Gprs_Dest_Apn_Oi        | Varchar2 (38 Byte)  |               |
| Gprs_Dest_Apn_Ni        | Varchar2 (64 Byte)  |               |
| Globalrefnumber         | Varchar2 (42 Byte)  |               |
| Ggsn_Address            | Varchar2 (50 Byte)  |               |
| Geo_Serv_Loc_Desc       | Varchar2 (30 Byte)  |               |
| Geo_Serv_Bid            | Char (5 Byte)       |               |
| Generated_Rec           | Number (4)          |               |
| Future                  | Varchar2 (100 Byte) |               |
| File_Identifier         | Number (9)          |               |
| Extract_Date            | Date                |               |
| Ext_File_Id             | Number (9)          |               |
| Event_Start_Datetime    | Date                |               |
| Event_Reference         | Char (64 Byte)      |               |
| Event_End_Datetime      | Date                |               |
| Equipment_Id            | Varchar2 (20 Byte)  |               |
| Edr_Id                  | Number (11)         |               |
| Dl_Update_Stamp         | Number (4)          |               |
| Dl_Service_Code         | Char (5 Byte)       |               |
| Disp_File_Seq           | Number (9)          |               |
| Dest_Number             | Char (20 Byte)      |               |
| Data_Vol_Outgoing       | Varchar2 (12 Byte)  |               |
| Data_Vol_Incoming       | Varchar2 (12 Byte)  |               |
| Cross_Rate              | Number (11,6)       |               |
| Country_Code            | Char (3 Byte)       |               |
| Chrg_Id                 | Varchar2 (10 Byte)  |               |
| Chr_Prt_Pub_User_Id     | Char (64 Byte)      |               |
| Charging_Param          | Number (18,5)       |               |
| Charge_Units            | Number (18,5)       |               |
| Cell_Id                 | Varchar2 (10 Byte)  |               |
| Carrier_Cd              | Varchar2 (20 Byte)  |               |
| Camel_Serv_Level        | Char (2 Byte)       |               |
| Camel_Serv_Key          | Varchar2 (10 Byte)  |               |
| Camel_Invoc_Fee         | Number (18,5)       |               |
| Camel_Dflt_Hndl         | Char (2 Byte)       |               |
| Camel_Dest_Num          | Char (20 Byte)      |               |
| Camel_Cse_Info          | Char (40 Byte)      |               |
| Call_Tp_Level_3         | Char (4 Byte)       |               |
| Call_Tp_Level_2         | Char (2 Byte)       |               |
| Call_Tp_Level_1         | Char (2 Byte)       |               |
| Call_Direction          | Char (1 Byte)       |               |
| Bp_Start_Date           | Date                |               |
| Bp_End_Date             | Date                |               |
| Bearer_Serv_Code        | Char (2 Byte)       |               |
| Au_Id                   | Number (9)          |               |
| Application_Id          | Char (6 Byte)       |               |
| Air_Toll_Ind            | Char (1 Byte)       |               |
| Acc_Net_Charge_Sdr      | Number (18,5)       |               |
| Acc_Net_Charge_Rc       | Number (18,5)       |               |
| Acc_Net_Charge_Lc       | Number (18,5)       |               |
|-------------------------+---------------------+---------------|
#+BEGIN_LaTeX
\normalsize
\newpage
#+END_LaTeX
*** (Both) USC_SAP_EXTRACT_V
    The SAP Extract table is a view of a view *IC_ACCUMULATED_USAGE* joined with table *USC_GL_ACC_LKP*. It is this table that is used create a report that is sent to *TDS* to be loaded into *SAP*
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|------------------+--------------------+-------------------------|
| *Name*           | *Data Type*        | *Descritption*          |
|------------------+--------------------+-------------------------|
| Au_Id            | Number (9)         |                         |
| Carrier_Cd       | Varchar2 (20 Byte) |                         |
| Other_Partner    | Varchar2 (20 Byte) |                         |
| Au_Prod_Id       | Number (4)         |                         |
| Au_Evt_Id        | Number (4)         |                         |
| Au_Prod_Cat_Id   | Char (2 Byte)      | IR - Intra Roaming      |
|                  |                    | IN - Incollect Roaming  |
|                  |                    | RO - Outcollect Roaming |
|                  |                    | IS - TAPIN              |
|                  |                    | OS - TAPOUT             |
|                  |                    | II - GSM                |
| Au_Bp_Start_Date | Date               | Billing Period Start    |
| Au_Charge        | Number             |                         |
| Gl_Account       | Number             |                         |
| Crdr_Ind         | Char (2 Byte)      |                         |
| Cost_Center      | Char (10 Byte)     |                         |
| Product          | Char (18 Byte)     |                         |
| Tax_Code         | Char (2 Byte)      |                         |
| Tax_Jur_Cd       | Char (15 Byte)     |                         |
| Line_Order       | Number             |                         |
|------------------+--------------------+-------------------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
* ARCM
  Thw whole purpose of *ARCM* is to convert wholesale IN/OUT Collect *TAP* files into usage records
  that could then put into *APRM*. 
** ARCM Tables
*** SMM1_COLLECT_FILES_HIST
    The *TAP* file equivalent to *AC1_CONTROL_HIST*. 
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|----------------------+---------------------+---------------|
| *Column Name*        | *Data Type*         | *Description* |
|----------------------+---------------------+---------------|
| Ods_Source_Cd        | Number              |               |
| Period_Key           | Number (4)          |               |
| File_Identifier      | Number (22)         |               |
| *File_Name*          | Varchar2 (200 Byte) |               |
| File_Format          | Varchar2 (10 Byte)  |               |
| Source_Id            | Number (22)         |               |
| Source_Type          | Varchar2 (10 Byte)  |               |
| File_Path            | Varchar2 (512 Byte) |               |
| File_Status          | Varchar2 (2 Byte)   |               |
| *Physical_Date*      | Date                |               |
| File_Size            | Number (15)         |               |
| Is_Instance_Id       | Number (11)         |               |
| Reject_Reason        | Varchar2 (512 Byte) |               |
| Sys_Creation_Date    | Date                |               |
| Sys_Update_Date      | Date                |               |
| Operator_Id          | Number (9)          |               |
| Application_Id       | Char (6 Byte)       |               |
| Dl_Service_Code      | Char (5 Byte)       |               |
| Dl_Update_Stamp      | Number (4)          |               |
| Ods_Insert_Date      | Date                |               |
| Ods_Last_Update_Date | Date                |               |
|----------------------+---------------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
*** SMM1_ARCM_FILE_REPOSITORY 
    Used in conjunction with *SMM1_COLLECT_FILES_HIST* to get more detailed information.
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|--------------------------+---------------------+---------------|
| *Column Name*            | *Data Type*         | *Description* |
|--------------------------+---------------------+---------------|
| Ods_Source_Cd            | Number              |               |
| File_Name                | Varchar2 (20 Byte)  |               |
| File_Dir                 | Varchar2 (100 Byte) |               |
| File_Status              | Varchar2 (20 Byte)  |               |
| File_Type                | Varchar2 (5 Byte)   |               |
| Sender                   | Varchar2 (5 Byte)   |               |
| Recipient                | Varchar2 (5 Byte)   |               |
| Sequence_Num             | Number (11)         |               |
| Last_Modified_Timestamp  | Number (22)         |               |
| File_Available_Timestamp | Number (22)         |               |
| File_Content             | Varchar2 (50 Byte)  |               |
| Corresponding_File_Name  | Varchar2 (20 Byte)  |               |
| Clearing_House           | Varchar2 (50 Byte)  |               |
| Events_Count             | Number (11)         |               |
| Total_Value              | Varchar2 (20 Byte)  |               |
| Currency                 | Varchar2 (5 Byte)   |               |
| File_Ack_Status          | Varchar2 (20 Byte)  |               |
| Module_Id                | Number (11)         |               |
| Sys_Creation_Date        | Date                |               |
| Sys_Update_Date          | Date                |               |
| Operator_Id              | Number (9)          |               |
| Application_Id           | Char (6 Byte)       |               |
| Dl_Service_Code          | Char (5 Byte)       |               |
| Dl_Update_Stamp          | Number (4)          |               |
| Ods_Insert_Date          | Date                |               |
| Ods_Last_Update_Date     | Date                |               |
|--------------------------+---------------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
*** PRM_RAPOUT_ERR_MNGR
    Keeps track of all the RAP out errors.
:CLOSET:
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX

#+ATTR_LaTeX: :environment longtable :align l|l|l
|---------------------------+----------------------+---------------|
| *Column Name*             | *Data Type*          | *Description* |
|---------------------------+----------------------+---------------|
| Ac_Rate_Cd_Seq_1          | Number (9)           |               |
| Ac_Rate_Cd_Seq_2          | Number (9)           |               |
| Ac_Rate_Cd_Seq_3          | Number (9)           |               |
| Acces_Chrg_1              | Number (18,5)        |               |
| Acces_Chrg_2              | Number (18,5)        |               |
| Acces_Chrg_3              | Number (18,5)        |               |
| Agreement_Id              | Number (6)           |               |
| Application_Id            | Char (6 Byte)        |               |
| Aprm_Edr_Id               | Number (20)          |               |
| Au_Id_1                   | Number (9)           |               |
| Au_Id_2                   | Number (9)           |               |
| Au_Id_3                   | Number (9)           |               |
| Bill_In_Advance           | Char (1 Byte)        |               |
| Billing_Pct               | Number (5,2)         |               |
| Calc_Acces_Chrg           | Number (18,5)        |               |
| Calc_Usage_Chrg           | Number (18,5)        |               |
| Call_Direction            | Char (1 Byte)        |               |
| Carrier_Cd                | Varchar2 (20 Byte)   |               |
| Charge_Amount             | Number (18,5)        |               |
| Charge_Type               | Char (1 Byte)        |               |
| Chr_Prt_Pub_User_Id       | Char (64 Byte)       |               |
| Chrg_Direction            | Char (1 Byte)        |               |
| Chrg_Param_1_Val          | Number (18,5)        |               |
| Chrg_Param_2_Val          | Number (18,5)        |               |
| Chrg_Param_3_Val          | Number (18,5)        |               |
| Content_Grp_Cd            | Varchar2 (20 Byte)   |               |
| Core_Reserved_1           | Char (1 Byte)        |               |
| Core_Reserved_2           | Varchar2 (20 Byte)   |               |
| Core_Reserved_3           | Varchar2 (20 Byte)   |               |
| Country_Cd                | Char (3 Byte)        |               |
| Daily_Ind                 | Char (1 Byte)        |               |
| Destination_Cd            | Char (5 Byte)        |               |
| Dl_Service_Code           | Char (5 Byte)        |               |
| Dl_Update_Stamp           | Number (4)           |               |
| Edr_Id                    | Number (11)          |               |
| Elmnt_Cat_Id              | Number (2)           |               |
| Elmnt_Cd                  | Char (8 Byte)        |               |
| Err_Seq_Num               | Number (9)           |               |
| Event_Chrg_Tp             | Char (1 Byte)        |               |
| Event_Direction           | Char (1 Byte)        |               |
| Event_Id                  | Number (4)           |               |
| Event_Reference           | Char (64 Byte)       |               |
| Event_Start_Datetime      | Date                 |               |
| Exchange_Rate             | Number (18,5)        |               |
| Ext_Trunk                 | Char (10 Byte)       |               |
| File_Avail_Ts             | Char (14 Byte)       |               |
| File_Avail_Ts_Offst       | Char (5 Byte)        |               |
| Future_1                  | Varchar2 (20 Byte)   |               |
| Future_10                 | Varchar2 (20 Byte)   |               |
| Future_11                 | Varchar2 (50 Byte)   |               |
| Future_12                 | Varchar2 (50 Byte)   |               |
| Future_13                 | Varchar2 (50 Byte)   |               |
| Future_14                 | Varchar2 (50 Byte)   |               |
| Future_15                 | Varchar2 (50 Byte)   |               |
| Future_2                  | Varchar2 (20 Byte)   |               |
| Future_3                  | Varchar2 (20 Byte)   |               |
| Future_4                  | Varchar2 (20 Byte)   |               |
| Future_5                  | Varchar2 (20 Byte)   |               |
| Future_6                  | Varchar2 (20 Byte)   |               |
| Future_7                  | Varchar2 (20 Byte)   |               |
| Future_8                  | Varchar2 (20 Byte)   |               |
| Future_9                  | Varchar2 (20 Byte)   |               |
| Generated_Rec             | Number (4)           |               |
| Geoloc_Servbid            | Char (5 Byte)        |               |
| Iecd                      | Char (4 Byte)        |               |
| Inc_Call_Tp_Lvl_1         | Char (3 Byte)        |               |
| Inc_Call_Tp_Lvl_2         | Char (2 Byte)        |               |
| Inc_Call_Tp_Lvl_3         | Char (11 Byte)       |               |
| Jurisdiction              | Char (1 Byte)        |               |
| Local_Currency            | Char (3 Byte)        |               |
| Message_Event_Service     | Char (17 Byte)       |               |
| Mobile_Session_Service    | Char (17 Byte)       |               |
| Network_Element_Id        | Char (50 Byte)       |               |
| Network_Element_Type      | Char (1 Byte)        |               |
| Non_Chr_Prt_Pub_User_Id   | Char (64 Byte)       |               |
| Non_Chrg_Party_Num        | Char (17 Byte)       |               |
| Nr_Param_1_Val            | Char (20 Byte)       |               |
| Nr_Param_2_Val            | Char (20 Byte)       |               |
| Nr_Param_3_Val            | Char (20 Byte)       |               |
| Nr_Param_4_Val            | Char (20 Byte)       |               |
| Num_Of_Days               | Number (9)           |               |
| Num_Of_Rate_Seg           | Number (1)           |               |
| Ods_Insert_Date           | Date                 |               |
| Ods_Last_Update_Date      | Date                 |               |
| One_Time_Chrg_Ind         | Char (1 Byte)        |               |
| Operator_Id               | Number (9)           |               |
| Orig_Brok_Filename        | Varchar2 (24 Byte)   |               |
| Orig_Chrg_Param_Val_1     | Number (18,5)        |               |
| Orig_Chrg_Param_Val_2     | Number (18,5)        |               |
| Orig_Chrg_Param_Val_3     | Number (18,5)        |               |
| Orig_Event_Start_Datetime | Date                 |               |
| Orig_Process_Date         | Date                 |               |
| Orig_Tot_Acces_Chrg_1     | Number (18,5)        |               |
| Orig_Tot_Acces_Chrg_2     | Number (18,5)        |               |
| Orig_Tot_Acces_Chrg_3     | Number (18,5)        |               |
| Orig_Tot_Usage_Chrg_1     | Number (18,5)        |               |
| Orig_Tot_Usage_Chrg_2     | Number (18,5)        |               |
| Orig_Tot_Usage_Chrg_3     | Number (18,5)        |               |
| Original_Terminating_Id   | Varchar2 (20 Byte)   |               |
| Originating_Id            | Char (20 Byte)       |               |
| Phy_File_Id               | Number (9)           |               |
| Process_Date              | Date                 |               |
| Process_Datetime          | Date                 |               |
| Prod_Cat_Id               | Char (2 Byte)        |               |
| Prod_Id                   | Number (4)           |               |
| Qual_Param_1_Set_Cd       | Char (4 Byte)        |               |
| Qual_Param_1_Val          | Varchar2 (20 Byte)   |               |
| Qual_Param_10_Set_Cd      | Char (4 Byte)        |               |
| Qual_Param_10_Val         | Varchar2 (20 Byte)   |               |
| Qual_Param_2_Set_Cd       | Char (4 Byte)        |               |
| Qual_Param_2_Val          | Varchar2 (20 Byte)   |               |
| Qual_Param_3_Set_Cd       | Char (4 Byte)        |               |
| Qual_Param_3_Val          | Varchar2 (20 Byte)   |               |
| Qual_Param_4_Set_Cd       | Char (4 Byte)        |               |
| Qual_Param_4_Val          | Varchar2 (20 Byte)   |               |
| Qual_Param_5_Set_Cd       | Char (4 Byte)        |               |
| Qual_Param_5_Val          | Varchar2 (20 Byte)   |               |
| Qual_Param_6_Set_Cd       | Char (4 Byte)        |               |
| Qual_Param_6_Val          | Varchar2 (20 Byte)   |               |
| Qual_Param_7_Set_Cd       | Char (4 Byte)        |               |
| Qual_Param_7_Val          | Varchar2 (20 Byte)   |               |
| Qual_Param_8_Set_Cd       | Char (4 Byte)        |               |
| Qual_Param_8_Val          | Varchar2 (20 Byte)   |               |
| Qual_Param_9_Set_Cd       | Char (4 Byte)        |               |
| Qual_Param_9_Val          | Varchar2 (20 Byte)   |               |
| Rap_File_Seq_No           | Char (20 Byte)       |               |
| Rate_Class_Set_Cd         | Char (4 Byte)        |               |
| Rate_Plan_Cd              | Varchar2 (20 Byte)   |               |
| Rate_Segments             | Varchar2 (2000 Byte) |               |
| Reason_Status             | Char (4 Byte)        |               |
| Rec_Handle_Ind            | Char (1 Byte)        |               |
| Record_Position           | Char (6 Byte)        |               |
| Record_Type               | Char (1 Byte)        |               |
| Ro_Aprm_Edr_Id            | Number (20)          |               |
| Ro_Err_Cd1                | Number (4)           |               |
| Ro_Err_Cd2                | Number (4)           |               |
| Ro_Err_Cd3                | Number (4)           |               |
| Ro_Err_Cd4                | Number (4)           |               |
| Ro_Err_Contxt_Path1       | Varchar2 (50 Byte)   |               |
| Ro_Err_Contxt_Path2       | Varchar2 (50 Byte)   |               |
| Ro_Err_Contxt_Path3       | Varchar2 (50 Byte)   |               |
| Ro_Err_Contxt_Path4       | Varchar2 (50 Byte)   |               |
| Ro_File_Tp_Ind            | Char (1 Byte)        |               |
| Ro_Future_Use             | Varchar2 (500 Byte)  |               |
| Ro_Orig_Brok_File         | Varchar2 (24 Byte)   |               |
| Ro_Rap_File_Seq           | Char (5 Byte)        |               |
| Ro_Rap_Sev                | Char (1 Byte)        |               |
| Ro_Rapfile_Avail_Ts       | Char (14 Byte)       |               |
| Ro_Rapfile_Avail_Ts_Offst | Char (5 Byte)        |               |
| Ro_Rapfile_Cret_Ts        | Char (14 Byte)       |               |
| Ro_Rapfile_Cret_Ts_Offst  | Char (5 Byte)        |               |
| Ro_Raprel_Ver_Num         | Char (2 Byte)        |               |
| Ro_Rapspec_Ver_Num        | Char (2 Byte)        |               |
| Ro_Recipient              | Char (5 Byte)        |               |
| Ro_Rel_Ver_Num            | Char (2 Byte)        |               |
| Ro_Reserved               | Varchar2 (100 Byte)  |               |
| Ro_Ret_Det_Indx           | Number (6)           |               |
| Ro_Roam_Prt               | Char (5 Byte)        |               |
| Ro_Sender                 | Char (5 Byte)        |               |
| Ro_Spec_Ver_Num           | Char (2 Byte)        |               |
| Ro_Tap_Curr               | Char (3 Byte)        |               |
| Ro_Tap_Event_Ref          | Char (20 Byte)       |               |
| Ro_Tap_File_Name          | Varchar2 (20 Byte)   |               |
| Ro_Tap_File_Seq           | Char (5 Byte)        |               |
| Ro_Tol_Sev_Ret_Tax        | Number (18,5)        |               |
| Ro_Tot_Sev_Ret_Val        | Number (18,5)        |               |
| Rpu_Rate_Cd_Seq_1         | Number (9)           |               |
| Rpu_Rate_Cd_Seq_2         | Number (9)           |               |
| Rpu_Rate_Cd_Seq_3         | Number (9)           |               |
| Rule_Cd                   | Varchar2 (20 Byte)   |               |
| Service_Id                | Number (20)          |               |
| Service_Type              | Char (1 Byte)        |               |
| Session_Id                | Char (20 Byte)       |               |
| Sim_Toolkit_Ind           | Char (1 Byte)        |               |
| Supp_Serv_Cd              | Char (2 Byte)        |               |
| Sys_Creation_Date         | Date                 |               |
| Sys_Update_Date           | Date                 |               |
| Tadig_File_Type           | Char (2 Byte)        |               |
| Tap_Curr_Code             | Char (3 Byte)        |               |
| Tap_In_File_Nm            | Varchar2 (20 Byte)   |               |
| Tapin_File_Seq_No         | Number (5)           |               |
| Tapin_Future              | Varchar2 (443 Byte)  |               |
| Tax_Set_Cd                | Char (2 Byte)        |               |
| Tax_Type                  | Char (2 Byte)        |               |
| Teleservicecode           | Char (2 Byte)        |               |
| Tenant_Cd                 | Varchar2 (20 Byte)   |               |
| Terminating_Id            | Char (20 Byte)       |               |
| Total_Bill_Days           | Number (9)           |               |
| Transcut_Ts               | Char (14 Byte)       |               |
| Transcut_Ts_Offst         | Char (5 Byte)        |               |
| Uom_1                     | Char (2 Byte)        |               |
| Uom_2                     | Char (2 Byte)        |               |
| Uom_3                     | Char (2 Byte)        |               |
| Usage_Chrg_1              | Number (18,5)        |               |
| Usage_Chrg_2              | Number (18,5)        |               |
| Usage_Chrg_3              | Number (18,5)        |               |
| Validation_Sts            | Char (1 Byte)        |               |
|---------------------------+----------------------+---------------|

#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
:END:
*** PRM_ROM_OUTCOL_EVENTS_AP
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX
#+ATTR_LaTeX: :environment longtable :align l|l|l
|-------------------------+---------------------+---------------|
| *Column Name*           | *Data Type*         | *Description* |
|-------------------------+---------------------+---------------|
| Edr_Id                  | Number (11)         |               |
| Generated_Rec           | Number (4)          |               |
| Event_Start_Datetime    | Date                |               |
| Sys_Creation_Date       | Date                |               |
| Sys_Update_Date         | Date                |               |
| Operator_Id             | Number (9)          |               |
| Application_Id          | Char (6 Byte)       |               |
| Dl_Service_Code         | Char (5 Byte)       |               |
| Dl_Update_Stamp         | Number (4)          |               |
| Bp_Start_Date           | Date                |               |
| Bp_End_Date             | Date                |               |
| Carrier_Cd              | Varchar2 (20 Byte)  |               |
| Process_Date            | Date                |               |
| Tap_File_Seq            | Number (5)          |               |
| Air_Toll_Ind            | Char (1 Byte)       |               |
| Rating_Curr             | Char (3 Byte)       |               |
| Tap_Trx_Curr            | Char (3 Byte)       |               |
| File_Identifier         | Number (9)          |               |
| Globalrefnumber         | Varchar2 (42 Byte)  |               |
| Charging_Param          | Number (18,5)       |               |
| Uom                     | Char (2 Byte)       |               |
| Ext_File_Id             | Number (9)          |               |
| Extract_Date            | Date                |               |
| Processed_Ind           | Char (1 Byte)       |               |
| Charge_Units            | Number (18,5)       |               |
| Tax_Set_Cd              | Char (2 Byte)       |               |
| Tax_Jurisdiction        | Char (2 Byte)       |               |
| Tax_Code_1              | Char (2 Byte)       |               |
| Tax_Tp_1                | Char (2 Byte)       |               |
| Tax_Rate_1              | Number (6,3)        |               |
| Tax_Amount_1            | Number (18,5)       |               |
| Tax_Code_2              | Char (2 Byte)       |               |
| Tax_Tp_2                | Char (2 Byte)       |               |
| Tax_Rate_2              | Number (6,3)        |               |
| Tax_Amount_2            | Number (18,5)       |               |
| Tax_Code_3              | Char (2 Byte)       |               |
| Tax_Tp_3                | Char (2 Byte)       |               |
| Tax_Rate_3              | Number (6,3)        |               |
| Tax_Amount_3            | Number (18,5)       |               |
| Tax_Code_4              | Char (2 Byte)       |               |
| Tax_Tp_4                | Char (2 Byte)       |               |
| Tax_Rate_4              | Number (6,3)        |               |
| Tax_Amount_4            | Number (18,5)       |               |
| Tot_Net_Charge_Lc       | Number (18,5)       |               |
| Tot_Tax_Amount_Lc       | Number (18,5)       |               |
| Tot_Gross_Amt_Lc        | Number (18,5)       |               |
| Tot_Net_Charge_Sdr      | Number (18,5)       |               |
| Tot_Tax_Amount_Sdr      | Number (18,5)       |               |
| Tot_Gross_Amt_Sdr       | Number (18,5)       |               |
| Cross_Rate              | Number (11,6)       |               |
| Service_Type            | Char (1 Byte)       |               |
| Norm_Src_Number         | Char (20 Byte)      |               |
| Norm_Dest_Number        | Char (20 Byte)      |               |
| Dest_Number             | Char (20 Byte)      |               |
| Call_Direction          | Char (1 Byte)       |               |
| Country_Code            | Char (3 Byte)       |               |
| Orig_Province           | Char (2 Byte)       |               |
| Term_Province           | Char (2 Byte)       |               |
| Home_Province           | Char (2 Byte)       |               |
| Event_End_Datetime      | Date                |               |
| Net_Rec_Entity_Id       | Varchar2 (50 Byte)  |               |
| Net_Loc_Area_Code       | Varchar2 (20 Byte)  |               |
| Geo_Serv_Bid            | Char (5 Byte)       |               |
| Geo_Serv_Loc_Desc       | Varchar2 (30 Byte)  |               |
| Equipment_Id            | Varchar2 (20 Byte)  |               |
| Bearer_Serv_Code        | Char (2 Byte)       |               |
| Tele_Serv_Code          | Char (2 Byte)       |               |
| Supp_Service            | Char (2 Byte)       |               |
| Call_Tp_Level_1         | Char (2 Byte)       |               |
| Call_Tp_Level_2         | Char (2 Byte)       |               |
| Call_Tp_Level_3         | Char (4 Byte)       |               |
| Camel_Serv_Level        | Char (2 Byte)       |               |
| Camel_Serv_Key          | Varchar2 (10 Byte)  |               |
| Camel_Invoc_Fee         | Number (18,5)       |               |
| Camel_Dflt_Hndl         | Char (2 Byte)       |               |
| Camel_Dest_Num          | Char (20 Byte)      |               |
| Camel_Cse_Info          | Char (40 Byte)      |               |
| Home_Bid                | Char (5 Byte)       |               |
| Cell_Id                 | Varchar2 (10 Byte)  |               |
| Utc_Offset              | Char (5 Byte)       |               |
| Rec_Entity_Tp           | Char (1 Byte)       |               |
| Chrg_Id                 | Varchar2 (10 Byte)  |               |
| Src_Number              | Char (20 Byte)      |               |
| Pdp_Address             | Varchar2 (50 Byte)  |               |
| Ggsn_Address            | Varchar2 (50 Byte)  |               |
| Gprs_Dest_Apn_Ni        | Varchar2 (64 Byte)  |               |
| Gprs_Dest_Apn_Oi        | Varchar2 (38 Byte)  |               |
| Data_Vol_Incoming       | Varchar2 (12 Byte)  |               |
| Data_Vol_Outgoing       | Varchar2 (12 Byte)  |               |
| Termination_Cause       | Varchar2 (8 Byte)   |               |
| Partial_Type_Ind        | Char (1 Byte)       |               |
| Imsi                    | Varchar2 (15 Byte)  |               |
| Msisdn                  | Varchar2 (20 Byte)  |               |
| Disp_File_Seq           | Number (9)          |               |
| Net_Sgsnid              | Varchar2 (50 Byte)  |               |
| Future                  | Varchar2 (100 Byte) |               |
| Tax_Amount_1_Rc         | Number (18,5)       |               |
| Tax_Amount_2_Rc         | Number (18,5)       |               |
| Tax_Amount_3_Rc         | Number (18,5)       |               |
| Tax_Amount_4_Rc         | Number (18,5)       |               |
| Tot_Net_Charge_Rc       | Number (18,5)       |               |
| Tot_Tax_Amount_Rc       | Number (18,5)       |               |
| Tot_Gross_Amt_Rc        | Number (18,5)       |               |
| Tot_Net_Charge_Lc1      | Number (18,5)       |               |
| Tot_Tax_Amount_Lc1      | Number (18,5)       |               |
| Tot_Gross_Amt_Lc1       | Number (18,5)       |               |
| Au_Id                   | Number (9)          |               |
| Usg_Net_Charge_Lc       | Number (18,5)       |               |
| Usg_Net_Charge_Rc       | Number (18,5)       |               |
| Usg_Net_Charge_Sdr      | Number (18,5)       |               |
| Acc_Net_Charge_Lc       | Number (18,5)       |               |
| Acc_Net_Charge_Rc       | Number (18,5)       |               |
| Acc_Net_Charge_Sdr      | Number (18,5)       |               |
| Tap_Out_File_Name       | Varchar2 (20 Byte)  |               |
| Rap_File_Seq            | Number (5)          |               |
| Taxable_Amount1         | Number (18,5)       |               |
| Taxable_Amount2         | Number (18,5)       |               |
| Taxable_Amount3         | Number (18,5)       |               |
| Taxable_Amount4         | Number (18,5)       |               |
| Tenant_Cd               | Varchar2 (20 Byte)  |               |
| Network_Element_Type    | Char (1 Byte)       |               |
| Network_Element_Id      | Char (50 Byte)      |               |
| Chr_Prt_Pub_User_Id     | Char (64 Byte)      |               |
| Non_Chr_Prt_Pub_User_Id | Char (64 Byte)      |               |
| Event_Reference         | Char (64 Byte)      |               |
| Sim_Toolkit_Ind         | Char (1 Byte)       |               |
| Message_Event_Service   | Char (17 Byte)      |               |
| Ods_Insert_Date         | Date                |               |
| Ods_Last_Update_Date    | Date                |               |
|-------------------------+---------------------+---------------|
#+BEGIN_LaTeX
\normalsize
#+END_LaTeX
*** PRM_ROM_INCOL_EVENTS_AP
#+BEGIN_LaTeX
\footnotesize
#+END_LaTeX
#+ATTR_LaTeX: :environment longtable :align l|l|l
|---------------------------+---------------------+---------------|
| *Column Name*             | *Data Type*         | *Description* |
|---------------------------+---------------------+---------------|
| Edr_Id                    | Number (11)         |               |
| Generated_Rec             | Number (4)          |               |
| Rerate_Cnt                | Number (3)          |               |
| Sys_Creation_Date         | Date                |               |
| Sys_Update_Date           | Date                |               |
| Operator_Id               | Number (9)          |               |
| Application_Id            | Char (6 Byte)       |               |
| Dl_Service_Code           | Char (5 Byte)       |               |
| Dl_Update_Stamp           | Number (4)          |               |
| Record_Type               | Char (1 Byte)       |               |
| Tap_In_File_Name          | Varchar2 (20 Byte)  |               |
| Tap_In_File_Seq_Number    | Number (5)          |               |
| Tadig_File_Type           | Char (2 Byte)       |               |
| Record_Position           | Varchar2 (6 Byte)   |               |
| Charge_Type               | Char (1 Byte)       |               |
| Charge_Parameter          | Number (18,5)       |               |
| Uom                       | Char (2 Byte)       |               |
| Charge_Amount             | Number (18,5)       |               |
| Charge_Amount_Rc          | Number (18,5)       |               |
| Charge_Amount_Sdr         | Number (18,5)       |               |
| Currency_Code             | Char (3 Byte)       |               |
| Rap_File_Sequence         | Varchar2 (20 Byte)  |               |
| Carrier_Cd                | Varchar2 (20 Byte)  |               |
| Service_Type              | Char (1 Byte)       |               |
| Normalized_Calling_Number | Char (20 Byte)      |               |
| Normalized_Called_Number  | Char (20 Byte)      |               |
| Call_Direction            | Char (1 Byte)       |               |
| Country_Code              | Char (3 Byte)       |               |
| Serving_Bid               | Char (5 Byte)       |               |
| Event_Start_Date_Time     | Date                |               |
| Process_Date              | Date                |               |
| Bp_Start_Date             | Date                |               |
| Bp_End_Date               | Date                |               |
| Local_Currency            | Char (3 Byte)       |               |
| Rating_Curr               | Char (3 Byte)       |               |
| Exchange_Rate             | Number (18,5)       |               |
| Call_Type_Level_1         | Char (3 Byte)       |               |
| Call_Type_Level_2         | Char (2 Byte)       |               |
| Call_Type_Level_3         | Varchar2 (11 Byte)  |               |
| Tax_Type                  | Char (2 Byte)       |               |
| Future_Buff               | Varchar2 (443 Byte) |               |
| Au_Id                     | Number (9)          |               |
| Teleservicecode           | Char (2 Byte)       |               |
| Supp_Serv_Cd              | Char (2 Byte)       |               |
| Validation_Sts            | Char (1 Byte)       |               |
| Aprm_Edr_Id               | Number (20)         |               |
| Orig_Brok_Filename        | Varchar2 (24 Byte)  |               |
| File_Avail_Ts             | Char (14 Byte)      |               |
| File_Avail_Ts_Offst       | Char (5 Byte)       |               |
| Transcut_Ts               | Char (14 Byte)      |               |
| Transcut_Ts_Offst         | Char (5 Byte)       |               |
| Tenant_Cd                 | Varchar2 (20 Byte)  |               |
| Network_Element_Type      | Char (1 Byte)       |               |
| Network_Element_Id        | Char (50 Byte)      |               |
| Chr_Prt_Pub_User_Id       | Char (64 Byte)      |               |
| Non_Chr_Prt_Pub_User_Id   | Char (64 Byte)      |               |
| Event_Reference           | Char (64 Byte)      |               |
| Sim_Toolkit_Ind           | Char (1 Byte)       |               |
| Message_Event_Service     | Char (17 Byte)      |               |
| Mobile_Session_Service    | Char (17 Byte)      |               |
| Non_Chrg_Party_Num        | Char (17 Byte)      |               |
| Ods_Insert_Date           | Date                |               |
| Ods_Last_Update_Date      | Date                |               |
|---------------------------+---------------------+---------------|


#+ATTR_LaTeX: :width 14cm
      [[file:Pictures/shahn.jpg]]

#+BEGIN_LaTeX
\normalsize
\newpage
#+END_LaTeX

* EpsMonitor
   The EpsMonitors are located on all production servers listed in the diagram below and can be found at
   */apps/amduser/prodtc*/eps/EpsMonitors*, *where * = 1-6*


#+ATTR_LaTeX: :width 10cm
   file:Pictures/EpsMonitors.png


:PICTURE:
digraph BI {
	
graph [splines=ortho nodesep=0.8  rankdir=LR  constraint=false overlap=false style=bold];



subgraph cluster_2 {
	 {rank = same; "EpsMonitor\nkpr01bch01" "EpsMonitor\nkpr01bch05" }
	 "WebMonitor\nCallDump" -> "EpsMonitor\nkpr01bch05" [dir=both ];
	 "WebMonitor\nCallDump" -> "EpsMonitor\nkpr01bch01" [dir=both];	
	 "EpsMonitor\nkpr01bch05" -> "EpsMonitor\nkpr01bch01" [style=dashed arrowhead=none xlabel="Includes Servers\n2,3,4"];
	color="#FFFFFF";
	label = "Batch Servers";
}

subgraph cluster_3 {
		 {rank = same; "EpsMonitor\nkpr01eve01" "EpsMonitor\nkpr01eve06" }
"EpsMonitor\nkpr01eve06" -> "EpsMonitor\nkpr01eve01"[style=dashed arrowhead=none splines=true xlabel="Includes Servers\n2,3,4,5"];
"WebMonitor\nCallDump" -> "EpsMonitor\nkpr01eve01"[dir=both];
"WebMonitor\nCallDump" -> "EpsMonitor\nkpr01eve06"[dir=both];
color="#FFFFFF";
label = "Event Servers";		
}

"Joe/Jane \n Ops" -> "WebMonitor\nCallDump"[dir=both];	
"WebMonitor\nCallDump" -> "EpsMonitor\nkpr01oprmn"[dir=both];

}
:END:
* Footnotes

[fn:8] *TWS* Job

[fn:7] Data Management and Integration

[fn:6] Mass File Transfer

[fn:5] Customer Telephone Number

[fn:4] Home Location Resource

[fn:3] Application which implements the *SCP* Protocol

[fn:2] Service Control Protocol

[fn:1] Transfer Account Data Interchange Group
* Task List
** TODO Usage Playbook
"mdn" ["resource value"] -> "agd1_resources"
"agd1_resources"  -> "subscriber_id"
"agd1_resources"  -> "customer_id"
"agd1_resources" -> "cycle_code"

"ape1_rated_events" -> "l3_physical_file_id"
"ape1_rated_events" -> "l9_serve_sid/l9_home_sid"

"ac_physical_files" -> "Identifier/l3_physical_file_id"
"ac_physical_files" -> ""

*** Purpose of this document
    - The purpose of this document is to describe the Usage process flow, including a high level description of the data flow, potential points of failure, automated monitoring and alerts, and mitigation and failover plans.

    - This document will also list the system owners, support contacts, and the impacted business areas and contacts.

    - This document will provide a clear understanding of the impact to business processing and the level of urgency to resolve issues.

    - This document will describe the process inputs and outputs noting data handoffs between systems or between vendors.

    - This document will be the updated source for internal and external contacts, including on and off hour support contacts, escalation points and expected response times.

*** Definition of Responsibilities
    |------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------|
    | Role             | Team                   | Responsibilities                                                                                                         | Best Practices                                                           |
    |------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------|
    | ProcessOwner     | IS Billing Ops         | Firstpoint of contact and technical SME for process issues                                                               | Join Incident Bridgesand use the Playbook as a guide in issue resolution |
    |                  |                        | Initial triage of issues to identify areas of failure                                                                    | Maintain documentation (Playbook)                                        |
    |                  |                        |                                                                                                                          | Involvement in projects impacting the process                            |
    |                  |                        |                                                                                                                          |                                                                          |
    | Business Partner | Mediation              | It is this team that provides the usage files we process.                                                                | They are the first leg in usage processing.                              |
    |                  |                        |                                                                                                                          |                                                                          |
    | Business Partner | Inter-carrier services | Provide input and ifneeded use their MCO process to pause collection treatment for Customer in case of payment failure . |                                                                          |
    |------------------+------------------------+--------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------|


    |-----------------------------|
    | Organization                |
    |-----------------------------|
    | Finance                     |
    | ICS (Intercarrier Services) |
    | RA (Revenue Assurance)      |
    |-----------------------------|

*** Impacted Systems

    It has been said that all roads lead through Turbo-Charging so there is no subsystem that is unaffected, but here are some that are impacted the most.

    |--------------------+------------------------------------------------------------------------------------------------------------------------------+------------|
    | Areas/Teams        | Impact                                                                                                                       | Direction  |
    |--------------------+------------------------------------------------------------------------------------------------------------------------------+------------|
    | Engineering        | Collects the call records and sends them to Mediation                                                                        | Upstream   |
    | NDC (Mediation)    | Converts the raw switch records to the UFF format sends all files to the CallDump, sends just the billable records to *TOPS* | Upstream   |
    | EPC/BPT            | Creates the rating configuration for Turbo-Charging                                                                          | Upstream   |
    | IS Billing         | Without Usage there can be no bills.                                                                                         | Downstream |
    | Revenue Accounting | Processing late or missing usage will cause the financials to be off.                                                        | Downstream |
    | Revenue Assurance  | Bill accuracy will be affected.                                                                                              | Downstream |
    |--------------------+------------------------------------------------------------------------------------------------------------------------------+------------|

*** Data Flow Diagram
    [[file:uf.png][Usage Flow]]

*** Phases
    Need Picture - Boiler plate

*** Checklist

*** Alerting and Monitoring
    Usage has the most complete and thorough monitoring systems within all of *TOPS*, with every usage feed and sub-system has a associated report. 
    The [[https://usc.intranet.teldta.com/sites/is/operations/IS_Billing_Ops/Shared%2520Documents/Operational%2520Support%2520Guide%2520-%2520Usage.docx][*Usage Operational Support Guide*]] has a list of all of the monitoring reports currently active.
    In addition the [[https://kpr01scd01.uscc.com:8080/WebMonitor/servlet/WebMonitor?MonName=Dash][EPS Monitors]] provides a dashboard to the entire usage process.

*** Known Issues and Resolution Plans
*** Internal Contacts
   - Mediation
     The teams purpose is to provision customers on our network as well as handling all Usage files that originate outside of *TOPS*
     - *Manager* Craig Stalsberg
     - *Email* USCDLISProvisioningandDataCollection@uscellular.com
     - *When to Contact* Missing Usage (UFF, TAP, CIBER) files
   - ICS (Inter-carrier Services)
     This team owns the business relationship between USCC and other cellular carriers that we have roaming agreements with.
     - *Manager* Liz Pierce
     - *Email* USCDLIntercarrierBusinessDepartment@uscellular.com
     - *When to Contact* Whenever we have any question about anything for our Roaming partners. Missing a roaming file from AT&T??? Call ICS....
   - Revenue Accounting
     Looks at usage from a financial standpoint to see if all revenue is accounted for.
     - *Manager*  Heather B Jeschke
     - *Email* Heather.Jeschke@uscellular.com; Jones, Miguel.Jones@uscellular.com
     - *When to Contact* They will contact us mostly about roaming usage.
   - Engineering
     This group handles all towers, switches etc. that produce usage.
     - *Manager*  ***
     - *Email* William.Pack@uscellular.com
     - *When to Contact* When there is a large decrease/increase in data volume.
   - Revenue Assurance
     Looks at random bills to find issues that may have occured while processing usage.
     - *Manager*  Sangeeta Khedekar
     - *Email* Sangeeta.Khedekar@uscellular.com; Christine.Bekos@uscellular.com; Deanna.Andrews@uscellular.com
     - *When to Contact* They will contact us if they see any discrepancy on the bill.
*** External Contacts
   - *TNS*
     The roaming clearinghouse for TAP (data, VoLTE, GSM) usage. The business relationship is help by ICS, contact them for any questions.
   - *Syniverse*
      The roaming clearinghouse for CDMA (voice, 3G) usage, contact through ICS.
   - *Valista*
   - *Amdocs*
     Our business partner for all billing. The three gentlemen below are our usage experts for all things TOPS. If there is a question you can't answer these are the guys to contact.     
     - *Serhiy Potishuk*
       - *Email*  SERHIYP@amdocs.com
       - *When to contact* Serhiy's is the *SME* for *APRM*
     - *Amit Dror*
       - *Email* Amit.Dror@amdocs.com>
       - *When to contact* Handles most *Turbo-Charging* questions.
     - *Satish Kumar Thatikonda*
       - *Email* Satish.Thatikonda@amdocs.com
       - *When to contact* Most everything that is usage related.
*** Reference Data
