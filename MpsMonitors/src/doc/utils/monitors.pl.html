<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>monitors.pl</title>
<link rev="made" href="mailto:" />
</head>

<style type="text/css">
<!--
/* default style sheet generated by perltidy */
body {background: #FFFFFF; color: #000000}
pre { color: #000000; 
      background: #F0F0F0;
      font-family: courier;
    } 

.c  { color: #228B22;} /* comment */
.cm { color: #000000;} /* comma */
.co { color: #000000;} /* colon */
.h  { color: #CD5555; font-weight:bold;} /* here-doc-target */
.hh { color: #CD5555; font-style:italic;} /* here-doc-text */
.i  { color: #00688B;} /* identifier */
.j  { color: #CD5555; font-weight:bold;} /* label */
.k  { color: #8B008B; font-weight:bold;} /* keyword */
.m  { color: #FF0000; font-weight:bold;} /* subroutine */
.n  { color: #B452CD;} /* numeric */
.p  { color: #000000;} /* paren */
.pd { color: #228B22; font-style:italic;} /* pod-text */
.pu { color: #000000;} /* punctuation */
.q  { color: #CD5555;} /* quote */
.s  { color: #000000;} /* structure */
.sc { color: #000000;} /* semicolon */
.v  { color: #B452CD;} /* v-string */
.w  { color: #000000;} /* bareword */
-->
</style>
<body style="background-color: white">
<a name="-top-"></a>
<h1>monitors.pl</h1>

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<ul>

		<li><a href="#monitors_pl">monitors.pl</a></li>
		<ul>

			<li><a href="#author">AUTHOR</a></li>
			<li><a href="#description">DESCRIPTION</a></li>
			<li><a href="#usage_">USAGE:</a></li>
			<li><a href="#synopsis">SYNOPSIS</a></li>
			<li><a href="#monitors_main">monitors main</a></li>
			<li><a href="#parse__"><code>parse()</code></a></li>
			<li><a href="#start__"><code>start()</code></a></li>
			<li><a href="#stop__"><code>stop()</code></a></li>
			<li><a href="#bounce__"><code>bounce()</code></a></li>
			<li><a href="#get_config__"><code>get_config()</code></a></li>
			<li><a href="#usage__"><code>usage()</code></a></li>
			<li><a href="#todo">TODO</a></li>
		</ul>

	</ul>

</ul>
<!-- INDEX END -->
<h2>Code Index:</h2>
<!-- BEGIN CODE INDEX --><a name="code-index"></a>
<ul>
<li><a href="#parse-">package main</a>
<ul>
<li><a href="#parse-">parse</a></li>
<li><a href="#start-">start</a></li>
<li><a href="#stop-">stop</a></li>
<li><a href="#bounce-">bounce</a></li>
<li><a href="#get_config-">get_config</a></li>
<li><a href="#usage-">usage</a></li>
</ul>
</li>
<li><a href="#EOF-">EOF</a></li>
</ul>
<!-- END CODE INDEX -->

<hr />
<pre>#!/opt/perl5/bin/perl

</pre><p></p>
<h2><a name="monitors_pl">monitors.pl</a></h2>
<p>
</p>
<h3><a name="author">AUTHOR</a></h3>
<pre>
  Pete Chudykowski</pre>
<p>
</p>
<h3><a name="description">DESCRIPTION</a></h3>
<pre>
  monitors.pl is a script utility which allows to remotely start, stop,
  or bounce the MPS Monitors.
  Monitors are started by executing a StartMonitors command on the remote
  production machine(s).  This is done via the Net::Telnet module, which
  requires login information.  User is required to provide User ID and
  Password for production interactively on the command line.</pre>
<p>
</p>
<h3><a name="usage_">USAGE:</a></h3>
<pre>
  monitors.pl -action [target]
  monitors.pl [-start|-stop|-bounce] [m0X,m0Y|all]</pre>
<pre>
  -h --help       Display this help message.</pre>
<pre>
  ACTION:
  -start          Start the monitors on the specified markets.
  -stop           Stop the monitors on the specified markets.
  -bounce         Bounce the monitors on the specified markets.</pre>
<pre>
  TARGET:
  m0X,m0X         List of markets on which to perform the Action.  X = market number
  all (default)   Performs the Action on all markets defined in config.xml</pre>
<p>
</p>
<h3><a name="synopsis">SYNOPSIS</a></h3>
<pre>
  monitors.pl -start              #start the monitors on all markets
  monitors.pl -start all          #start the monitors on all markets
  monitors.pl -stop m01           #stop m01 monitor only
  monitors.pl -bounce m02,m03,m06 #bounce monitors on markets 2, 3, and 6</pre>
<pre>

<span class="k">use</span> <span class="w">strict</span><span class="sc">;</span>

<span class="k">BEGIN</span>
<span class="s">{</span>
  <span class="k">unshift</span> <span class="i">@INC</span><span class="cm">,</span><span class="q">&quot;/users/md1pchu1/lib/perl5/site_perl/5.8.0/&quot;</span><span class="sc">;</span>
<span class="s">}</span>

<span class="k">use</span> <span class="w">Carp</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">MonitorControl</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">XML::Simple</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">Term::ReadKey</span><span class="sc">;</span>

</pre><p></p>
<h3><a name="monitors_main">monitors main</a></h3>
<pre>
  Determine what action the user requested (start, stop, bounce).
  Perform the action on the specified target markets.
  Display usage if command is malformatted or help was requested.</pre>
<pre>
<span class="k">if</span><span class="s">(</span><span class="k">grep</span> <span class="q">/-start/</span><span class="cm">,</span> <span class="i">@ARGV</span><span class="s">)</span>
<span class="s">{</span>
  <span class="c"># check if the target is defined</span>
  <span class="c"># if not set to all</span>
  <span class="k">my</span> <span class="i">$markets</span> = <span class="q">&quot;all&quot;</span><span class="sc">;</span>
  <span class="k">for</span><span class="s">(</span><span class="k">my</span> <span class="i">$i</span>=<span class="n">0</span><span class="sc">;</span> <span class="i">$i</span>&lt;<span class="i">@ARGV</span><span class="sc">;</span> <span class="i">$i</span>++<span class="s">)</span>
  <span class="s">{</span>
    <span class="k">if</span><span class="s">(</span><span class="i">$ARGV</span>[<span class="i">$i</span>] <span class="k">eq</span> <span class="q">&quot;-start&quot;</span><span class="s">)</span>
    <span class="s">{</span>
      <span class="i">$markets</span> = <span class="i">$ARGV</span>[<span class="i">$i</span>+<span class="n">1</span>]<span class="sc">;</span>
      <span class="k">last</span><span class="sc">;</span> 
    <span class="s">}</span>
  <span class="s">}</span>
  <span class="i">start</span><span class="s">(</span><span class="i">parse</span><span class="s">(</span><span class="i">$markets</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span>     
<span class="s">}</span>
<span class="k">elsif</span><span class="s">(</span><span class="k">grep</span> <span class="q">/-stop/</span><span class="cm">,</span><span class="i">@ARGV</span><span class="s">)</span>
<span class="s">{</span>
  <span class="c"># check if the target is defined</span>
  <span class="c"># if not set to all</span>
  <span class="k">my</span> <span class="i">$markets</span> = <span class="q">&quot;all&quot;</span><span class="sc">;</span>
  <span class="k">for</span><span class="s">(</span><span class="k">my</span> <span class="i">$i</span>=<span class="n">0</span><span class="sc">;</span> <span class="i">$i</span>&lt;<span class="i">@ARGV</span><span class="sc">;</span> <span class="i">$i</span>++<span class="s">)</span>
  <span class="s">{</span>
    <span class="k">if</span><span class="s">(</span><span class="i">$ARGV</span>[<span class="i">$i</span>] <span class="k">eq</span> <span class="q">&quot;-stop&quot;</span><span class="s">)</span>
    <span class="s">{</span>
      <span class="i">$markets</span> = <span class="i">$ARGV</span>[<span class="i">$i</span>+<span class="n">1</span>]<span class="sc">;</span>
      <span class="k">last</span><span class="sc">;</span> 
    <span class="s">}</span>
  <span class="s">}</span>
  <span class="i">stop</span><span class="s">(</span><span class="i">parse</span><span class="s">(</span><span class="i">$markets</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span>     
<span class="s">}</span>
<span class="k">elsif</span><span class="s">(</span><span class="k">grep</span> <span class="q">/-bounce/</span><span class="cm">,</span><span class="i">@ARGV</span><span class="s">)</span>
<span class="s">{</span>
  <span class="c"># check if the target is defined</span>
  <span class="c"># if not set to all</span>
  <span class="k">my</span> <span class="i">$markets</span> = <span class="q">&quot;all&quot;</span><span class="sc">;</span>
  <span class="k">for</span><span class="s">(</span><span class="k">my</span> <span class="i">$i</span>=<span class="n">0</span><span class="sc">;</span> <span class="i">$i</span>&lt;<span class="i">@ARGV</span><span class="sc">;</span> <span class="i">$i</span>++<span class="s">)</span>
  <span class="s">{</span>
    <span class="k">if</span><span class="s">(</span><span class="i">$ARGV</span>[<span class="i">$i</span>] <span class="k">eq</span> <span class="q">&quot;-bounce&quot;</span><span class="s">)</span>
    <span class="s">{</span>
      <span class="i">$markets</span> = <span class="i">$ARGV</span>[<span class="i">$i</span>+<span class="n">1</span>]<span class="sc">;</span>
      <span class="k">last</span><span class="sc">;</span> 
    <span class="s">}</span>
  <span class="s">}</span>
  <span class="i">bounce</span><span class="s">(</span><span class="i">parse</span><span class="s">(</span><span class="i">$markets</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span>
<span class="s">}</span>
<span class="k">elsif</span><span class="s">(</span><span class="k">grep</span> <span class="q">/-h/</span><span class="cm">,</span> <span class="i">@ARGV</span> <span class="k">or</span> 
      <span class="k">grep</span> <span class="q">/--help/</span><span class="cm">,</span> <span class="i">@ARGV</span> <span class="k">or</span>
      <span class="i">@ARGV</span> == <span class="n">0</span><span class="s">)</span>
<span class="s">{</span>
  <span class="k">print</span> <span class="i">usage</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
  <span class="k">exit</span> <span class="n">-1</span><span class="sc">;</span>
<span class="s">}</span>
<span class="k">else</span>
<span class="s">{</span>
  <span class="w">croak</span> <span class="q">&quot;ERROR: Unknown or undifined action!\n\n&quot;</span> <span class="cm">,</span> <span class="i">usage</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
<span class="s">}</span>


</pre><p></p>
<h3><a name="parse__"><code>parse()</code></a></h3>
<pre>
  Parses the action target argument.
  Returns a list of markets targeted for action.</pre>
<pre><a name="parse-"></a><span class="k">sub </span><span class="m">parse</span>
<span class="s">{</span>
  <span class="k">my</span> <span class="i">$markets</span> = <span class="k">shift</span><span class="sc">;</span>
  <span class="k">my</span> <span class="i">$config</span> = <span class="i">get_config</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
  
  <span class="k">my</span> <span class="i">@markets</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span>
  <span class="k">if</span><span class="s">(</span><span class="i">$markets</span> <span class="k">eq</span> <span class="q">&quot;all&quot;</span><span class="s">)</span>
  <span class="s">{</span>
    <span class="k">return</span> <span class="k">sort</span><span class="s">(</span><span class="k">keys</span><span class="s">(</span><span class="i">%$config</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span>
  <span class="s">}</span>
  <span class="k">else</span>
  <span class="s">{</span>
    <span class="k">foreach</span> <span class="k">my</span> <span class="i">$mkt</span> <span class="s">(</span><span class="k">split</span><span class="s">(</span><span class="q">/,/</span><span class="cm">,</span><span class="i">$markets</span><span class="s">)</span><span class="s">)</span>
    <span class="s">{</span>
      <span class="c">#simple validity check</span>
      <span class="k">if</span><span class="s">(</span><span class="k">grep</span> <span class="i">$mkt</span><span class="cm">,</span><span class="s">(</span><span class="k">keys</span><span class="s">(</span><span class="i">%$config</span><span class="s">)</span><span class="s">)</span><span class="s">)</span>
      <span class="s">{</span>
        <span class="k">push</span><span class="s">(</span><span class="i">@markets</span><span class="cm">,</span> <span class="i">$mkt</span><span class="s">)</span><span class="sc">;</span>
      <span class="s">}</span>
      <span class="k">else</span>
      <span class="s">{</span>
        <span class="w">croak</span> <span class="q">&quot;\nWARNING: $mkt is not a valid market.\n&quot;</span><span class="sc">;</span>
      <span class="s">}</span>
    <span class="s">}</span><span class="c"># end foreach</span>
  <span class="s">}</span><span class="c"># end if-else</span>
  <span class="k">return</span> <span class="i">@markets</span><span class="sc">;</span>
<span class="s">}</span>


</pre><p></p>
<h3><a name="start__"><code>start()</code></a></h3>
<pre>
  Start the moniotrs on requested markets.
  Unless already defined, asks user for connect info.</pre>
<pre>
<a name="start-"></a><span class="k">sub </span><span class="m">start</span>
<span class="s">{</span>
  <span class="k">my</span> <span class="i">@markets</span> = <span class="i">@_</span><span class="sc">;</span>
  <span class="k">my</span> <span class="i">$config</span> = <span class="i">get_config</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
  
  <span class="k">unless</span><span class="s">(</span><span class="k">defined</span> <span class="i">$config</span>-&gt;{<span class="w">login</span>}<span class="s">)</span>
  <span class="s">{</span>
    <span class="k">print</span> <span class="q">&quot;\nEnter production user ID: &quot;</span><span class="sc">;</span>
    <span class="i">$config</span>-&gt;{<span class="w">login</span>} = <span class="q">&lt;STDIN&gt;</span><span class="sc">;</span>
    <span class="k">chomp</span> <span class="i">$config</span>-&gt;{<span class="w">login</span>}<span class="sc">;</span>
  <span class="s">}</span>
    
  <span class="k">unless</span><span class="s">(</span><span class="k">defined</span> <span class="i">$config</span>-&gt;{<span class="w">passwd</span>}<span class="s">)</span>
  <span class="s">{</span> 
    <span class="k">print</span> <span class="q">&quot;\nEnter production password for $config-&gt;{login}: &quot;</span><span class="sc">;</span>
    <span class="i">ReadMode</span><span class="s">(</span><span class="q">'noecho'</span><span class="s">)</span><span class="sc">;</span>
    <span class="i">$config</span>-&gt;{<span class="w">passwd</span>} = <span class="q">&lt;STDIN&gt;</span><span class="sc">;</span>  <span class="c">#ReadLine(0);</span>
    <span class="k">chomp</span> <span class="i">$config</span>-&gt;{<span class="w">passwd</span>}<span class="sc">;</span>
    <span class="i">ReadMode</span><span class="s">(</span><span class="q">'normal'</span><span class="s">)</span><span class="sc">;</span>
    <span class="k">print</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span>
  <span class="s">}</span>
    
  <span class="k">foreach</span> <span class="k">my</span> <span class="i">$mkt</span> <span class="s">(</span><span class="i">@markets</span><span class="s">)</span>
  <span class="s">{</span>
    <span class="k">print</span> <span class="q">&quot;\nStarting &quot;</span> . <span class="k">uc</span><span class="s">(</span><span class="i">$mkt</span><span class="s">)</span> . <span class="q">&quot; monitors ... \n&quot;</span><span class="sc">;</span>
    <span class="k">print</span> <span class="q">&quot;server: &quot;</span><span class="cm">,</span> <span class="i">$config</span>-&gt;{<span class="i">$mkt</span>}-&gt;{<span class="w">server</span>} <span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">$mon</span> = <span class="w">MonitorControl</span><span class="w">-&gt;new</span><span class="s">(</span><span class="w">server</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="i">$mkt</span>}-&gt;{<span class="w">server</span>}<span class="cm">,</span>
                                  <span class="w">port</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="i">$mkt</span>}-&gt;{<span class="w">port</span>}<span class="cm">,</span>
                                  <span class="w">login</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="w">login</span>}<span class="cm">,</span>
                                  <span class="w">passwd</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="w">passwd</span>}<span class="cm">,</span>
                                  <span class="w">location</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="i">$mkt</span>}-&gt;{<span class="w">location</span>}<span class="s">)</span><span class="sc">;</span>
    <span class="i">$mon</span><span class="i">-&gt;start</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
    <span class="k">print</span> <span class="q">&quot;done.\n\n&quot;</span><span class="sc">;</span>
  <span class="s">}</span>
<span class="s">}</span>


</pre><p></p>
<h3><a name="stop__"><code>stop()</code></a></h3>
<pre>
  Stop the moniotrs on requested markets.</pre>
<pre>
<a name="stop-"></a><span class="k">sub </span><span class="m">stop</span>
<span class="s">{</span>
  <span class="k">my</span> <span class="i">@markets</span> = <span class="i">@_</span><span class="sc">;</span>
  <span class="k">my</span> <span class="i">$config</span> = <span class="i">get_config</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
  
  <span class="k">foreach</span> <span class="k">my</span> <span class="i">$mkt</span> <span class="s">(</span><span class="i">@markets</span><span class="s">)</span>
  <span class="s">{</span>
    <span class="k">print</span> <span class="q">&quot;Stopping $mkt monitors ... \n&quot;</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">$mon</span> = <span class="w">MonitorControl</span><span class="w">-&gt;new</span><span class="s">(</span><span class="w">server</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="i">$mkt</span>}-&gt;{<span class="w">server</span>}<span class="cm">,</span>
                                  <span class="w">port</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="i">$mkt</span>}-&gt;{<span class="w">port</span>}<span class="cm">,</span>
                                  <span class="w">usr</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="i">$mkt</span>}-&gt;{<span class="w">login</span>}<span class="cm">,</span>
                                  <span class="w">location</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="i">$mkt</span>}-&gt;{<span class="w">location</span>}<span class="s">)</span><span class="sc">;</span>
    <span class="i">$mon</span><span class="i">-&gt;stop</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
    <span class="k">print</span> <span class="q">&quot;done.\n\n&quot;</span><span class="sc">;</span>
  <span class="s">}</span>
<span class="s">}</span>


</pre><p></p>
<h3><a name="bounce__"><code>bounce()</code></a></h3>
<pre>
  Bounce the moniotrs on requested markets.</pre>
<pre>
<a name="bounce-"></a><span class="k">sub </span><span class="m">bounce</span>
<span class="s">{</span>
  <span class="k">my</span> <span class="i">@markets</span> = <span class="i">@_</span><span class="sc">;</span>
  <span class="k">my</span> <span class="i">$config</span> = <span class="i">get_config</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
  
  <span class="k">unless</span><span class="s">(</span><span class="k">defined</span> <span class="i">$config</span>-&gt;{<span class="w">login</span>}<span class="s">)</span>
  <span class="s">{</span>
    <span class="k">print</span> <span class="q">&quot;\nEnter production user ID: &quot;</span><span class="sc">;</span>
    <span class="i">$config</span>-&gt;{<span class="w">login</span>} = <span class="q">&lt;STDIN&gt;</span><span class="sc">;</span>
    <span class="k">chomp</span> <span class="i">$config</span>-&gt;{<span class="w">login</span>}<span class="sc">;</span>
  <span class="s">}</span>
    
  <span class="k">unless</span><span class="s">(</span><span class="k">defined</span> <span class="i">$config</span>-&gt;{<span class="w">passwd</span>}<span class="s">)</span>
  <span class="s">{</span> 
    <span class="k">print</span> <span class="q">&quot;\nEnter production password for $config-&gt;{login}: &quot;</span><span class="sc">;</span>
    <span class="i">ReadMode</span><span class="s">(</span><span class="q">'noecho'</span><span class="s">)</span><span class="sc">;</span>
    <span class="i">$config</span>-&gt;{<span class="w">passwd</span>} = <span class="q">&lt;STDIN&gt;</span><span class="sc">;</span>  <span class="c">#ReadLine(0);</span>
    <span class="k">chomp</span> <span class="i">$config</span>-&gt;{<span class="w">passwd</span>}<span class="sc">;</span>
    <span class="i">ReadMode</span><span class="s">(</span><span class="q">'normal'</span><span class="s">)</span><span class="sc">;</span>
    <span class="k">print</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span>
  <span class="s">}</span>
  
  <span class="k">foreach</span> <span class="k">my</span> <span class="i">$mkt</span> <span class="s">(</span><span class="i">@markets</span><span class="s">)</span>
  <span class="s">{</span>
    <span class="k">print</span> <span class="q">&quot;Bouncing $mkt monitors ... \n&quot;</span><span class="sc">;</span>
    <span class="k">my</span> <span class="i">$mon</span> = <span class="w">MonitorControl</span><span class="w">-&gt;new</span><span class="s">(</span><span class="w">server</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="i">$mkt</span>}-&gt;{<span class="w">server</span>}<span class="cm">,</span>
                                  <span class="w">port</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="i">$mkt</span>}-&gt;{<span class="w">port</span>}<span class="cm">,</span>
                                  <span class="w">login</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="w">login</span>}<span class="cm">,</span>
                                  <span class="w">passwd</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="w">passwd</span>}<span class="cm">,</span>
                                  <span class="w">location</span><span class="cm">=&gt;</span><span class="i">$config</span>-&gt;{<span class="i">$mkt</span>}-&gt;{<span class="w">location</span>}<span class="s">)</span><span class="sc">;</span>
    <span class="i">$mon</span><span class="i">-&gt;bounce</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
    <span class="k">print</span> <span class="q">&quot;done.\n\n&quot;</span><span class="sc">;</span>
  <span class="s">}</span>
<span class="s">}</span>


</pre><p></p>
<h3><a name="get_config__"><code>get_config()</code></a></h3>
<pre>
  Parse the XML configuration file.
  Return the config hash.</pre>
<pre>
<a name="get_config-"></a><span class="k">sub </span><span class="m">get_config</span>
<span class="s">{</span>
  <span class="k">return</span> <span class="w">XML::Simple</span><span class="w">-&gt;new</span><span class="s">(</span><span class="s">)</span><span class="i">-&gt;XMLin</span><span class="s">(</span><span class="q">&quot;config.xml&quot;</span><span class="s">)</span><span class="sc">;</span>
<span class="s">}</span>


</pre><p></p>
<h3><a name="usage__"><code>usage()</code></a></h3>
<pre>
  Return help/usage.</pre>
<pre>
<a name="usage-"></a><span class="k">sub </span><span class="m">usage</span>
<span class="s">{</span>
  <span class="k">return</span> <span class="q">&quot;\nUSAGE:\n&quot;</span>
       . <span class="q">&quot;monitors.pl [-start|-stop|-bounce] [m0X,m0Y|all]\n\n&quot;</span>
       . <span class="q">&quot;-h --help \tDisplay this help message.\n\n&quot;</span>
       . <span class="q">&quot;ACTION:\n&quot;</span>
       . <span class="q">&quot;-start \t\tStart the monitors on the specified markets.\n&quot;</span>
       . <span class="q">&quot;-stop \t\tStop the monitors on the specified markets.\n&quot;</span>
       . <span class="q">&quot;-bounce \tBounce the monitors on the specified markets.\n\n&quot;</span>
       . <span class="q">&quot;VALUE:\n&quot;</span>
       . <span class="q">&quot;m0X,m0X \tList of markets on which to perform the Action.  &quot;</span>
       . <span class="q">&quot;X = market number\n&quot;</span>
       . <span class="q">&quot;all (default)\tPerforms the Action on all markets defined in &quot;</span>
       . <span class="q">&quot;config.xml\n\n&quot;</span>
       . <span class="q">&quot;EXAMPLES:\n&quot;</span>
       . <span class="q">&quot;monitors.pl -start\t\t#start the monitors on all markets\n&quot;</span>
       . <span class="q">&quot;monitors.pl -start all\t\t#start the monitors on all markets\n&quot;</span>
       . <span class="q">&quot;monitors.pl -stop m01\t\t#stop m01 monitor only\n&quot;</span>
       . <span class="q">&quot;monitors.pl -bounce m02,m03,m06\t#bounce monitors on markets &quot;</span>
       . <span class="q">&quot;2, 3, and 6\n\n&quot;</span><span class="sc">;</span>
<span class="s">}</span>
  
</pre><p></p>
<h3><a name="todo">TODO</a></h3>
<pre>
  Thread the start method instead of looping to speed up the process of
  bringing up the monitors.</pre>

<pre><a name="EOF-"></a></pre></body>

</html>
