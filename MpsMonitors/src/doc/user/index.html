<!-- Created with Bluefish http://bluefish.openoffice.nl/ -->
<html>
<head>
<title>MPS System Monitor Documentation</title>
<body bgcolor="#e6e6e6">
  <a name="top"></a>
  <table width="100%">
    <tr>
    <td align="left"><img src="../img/uscc_logo.gif"></td>
    <td>
      <center>
        <h2>
        <font color="#8080ff">MPS System Monitor Documentation</font>
        </h2>
        <h3>User's Guide</h3>
      </center>
    </td>
    <td align="right"><img src="../img/uscc_logo.gif"></td>
    </tr>
  </table>
  <hr align="center">
  <table width="100%" border="0" bgcolor="#ffffc0">
    <tr>
      <td align="left"><a href="../intro.html"><< prev</a></td>
      <td align="center"><a href="../">[ Home ]</a></td>
      <td align="right"><font color="lightgrey">next >></font></td>
    </tr>
  </table>
  <hr align="center">
  
  <p> &nbsp; </p>
  <ul>
    <li><b><a href="#intro">Introduction</a></b></li>
    <li><b><a href="#interface">User Interface</a></b></li>
    <li><b><a href="#config">Configuration</a></b></li>
    <ul>
      <li>
        <a href="#config_pvcs_check_out">Check out monitor.xml from PVCS</a>
      </li>
      <li>
        <a href="#config_edit_xml">Modify monitor.xml</a>
        <ul>
          <li>
            <a href="#config.general">General Configuration</a>
            <ul>
              <li>
                <a href="#config.general.schedule">Oncall Schedule</a>
              </li>
              <li>
                <a href="#config.general.associate">Associate Information</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#config.market">Market Configuration</a>  
            <ul>
              <li>
                <a href="#config.market.audit">Audit Configuration</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <a href="#config_master_copy">Update the Master Copy of the monitor.xml</a>
      </li>
      <li>
        <a href="#config_distrib">Distribute the Master Copy to production.</a>
      </li>
      <li>
        <a href="#config_pvcs_check_in">Check in monitor.xml to PVCS</a>
      </li>
    </ul>
    <li><b><a href="#utils">Utilities</a></b></li>
    <ul>
      <li><a href="#StartStop">Starting and stopping the Monitors</a></li>
      <li><a href="#distrib">Distributing Sources</a></li>
    </ul>
    <li><b><a href="#audits">Audits</a></b></li>
    <ul>
      <li><a href="#IncollectCiber">Incollect Ciber</a></li>
      <li><a href="#InfraTransfer">Infranet Transfer</a></li>
      <li><a href="#MafMonitor">Maf Monitor</a></li>
      <li><a href="#MissingBlock">Missing Block</a></li>
      <li><a href="#MissingDataFile">Missing Data File</a></li>
      <li><a href="#OutcollectCiber">Outcollect Ciber</a></li>
      <li><a href="#ProgramBehind">Program Behind</a></li>
      <li><a href="#RaterStatus">Rater Status</a></li>
      <li><a href="#StuckFile">Stuck File</a></li>
      <li><a href="#SwitchBehind">Switch Behind</a></li>
    </ul>
  </ul>
  
  <p> &nbsp; </p> 
  
  
  <hr align="center">
  <a name="intro"></a><h3>Introduction</h3>
  The Monitor is a system monitoring utility, which performs periodic 
  audits and reports on the status of the MPS system activity.<br>
  The Monitor was written to enhance the ability of the MPS personnel
  to identify and respond to real and potential issues in a prompt 
  manner thus minimizing customer impact. 

  <p><a href="#top"><font size="-1">Top</font></a></p>
  
  <a name="interface"></a><h3>User Interface</h3>
  The MPS Monitor interacts with the user in two ways.
  <ul>
    <li><a href="#interface_web">The Web</a></li>
    <li><a href="#interface_pager">Internal Paging Utility</a></li>
  </ul>
  <p>&nbsp;</p>
  <a name="interface_web"></a><b>Web Interface</b><p>
  The primary user interface with the monitor is Web-based.  
  The main monitor page is located at 
  <a href="http://chi1pas1.uscc.com:8080/WebMonitor/" target="blank">
  http://chi1pas1.uscc.com:8080/WebMonitor/</a>.
  <p></p>
  <center><img src="../img/screenshot1.jpeg"></center>
  <p></p>
  The page displays monitored usage information about each market in a 
  separate section.  Each section is labled with a market number at the 
  top. 
  <p></p>
  <center><img src="../img/screenshot2.jpeg"></center>
  <p></p>
  This label is also a hyperlink, 
  which displays complete current monitoring information for the referenced
  market.
  <p></p>
  <center><img size="75%" src="../img/screenshot3-a.jpeg"></center>
  
  <p> &nbsp; </p>
  <a name="interface_pager"></a><b>Paging Utility</b><p>
  Critical system information is accessed and reported by an internal 
  paging utility.  This utility (called "the Dialer") periodically performs
  a series of queries into the system, interprets the reported state, and 
  pages the current oncall associate if a potentially critical situation is 
  detected.<br>  
  The decision to page is made according to the configuration 
  settings for a particular audit.  Please see the <a href="#config">
  Configuration section</a> below for details on configuring the Monitor.
  
  <p><a href="#top"><font size="-1">Top</font></a></p>
  
  <a name="config"></a><h3>Configuring the MPS Monitor</h3>
  The behavior of the Monitor can be almost entirely controlled from a 
  single configuration file named 
  <font color="#20b020"><b>monitor.xml</b></font>.  
  <p>
  In order to avoid any undesirable outcome when updating the 
  <font color="#20b020"><b>monitor.xml</b></font>, follow these steps.
  <br>
  <ol>
    <li>
        <a href="#config_pvcs_check_out">
            Check out monitor.xml from PVCS
        </a>
    </li>
    <li>
        <a href="#config_edit_xml">Modify monitor.xml</a>
    </li>
    <li>
        <a href="#config_master_copy">
            Update the Master Copy of the monitor.xml
        </a>
    </li>
    <li>
        <a href="#config_distrib">
            Distribute the Master Copy to production.
        </a>
    </li>
    <li>
        <a href="#config_pvcs_check_in">
            Check in monitor.xml to PVCS
        </a>
    </li>
  </ol>
  <p>&nbsp;</p>
  <ol>
    <a name="config_pvcs_check_out"></a>
    <li><b>Check out <font color="#20b020">monitor.xml</font> from PVCS</b>
    <p>
    <ul>
        <li>
            To access the versioned copy of 
            <font color="#20b020"><b>monitor.xml</b></font>, 
            first log in to 
            <a href="http://chi1pbs1.uscc.com/vminet.html" 
               target="blank">
                PVCS
            </a>
        </li>
        <li>Click on the MPS project link.</li>
        <li>Your User ID is your network ID (e.g. md1pchu1)</li>
        <li>
            Your Initial password is <i>temp11</i>.  Change your password
            upon the initial login.<br>
            <b>
                If you are unable to log in, please contact the SCM team.
            </b>
        </li>
        <li>
            Check out the <font color="#20b020"><b>monitor.xml</b></font>
            file located in the root of the MpsMonitors subproject.
        </li>
    </ul>
  
    <p>&nbsp;</p>
    <a name="config_edit_xml"></a>
    <li><b>
        Modify your checked-out copy of 
        <font color="#20b020">monitor.xml</font>
    </b>
    <p>
  
   <p>
    The <font color="#20b020"><b>monitor.xml</b></font> file uses XML 
    and is devided into two major sections: 
    <br>
    <ul>
      <li>
          <a href="#config.general">General Configuration</a> --
          holds oncall associate information and the oncall schedule.
          <ul>
              <li>
                <a href="#config.general.schedule">
                    Oncall Schedule
                </a>
              </li>
              <li>
                <a href="#config.general.associate">
                    Associate Information
                </a>
              </li>
          </ul>
      </li>
      <li>
          <a href="#config.market">Market Configuration</a> --
          holds information for each system check performed.  
          <ul>
              <li>
                  <a href="#config.market.audit">
                      Audit Configuration
                  </a>
                  -- How to configure a single system audit.
              </li>
          </ul>
      </li>
    </ul>
    
    <p><a href="#top"><font size="-1">Top</font></a></p>
    <p>&nbsp;</p>
    <ul>
      <li>
      <a name="config.general"></a>
      <b>Configuring the General Section</b>
      <P>
      The General Section is denoted by the tag 
        <font color="#0000ff"><</font>
        <font color="#a02020">general</font>
        <font color="#0000ff">></font>
      and contains subsections
        <font color="#0000ff"><</font>
        <font color="#a02020">schedule</font>
        <font color="#0000ff">></font>
      and
        <font color="#0000ff"><</font>
        <font color="#a02020">associate</font>
        <font color="#0000ff">></font>.
      In case of trouble, the <i>general</i> section tells the
      <a href="#interface_pager">Dialer</a> <b>who</b> should be paged and 
      <b>how</b> to contact them.
        
      <p>&nbsp;</p>
      <ul>
        <li>
          <a name="config.general.schedule"></a>
          <b>Oncall Schedule</b>
          <p>
          The 
            <font color="#0000ff"><</font>
            <font color="#a02020">schedule</font>
            <font color="#0000ff">></font>
          subsection tells the Dialer <i>who</i> should be contacted in case of
          trouble.
          <br>
          The schedule is organized by oncall period (usually one week long)
          and contains the beginning date of the oncall period, the ending
          date of the oncall period and the name of the associate scheduled
          for oncall during this period.
          <p>
          The structure of each 
            <font color="#0000ff"><</font>
            <font color="#a02020">period</font>
            <font color="#0000ff">></font>
          tag is as follows: <br>
          
          <font color="#0000ff"><</font>
          <font color="#a02020">period</font>
          <font color="#0000ff">></font>
          <br>
            &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">start_oncall</font>
            <font color="#0000ff">></font>
            [YYYYMMDD]
            <font color="#0000ff"><</font>
            <font color="#a02020">/start_oncall</font>
            <font color="#0000ff">></font>
            <br>
            &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">end_oncall</font>
            <font color="#0000ff">></font>
            [YYYYMMDD]
            <font color="#0000ff"><</font>
            <font color="#a02020">/end_oncall</font>
            <font color="#0000ff">></font>
            <br>
            &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">victim</font>
            <font color="#0000ff">></font>
            [Associate Name]
            <font color="#0000ff"><</font>
            <font color="#a02020">/victim</font>
            <font color="#0000ff">></font>
          <br>
          <font color="#0000ff"><</font>
          <font color="#a02020">/period</font>
          <font color="#0000ff">></font>
          
          <p>
          Example:
          <br>
          <font color="#0000ff"><</font>
          <font color="#a02020">period</font>
          <font color="#0000ff">></font>
          <br>
            &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">start_oncall</font>
            <font color="#0000ff">></font>
            20050509
            <font color="#0000ff"><</font>
            <font color="#a02020">/start_oncall</font>
            <font color="#0000ff">></font>
            <br>
            &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">end_oncall</font>
            <font color="#0000ff">></font>
            20050515
            <font color="#0000ff"><</font>
            <font color="#a02020">/end_oncall</font>
            <font color="#0000ff">></font>
            <br>
            &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">victim</font>
            <font color="#0000ff">></font>
            Peg
            <font color="#0000ff"><</font>
            <font color="#a02020">/victim</font>
            <font color="#0000ff">></font>
          <br>
          <font color="#0000ff"><</font>
          <font color="#a02020">/period</font>
          <font color="#0000ff">></font>
          
          <p></p>
          The above example shows that Peg is scheduled to be oncall 
          May 09th, 2005 throughg May 15th, 2005.
          <br>
          <b><font color="#ff0000">NOTE:</font> &nbsp; 
          The dates must follow the 
          <font color="#a02020">[YYYYMMDD]</font> format. </b>
        </li>
          
        <p>&nbsp;</p>
        <li>
          <a name="config.general.associate"></a>
          <b>Associate Information</b>
          <p>
          The 
            <font color="#0000ff"><</font>
            <font color="#a02020">associate</font>
            <font color="#0000ff">></font>
          subsection tells the Dialer <i>how</i> to contact an oncall associate.
          The associates are identified by name, and each has a pager number
          and an email address.  When an erroneous condition is detected in 
          the system, the Dialer first determines who is oncall, and then 
          uses the information in this section to send an alert page.
          <br>
          Each associate has a name, a pager and an email.
          <p>
          The structure of each 
            <font color="#0000ff"><</font>
            <font color="#a02020">associate</font>
            <font color="#0000ff">></font>
          tag is as follows: <br>
          
          <font color="#0000ff"><</font>
          <font color="#a02020">associate</font>
          <font color="#0000ff">></font>
          <br>
            &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">name</font>
            <font color="#0000ff">></font>
            [ASSOCIATE NAME]
            <font color="#0000ff"><</font>
            <font color="#a02020">/name</font>
            <font color="#0000ff">></font>
            <br>
            &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">pager</font>
            <font color="#0000ff">></font>
            [pager@domain.url]
            <font color="#0000ff"><</font>
            <font color="#a02020">/pager</font>
            <font color="#0000ff">></font>
            <br>
            &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">email</font>
            <font color="#0000ff">></font>
            [account@domain.url]
            <font color="#0000ff"><</font>
            <font color="#a02020">/email</font>
            <font color="#0000ff">></font>
          <br>
          <font color="#0000ff"><</font>
          <font color="#a02020">/associate</font>
          <font color="#0000ff">></font>
          
          <p></p>
          Example:
          <br>
          <font color="#0000ff"><</font>
          <font color="#a02020">associate</font>
          <font color="#0000ff">></font>
          <br>
            &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">name</font>
            <font color="#0000ff">></font>
            Peg
            <font color="#0000ff"><</font>
            <font color="#a02020">/name</font>
            <font color="#0000ff">></font>
            <br>
            &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">pager</font>
            <font color="#0000ff">></font>
            6086571401@archwireless.net
            <font color="#0000ff"><</font>
            <font color="#a02020">/pager</font>
            <font color="#0000ff">></font>
            <br>
            &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">email</font>
            <font color="#0000ff">></font>
            pauline.hrobsky@uscellular.com
            <font color="#0000ff"><</font>
            <font color="#a02020">/email</font>
            <font color="#0000ff">></font>
          <br>
          <font color="#0000ff"><</font>
          <font color="#a02020">/associate</font>
          <font color="#0000ff">></font>
          
          <p></p>
          <b><font color="#ff0000">NOTE:</font> &nbsp; 
          The name must match exactly the name as it appears in the
          <font color="#0000ff"><</font>
          <font color="#a02020">schedule</font>
          <font color="#0000ff">></font>
          section.</b>
        </li>
      </ul>
    
        <p><a href="#top"><font size="-1">Top</font></a></p>
        <p>&nbsp;</p>
      <li>  
        <a name="config.market"></a>
        <b>Configuring the Market Section</b>
        <p>
        The Market section tells the MPS Monitor what system audits it should
        perform and when to perform them.  It is divided into multiple markets, 
        each containig a series of system audits.  
        <p>
        At high level, the hierarchy is as follows: <br>
        <font face="curier">
          <pre>
         < MARKET >
             |
             --< MARKET1 >
             |      |
             |      --< AUDIT1 >
             |      |    |
             |      |    --(AUDIT 1 SETTINGS)
             |      |
             |      --< AUDITn >
             |           |
             |           --(AUDIT n SETTINGS)
             |
             --< MARKETn >
                    |
                    --< AUDIT1 >
                    |    |
                    |    --(AUDIT 1 SETTINGS)
                    |
                    --< AUDITn >
                         |
                         --(AUDIT n SETTINGS)
          </pre>
        </font>
        The Market Section is denoted by the tag 
        <font color="#0000ff"><</font>
        <font color="#a02020">MARKET</font>
        <font color="#0000ff">></font>
        and is divided into separate subsections for each market.  
        Each market subsection contains configuration options for 
        every audit performed on that market.  Each audit
        configuration section is extensively commented within the 
        <font color="#20b020"><b>monitor.xml</b></font> itself.  
        To modify the behavior of one of the checks, please read the 
        comment preceding its section.  The comment should provide 
        sufficient infomation to successfully edit the configuration 
        file.
        <p></p>
        <font color="#ff0000"><b>NOTE</b>:</font> &nbsp; 
        Please make sure to edit your audit section for all markets
        in which you wish the behavior to change.
        
        <p></p>
        The high-level structure of the Market Secton is as follows:
        <br>
        <font color="#0000ff"><</font>
        <font color="#a02020">MARKET</font>
        <font color="#0000ff">></font>
        <br>
          &nbsp; &nbsp;
          <font color="#0000ff"><</font>
          <font color="#a02020">M01</font>
          MpsLib=<font color="#3030f0">"/absolute/path/"</font> 
          SqlLib=<font color="#3030f0">"/absolute/path/"</font>
          Log=<font color="#3030f0">"/absolute/path/"</font> 
          port=<font color="#3030f0">"8999"</font>
          <font color="#0000ff">></font>
            <br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">audit 1</font>
            <font color="#0000ff">></font>
              <br>
              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
              &nbsp; &nbsp; Audit Settings ...
            <br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">/audit 1</font>
            <font color="#0000ff">></font>
            <br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <font color="a02020"><b>( Tags for audits 2-n ... )</b></font> 
            <br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">audit n</font>
            <font color="#0000ff">></font>
              <br>
              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
              &nbsp; &nbsp; Audit Settings ...
            <br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">/audit n</font>
            <font color="#0000ff">></font>
          <br>
          &nbsp; &nbsp;  
          <font color="#0000ff"><</font>
          <font color="#a02020">/M01</font>
          <font color="#0000ff">></font>
          
          <br>&nbsp;<br>
          
          <font color="a02020"><b>( Tags for markets 2-n ... )</b></font> 
          
          <br>&nbsp;<br>
          
          &nbsp; &nbsp;
          <font color="#0000ff"><</font>
          <font color="#a02020">M0n</font>
          MpsLib=<font color="#3030f0">"/absolute/path/"</font> 
          SqlLib=<font color="#3030f0">"/absolute/path/"</font>
          Log=<font color="#3030f0">"/absolute/path/"</font> 
          port=<font color="#3030f0">"8999"</font>
          <font color="#0000ff">></font>
            <br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">audit 1</font>
            <font color="#0000ff">></font>
              <br>
              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
              &nbsp; &nbsp; Audit Settings ...
            <br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">/audit 1</font>
            <font color="#0000ff">></font>
            <br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <font color="a02020"><b>( Tags for audits 2-n ... )</b></font> 
            <br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">audit n</font>
            <font color="#0000ff">></font>
              <br>
              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
              &nbsp; &nbsp; Audit Settings ...
              <br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <font color="#0000ff"><</font>
            <font color="#a02020">/audit n</font>
            <font color="#0000ff">></font>
          <br>
          &nbsp; &nbsp;  
          <font color="#0000ff"><</font>
          <font color="#a02020">/M0n</font>
          <font color="#0000ff">></font>
        <br>
        <font color="#0000ff"><</font>
        <font color="#a02020">/MARKET</font>
        <font color="#0000ff">></font>
        <p>
        As you can see above, each market subsection tag contains a
        series of parameters (MpsLib, SqlLib, Log, and port).  
        These parameters contain values inherent and common to that
        particular market. <br>
        In general, these parameters should remain unchanged unless
        requested by a developer.
          
        <p><a href="#top"><font size="-1">Top</font></a></p>  
        
        <p>&nbsp;</p>
        <ul>
          <li>
            <a name="config.market.audit"></a>
            <b>Configuring an Audit</b>
            <p></p>
            Each Audit is denoted by a tag named after the Audit.  For instance,
            an existing audit responsible for reporting any programs lagging 
            behind in processing is denoted by the tag
            <font color="#0000ff"><</font>
            <font color="#a02020">ProgramBehind</font>
            <font color="#0000ff">></font>.
            <br>
            Each audit tag has a generic <b>on/off</b> switch tag called 
            <font color="#0000ff"><</font>
            <font color="#a02020">disable</font>
            <font color="#0000ff">></font> 
            which allows a user to temporarily or permanently disable the audit.
            <br>
            The setting :
            <br>
            <font color="#0000ff"><</font>
            <font color="#a02020">disable</font>
            <font color="#0000ff">></font>
            Yes
            <font color="#0000ff"><</font>
            <font color="#a02020">/disable</font>
            <font color="#0000ff">></font>
            <br>
            causes the monitor to ignore this audit.
            <p></p>
        
            The audit tags contain information regarding the <b><i>when</i></b> and 
            the <b><i>how</i></b> of the audit.
            <p></p>
            The <b><i>when</i></b> is defined by a series of of tags used by the 
            <b>Dialer</b> in deciding when to page the current associate oncall in case
            the audit reports trouble.  The Dialer configuration is similar in
            operation to the Unix CRON.  The 5 tags that tell the monitor when it
            should run the audit are: <b>minutes</b>, <b>hours</b>, <b>days</b>,
            <b>dayofweek</b>, and <b>month</b>.
            <p></p>
            Example:
            <br>
            <font color="#0000ff"><</font>
            <font color="#a02020">minutes</font>
            <font color="#0000ff">></font>
            5,23
            <font color="#0000ff"><</font>
            <font color="#a02020">/minutes</font>
            <font color="#0000ff">></font>
            <br>
            <font color="#0000ff"><</font>
            <font color="#a02020">hours</font>
            <font color="#0000ff">></font>
            3,5,19
            <font color="#0000ff"><</font>
            <font color="#a02020">/hours</font>
            <font color="#0000ff">></font>
            <br>
            <font color="#0000ff"><</font>
            <font color="#a02020">days</font>
            <font color="#0000ff">></font>
            1-25
            <font color="#0000ff"><</font>
            <font color="#a02020">/days</font>
            <font color="#0000ff">></font>
            <br>
            <font color="#0000ff"><</font>
            <font color="#a02020">dayofweek</font>
            <font color="#0000ff">></font>
            *
            <font color="#0000ff"><</font>
            <font color="#a02020">/dayofweek</font>
            <font color="#0000ff">></font>
            <br>
            <font color="#0000ff"><</font>
            <font color="#a02020">month</font>
            <font color="#0000ff">></font>
            *
            <font color="#0000ff"><</font>
            <font color="#a02020">/month</font>
            <font color="#0000ff">></font>
            <p></p>
            An audit with the above settings would be performed every day of the month,
            on every day of the week but only on days of month 1st through the 25th, at
            3:05 AM, 3:23 AM, 5:05 AM, 5:23 AM, 7:05 PM, and 7:23 PM.
            <br>
            <font color="#ff0000"><b>NOTE</b>:</font> &nbsp;
            the ' * ' is the wildcard value meaning "All values applicable to 
            this setting."
         
            <p>&nbsp;</p>
            The <b><i>how</i></b> is defined within the tags <b>executable</b>, and
            <b>params</b>.  Essentially, these two tags tell the monitor which 
            executable it should run to perform the audit and what parameters should
            be passed in from the command line.
            <p></p>
            Example:
            <br>
            <font color="#0000ff"><</font>
            <font color="#a02020">executable</font>
            <font color="#0000ff">></font>
            Monitor/ProgramBehind.pl
            <font color="#0000ff"><</font>
            <font color="#a02020">/executable</font>
            <font color="#0000ff">></font>
            <br>
            <font color="#0000ff"><</font>
            <font color="#a02020">params</font> 
            market=<font color="#3030f0">"M01"</font> 
            sql_query=<font color="#3030f0">"program_behind.sql"</font>
            threshold=<font color="#3030f0">"2000000"</font> 
            title=<font color="#3030f0">"M01: ProgramBehind"</font>
            <font color="#a02020">/</font>
            <font color="#0000ff">></font>
            <p></p>
            <font color="#ff0000"><b>NOTE FOR DEVELOPERS</b>:</font> &nbsp;
            the value of the 
            <font color="#0000ff"><</font>
            <font color="#a02020">executable</font>
            <font color="#0000ff">></font>
            tag is a relative path to the audit executable.  The path is relative to
            the <b>MpsLib</b> argument defined in each market tag on the 
            <a href="#config.market">Market</a> level.
            <br>
            The 
            <font color="#0000ff"><</font>
            <font color="#a02020">executable/</font>
            <font color="#0000ff">></font>
            tag does not have a value, however it has a series of arguments, which
            define the command line arguments which will be used when running the 
            audit executable.
            <p></p>
            <font color="#ff0000"><b>NOTE FOR DEVELOPERS</b>:</font> &nbsp;
            the argument <b>sql_query</b> is a relative path to a 
            file containing the SQL query, which will be used by the audit executable.
            The path is relative to the <b>SqlLib</b> argument defined in each market
            tag on the <a href="#config.market">Market</a> level.
          </li>
        </ul>
      </ul>
    </li>
    <p><a href="#top"><font size="-1">Top</font></a></p>
    <p>&nbsp;</p>
    <li>
      <a name="config_master_copy"></a>
      <b>Update the Master Copy of the monitor.xml</b>
      <p>
      To configure the MPS Monitor you must first modify the master copy of
      <font color="#20b020"><b>monitor.xml</b></font>, which resides in the 
      <b>/users/common/mps/MpsMonitors/monitors/</b> directory on the 
      CHI1PAS1 server. and is distributed to
      the production servers following an update.
    </li>
    
    <p>&nbsp;</p>
    <li>
      <a name="config_distrib"></a>
      <b>Distribute the Master Copy to production</b>
      <p>
      Once the master copy of the 
      <font color="#20b020"><b>monitor.xml</b></font>
      is updated, it must be distributed to all monitored production
      machines.  This is accomplished easily with a utility called
      <font color="#a02020"><i>mdistrib.pl</i></font> which is available 
      in the <b>/users/common/mps/MpsMonitors/</b> directory on the 
      CHI1PAS1:
      <p>
      <font color="#a02020">mdistrib.pl -cfg -b</font>
      <p>
      where 
      <br>
      <font color="#a02020">-cfg</font> tells the utility to distribute
      only the configuration file, and 
      <br>
      <font color="#a02020">-b</font> tells the utility to bounce the monitor
      following the distribution.  Bouncing the monitor will ensure that the 
      changes applied to the configuration will take effect immediately in
      production.  <br>
      If you ommit the <font color="#a02020">-b</font> flag, the changes will
      take effect overnight.      
      <p>
      The complete documentation on using 
      <font color="#a02020"><i>mdistrib.pl</i></font> is available in the
      <a href="#distrib">Distributing Sources</a> section. 
    </li>
    
    <p>&nbsp;</p>
    <li>
      <a href="#config_pvcs_check_in"></a>
      <b>Check in monitor.xml to PVCS</b>
      <p>
      Once the configuration file is distributed, it may be checked back 
      into PVCS.  When checking the file back in, use the default revision
      and create a label which contains the date of the check-in.
    </li>
  </ol>

  <p><a href="#top"><font size="-1">Top</font></a></p>
  <p>&nbsp;</p>  
  <a name="utils"></a><h3>Utilities</h3>
  The Monitor provides utility scripts, which make administrative tasks
  such as updating configuration, distributing sources,
  starting or stopping the Monitors a breeze. <p></p>
  The utility scripts are all located in the CHI1PAS1 directory<br>
  <b>/users/common/mps/MpsMonitors/</b>
  <p></p>
  Currently available utility scripts are:
  <ul>
  <li>
    <a href="#StartStop">monitors.pl</a> -- for starting, stopping or
    bouncing the production monitors remotely.
  </li>
  <li>
    <a href="#distrib">mdistrib.pl</a> -- for distributing updated 
    monitor source and configuration files.
  </li>
  </ul>
  <p>&nbsp;</p>
  <a name="StartStop"><b>Starting and stopping the monitors</b></a>
  <p>
  The <font color="#a02020"><i>monitors.pl</i></font> can be used to start, stop,
  or bounce the monitors remotely.  The Monitors can be started, stopped or
  bounced on any number of markets.
  <br>
  The script uses the configuration file 
  <font color="#a02020"><i>config.xml</i></font> which contains the 
  information needed to start, stop or bounce the monitors in production.
  <p>
  For security reasons, login ID and password must be supplied interactively.
  Once started, the script will ask for the login ID and password
  to use when connecting to the production environments.  When prompted, enter your
  <b>production UNIX login ID and password</b>.
  <p>
  For usage help, log in to <b>chi1pas1</b> as <b>mps</b> and run <br>
  <font color="#a02020"><b>monitors.pl -h</b></font> 
  <br>
  or
  <br> 
  <font color="#a02020"><b>monitors.pl --help</b></font>
  <br>
  The <a href="../utils/monitors.pl.html">Full Documentation</a> is also available
  online.
  
  <p>&nbsp;</p>
  <a name="distrib"><b>Distributing Sources</b></a>
  <p>
  Whenever a source, configuration or an executable file that is part of the 
  Monitor is modified, the master copy of the Monitor sources on CHI1PAS1 must
  be updated.  Once that is done, the master copy is used to distribute the 
  newly modified sources to all production environments in order for the 
  updated changes to take effect.
  <p>
  This function of distributing the sources is handled by the 
  <font color="#a02020"><i>mdistrib.pl</i></font> utility.
  <br>
  This script is capable of distributing either the 
  <font color="#20b020"><b>monitor.xml</b></font>
  configuration file alone, or all monitor sources.<br>  
  <br>
  If desired, the script can also bounce the monitors after distributing the files.
  This allows for the distributed sources or configuration to take immediate effect.
  <br>If you elect to not bounce the monitors, the new configuration will take 
  effect the following morning.
  <p>
  The script is interactive, once started it will ask for the login ID and password
  to use when connecting to the production environments.  When prompted, enter your
  <b>production UNIX login ID and password</b>.
  For usage help, log in to <b>chi1pas1</b> as <b>mps</b> and run <br>
  <font color="#a02020"><b>mdistrib.pl -h</b></font> 
  <br>
  or
  <br> 
  <font color="#a02020"><b>mdistrib.pl --help</b></font>
  <p>
  The <a href="../utils/mdistrib.pl.html">Full Documentation</a> is also available
  online.
  </p>
  <p><a href="#top"><font size="-1">Top</font></a></p>
    

  <p>&nbsp;</p>  
  <a name="audits"></a><h3>Audits</h3>
  The following audits are currently available in the Monitor.
  <p></p>
  <ul>
  <li><a href="#IncollectCiber">Incollect Ciber</a></li>
  <li><a href="#InfraTransfer">Infranet Transfer</a></li>
  <li><a href="#MafMonitor">Maf Monitor</a></li>
  <li><a href="#MissingBlock">Missing Block</a></li>
  <li><a href="#MissingDataFile">Missing Data File</a></li>
  <li><a href="#OutcollectCiber">Outcollect Ciber</a></li>
  <li><a href="#ProgramBehind">Program Behind</a></li>
  <li><a href="#RaterStatus">Rater Status</a></li>
  <li><a href="#StuckFile">Stuck File</a></li>
  <li><a href="#SwitchBehind">Switch Behind</a></li>
  </ul>
  
  <p>&nbsp;</p>
  
  <a name="IncollectCiber"><b>Incollect Ciber</b></a>
  <p>
  Incollect Ciber files contain usage data of U.S Cellular subscriber
  calls made in non-U.S Cellular markets.  These files are sent from the
  clearing house to the MPS system using Electronic Data Transfer (EDT) at
  regular time intervals.
  <br>
  The <font color="#a02020"><i>Incollect Ciber Audit</i></font>
  issues an alarm if no new Incollect Ciber files arrive at the designated 
  MPS location for an extended period of time.
  </p>
  <a name="InfraTransfer"><b>Infranet Transfer</b></a>
  <p>
  After Data Usage files successfully process through the MAF system, they
  are transfered via FTP to the Infranet system.
  <br>
  In case of a failure in transfer, the 
  <font color="#a02020"><i>Infranet Transfer Audit</i></font> 
  alerts the MPS oncall personnel.
  </p>
  <a name="MafMonitor"><b>Maf Monitor</b></a>
  <p>
  The MAF system is critical to the MPS System.  If this process is down,
  no files will process through, ultimately causing delayed billing and 
  loss of customer satisfaction.  It is critical to monitor the state of
  MAF and warn if it fails.  
  <br>
  The <font color="#a02020"><i>Maf Monitor Audit</i></font> fulfills this 
  duty.
  </p>
  <a name="MissingBlock"><b>Missing Block</b></a>
  <p>
  Voice Usage files arrive to the MPS system from NDC 
  (Network Data Collections)
  in a sequenced fashion.  The sequencing affords gap detection to ensure
  no revenue-rich usage is lost in transit.
  <br>
  The <font color="#a02020"><i>Missing Block Audit</i></font> looks for 
  gaps in sequences and reports if any are found.
  </p>
  <a name="MissingDataFile"><b>Missing Data File</b></a>
  <p>
  This audit is very similar to the Missing Block Audit, but warns of 
  missing Data Usage files.
  </p>
  <a name="OutcollectCiber"><b>Outcollect Ciber</b></a>
  <p>
  The MPS system collects usage data of non-U.S. Cellular customers roaming
  in U.S. Cellular markets into Outcollect Ciber files.  These files are
  periodically sent to the clearing house using Electronic Data Transfer.
  The <font color="#a02020"><i>Outcollect Ciber Audit</i></font> warns in 
  case no files were sent out for an extended period of time.
  </p>
  <a name="ProgramBehind"><b>Program Behind</b></a>
  <p>
  Occasionally, one of the processes in the MPS system becomes congested
  and falls behind processing.  This condition manifests itself in the 
  system by a large amount of Usage Records queued up waiting to be processed
  by the congested program.
  When this condition occurs, the 
  <font color="#a02020"><i>Program Behind Audit</i></font> notifies 
  the MPS Oncall personnel.
  </p>
  <a name="RaterStatus"><b>Rater Status</b></a>
  <p>
  The <font color="#a02020"><i>Rater Status Audit</i></font> checks if all
  raters are running, and reports the names of any that failed.
  </p>
  <a name="StuckFile"><b>Stuck File</b></a>
  <p>
  Various issues may cause a file to get stuck in the middle of processing
  through the MPS system.  A stuck file can cause serious conjestion in the
  system as it prevents other files from processing.
  <br>
  The <font color="#a02020"><i>Stuck File Audit</i></font> warns when a usage
  file gets stuck anywhere in the MPS system.
  </p>
  <a name="SwitchBehind"><b>Switch Behind</b></a>
  <p>
  Issues at the switch, or problems with NDC feed may cause an outage in 
  processing files from a particular switch. 
  The <font color="#a02020"><i>Switch Behind Audit</i></font> 
  issues an alarm if there is an interruption in receipt of files from any
  switch.
  <br>
  The <font color="#a02020"><i>Switch Behind Audit</i></font> is also used for
  a separate audit performed on M05 for switches POCA and TWIN.  Since these
  switches behave differently from other switches, they needed a separate audit
  in order to avoid incorrect pages.  Behind the scenes a regular SwitchBehind 
  audit is performed but with a different set of parameters.  Please see the 
  <font color="#20b020"><b>monitor.xml</b></font> configuration file for details.
  </p>
  <p><a href="#top"><font size="-1">Top</font></a></p>  

  
  <hr align="center">
  <table width="100%" border="0" bgcolor="#ffffc0">
    <tr>
      <td align="left"><a href="../intro.html"><< prev</a></td>
      <td align="center"><a href="../">[ Home ]</a></td>
      <td align="right"><font color="lightgrey">next >></font></td>
    </tr>
  </table>
  <hr align="center">
</body>
</head>
</html>